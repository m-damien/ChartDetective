(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{106:function(e,t,n){},112:function(e,t,n){"use strict";n.r(t);var i=n(0),a=n.n(i),r=n(13),o=n.n(r),s=(n(55),n(56),n(57),n(1)),l=n(2),c=n(5),u=n(3),h=n(6),d=(n(58),n(7)),p=function(e){return e[e.MARKS=0]="MARKS",e[e.CONNECTED=1]="CONNECTED",e[e.HORIZONTAL_GRIDLINE=2]="HORIZONTAL_GRIDLINE",e[e.VERTICAL_GRIDLINE=3]="VERTICAL_GRIDLINE",e}({}),f=function(){function e(){Object(s.a)(this,e),this.points=void 0,this.type=void 0,this.points=[],this.type=p.MARKS}return Object(l.a)(e,[{key:"clone",value:function(){var t=new e;return t.type=this.type,t.points=[].concat(this.points),t}},{key:"clear",value:function(){this.type=p.MARKS,this.points=[]}}]),e}();function v(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return g(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0,a=function(){};return{s:a,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,r=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw r}}}}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var m=function(){function e(){Object(s.a)(this,e),this.path=void 0,this.isFilled=void 0,this.lineWidth=void 0,this.lineCap=void 0,this.lineJoin=void 0,this.miterLimit=void 0,this.lineDash=void 0,this.font=void 0,this.textAlign=void 0,this.textBaseline=void 0,this.direction=void 0,this.fillStyle=void 0,this.strokeStyle=void 0,this.transform=void 0,this.globalAlpha=void 0,this.globalCompositeOperation=void 0,this.bbox=void 0,this.clipPaths=void 0,this.text=void 0,this.textX=void 0,this.textY=void 0,this.unicode=void 0,this.path=[],this.isFilled=!1,this.lineWidth=1,this.lineCap="butt",this.lineJoin="miter",this.miterLimit=10,this.lineDash=[],this.font="10px sans-serif",this.textAlign="start",this.textBaseline="alphabetic",this.direction="inherit",this.fillStyle="#000",this.strokeStyle="#000",this.transform=null,this.globalAlpha=1,this.globalCompositeOperation="source-over",this.bbox={x:0,y:0,width:0,height:0},this.clipPaths=null}return Object(l.a)(e,[{key:"transformPos",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.transform,i=new DOMPoint(e,t).matrixTransform(n);return{x:i.x,y:i.y}}},{key:"isContained",value:function(e){return e.x<this.rect.x&&e.y<this.rect.y&&e.x+e.width>this.rect.x+this.rect.width&&e.y+e.height>this.rect.y+this.rect.height}},{key:"pointsToRect",value:function(e,t){return{x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),width:Math.abs(t.x-e.x),height:Math.abs(t.y-e.y)}}},{key:"computeBBox",value:function(e){if(void 0!==this.text){var t=e.font;e.font=this.font;var n=e.measureText(this.text),i=this.transformPos(this.textX-n.actualBoundingBoxLeft,this.textY-n.actualBoundingBoxAscent),a=this.transformPos(this.textX+n.actualBoundingBoxRight,this.textY+n.actualBoundingBoxDescent);this.bbox=this.pointsToRect(i,a),e.font=t}else{var r=this.pathToRect(this.path),o=this.transformPos(r.left-0,r.top-0),s=this.transformPos(r.right+0,r.bottom+0);this.bbox=this.pointsToRect(o,s)}if(this.clipPaths){var l,c=v(this.clipPaths);try{for(c.s();!(l=c.n()).done;){var u=l.value;if(u){var h=this.pathToRect(u.path),d=u.transform,p=(o=this.transformPos(h.left,h.top,d),s=this.transformPos(h.right,h.bottom,d),this.pointsToRect(o,s)),f=Math.max(p.x,this.bbox.x),g=Math.min(p.x+p.width,this.bbox.x+this.bbox.width),m=Math.max(p.y,this.bbox.y),y=Math.min(p.y+p.height,this.bbox.y+this.bbox.height);this.bbox={x:f,y:m,width:g-f,height:y-m}}}}catch(b){c.e(b)}finally{c.f()}}}},{key:"pathToRect",value:function(t){for(var n={x:0,y:0},i=Number.MAX_SAFE_INTEGER,a=Number.MAX_SAFE_INTEGER,r=Number.MIN_SAFE_INTEGER,o=Number.MIN_SAFE_INTEGER,s=0;s<t.length;++s){var l=t[s][0],c=t[s][1];l===e.types.MOVETO?n={x:c[0],y:c[1]}:l===e.types.LINETO?(i=Math.min(n.x,c[0],i),a=Math.min(n.y,c[1],a),r=Math.max(n.x,c[0],r),o=Math.max(n.y,c[1],o),n={x:c[0],y:c[1]}):l===e.types.CURVETO&&(i=Math.min(n.x,c[4],i),a=Math.min(n.y,c[5],a),r=Math.max(n.x,c[4],r),o=Math.max(n.y,c[5],o),n={x:c[4],y:c[5]})}return{left:i,x:i,top:a,y:a,width:r-i,height:o-a,right:r,bottom:o}}},{key:"addCmd",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];this.path.push([e,t])}},{key:"saveStyle",value:function(t){e.copyStyle(this,t),this.transform=DOMMatrix.fromMatrix(t.getTransform())}},{key:"applyStyle",value:function(t){e.copyStyle(t,this);var n=DOMMatrix.fromMatrix(t.getTransform());if(this.clipPaths){var i,a=v(this.clipPaths);try{for(a.s();!(i=a.n()).done;){var r=i.value;if(r){var o=r.path,s=r.transform;t.setTransform(n.a,n.b,n.c,n.d,n.e,n.f),t.transform(s.a,s.b,s.c,s.d,s.e,s.f),this.applyPath(o,t),t.clip()}}}catch(l){a.e(l)}finally{a.f()}}t.setTransform(n.a,n.b,n.c,n.d,n.e,n.f),t.transform(this.transform.a,this.transform.b,this.transform.c,this.transform.d,this.transform.e,this.transform.f)}},{key:"getTransform",value:function(){return this.transform}},{key:"clone",value:function(){var t=new e;return t.saveStyle(this),t.path=t.path.concat(this.path),this.clipPaths&&(t.clipPaths=t.clipPaths.concat(this.clipPaths)),t.isFilled=this.isFilled,t.text=this.text,t.textX=this.textX,t.textY=this.textY,t.unicode=this.unicode,t.bbox={x:this.bbox.x,y:this.bbox.y,width:this.bbox.width,height:this.bbox.height},t}},{key:"applyPath",value:function(t,n){for(var i=0;i<t.length;++i){var a=t[i][0],r=t[i][1];a===e.types.BEGIN?n.beginPath():a===e.types.CLOSE?n.closePath():a===e.types.MOVETO?n.moveTo(r[0],r[1]):a===e.types.LINETO?n.lineTo(r[0],r[1]):a===e.types.CURVETO&&n.bezierCurveTo(r[0],r[1],r[2],r[3],r[4],r[5])}}},{key:"draw",value:function(e){e.save(),this.applyStyle(e),void 0!==this.text?this.isFilled?e.fillText(this.text,this.textX,this.textY):e.strokeText(this.text,this.textX,this.textY):(this.applyPath(this.path,e),this.isFilled?e.fill():e.stroke()),e.restore()}},{key:"rect",get:function(){return this.bbox}}],[{key:"copyStyle",value:function(e,t){e.lineWidth=t.lineWidth,e.lineCap=t.lineCap,e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit;var n=void 0!==t.getLineDash?t.getLineDash():t.lineDash;void 0!==e.setLineDash?e.setLineDash(n):e.lineDash=n,e.font=t.font,e.textAlign=t.textAlign,e.textBaseline=t.textBaseline,e.direction=t.direction,e.fillStyle=t.fillStyle,e.strokeStyle=t.strokeStyle,e.globalAlpha=t.globalAlpha,e.globalCompositeOperation=t.globalCompositeOperation,e.clipPaths=t.clipPaths}}]),e}();m.types={BEGIN:0,CLOSE:1,MOVETO:2,LINETO:3,CURVETO:4};var y=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).hoveredCmdsIdx=void 0,n.startPt=void 0,n.endPt=void 0,n.isMouseDown=void 0,n.selectionColor=void 0,n.selectionRectOutlineColor=void 0,n.selectionRectColor=void 0,n.overlayColor=void 0,n.chartBuffer=void 0,n.zbuffer=void 0,n.zIncrement=void 0,n.offset=void 0,n.intervalId=void 0,n.globalMouseUpListener=void 0,n.previousWidth=void 0,n.previousHeight=void 0,n.previousShapeCount=void 0,n.previousGhostCount=void 0,n.bufferTransform=void 0,n.viewTransform=void 0,n.viewTransformedTime=void 0,n.viewTransformed=void 0,n.tmpPoint=void 0,n.state={isPanning:!1,isCentered:!0},n.hoveredCmdsIdx=[],n.startPt={x:0,y:0},n.endPt={x:0,y:0},n.isMouseDown=!1,n.selectionColor="rgba(55, 133, 246, 255)",n.selectionRectOutlineColor="rgba(127, 127, 127)",n.selectionRectColor="rgba(81, 131, 251, 0)",n.overlayColor="rgba(55, 133, 246, 255)",n.chartBuffer=document.createElement("canvas"),n.zbuffer=document.createElement("canvas"),n.zIncrement=0,n.offset=0,n.previousWidth=0,n.previousHeight=0,n.previousShapeCount=0,n.previousGhostCount=0,n.viewTransform=new DOMMatrix,n.bufferTransform=new DOMMatrix,n.tmpPoint=new DOMPoint,n.viewTransformedTime=0,n.viewTransformed=!1,n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"transformPos",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.tmpPoint.x=e,this.tmpPoint.y=t,this.tmpPoint.w=1,this.tmpPoint.z=0;var a=this.tmpPoint;return n&&i?a=this.viewTransform.multiply(this.bufferTransform).inverse().transformPoint(this.tmpPoint):(i&&(a=this.viewTransform.inverse().transformPoint(this.tmpPoint)),n&&(a=this.bufferTransform.inverse().transformPoint(this.tmpPoint))),{x:a.x,y:a.y}}},{key:"eventToMousePos",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=document.getElementById("chartview-canvas").getBoundingClientRect(),a=e.clientX-i.left,r=e.clientY-i.top;return this.transformPos(a,r,t,n)}},{key:"getColorDistance",value:function(e,t){var n=e>>16&255,i=e>>8&255,a=255&e,r=t>>16&255,o=t>>8&255,s=255&t;return Math.abs(n-r)+Math.abs(i-o)+Math.abs(a-s)}},{key:"rgbToZValue",value:function(e,t,n){return(e<<16)+(t<<8)+n-1}},{key:"zValueToCommand",value:function(e){if(e%this.zIncrement!==0)return null;var t=this.props.chart.shapes,n=e/this.zIncrement;return n<t.length?{cmd:t[n],idx:n}:null}},{key:"getCommandAtPos",value:function(e,t){var n=this.zbuffer.getContext("2d").getImageData(e-1,t-1,3,3),i=this.rgbToZValue(n.data[16],n.data[17],n.data[18]),a=this.zValueToCommand(i);if(null===a)for(var r=0,o=0;o<n.data.length;o+=4){var s=this.rgbToZValue(n.data[o],n.data[o+1],n.data[o+2]),l=this.zValueToCommand(s);if(null!==l){var c=this.getColorDistance(i,s);(c<r||null===a)&&(a=l,r=c)}}return a}},{key:"onGlobalMouseUp",value:function(e){0===e.button&&(this.isMouseDown=!1)}},{key:"onMouseUp",value:function(e){0===e.button&&(this.isMouseDown&&!this.state.isPanning&&(this.hoveredCmdsIdx.length>0?this.props.getDraggableSelection().addShapesIdx(this.hoveredCmdsIdx,e.shiftKey&&1===this.hoveredCmdsIdx.length):e.shiftKey||this.props.getDraggableSelection().clearShapes(),this.redraw()),this.isMouseDown=!1)}},{key:"onMouseDown",value:function(e){if(0===e.button){this.state.isPanning||e.shiftKey||this.props.getDraggableSelection().clearShapes();var t=!this.state.isPanning,n=this.eventToMousePos(e,t,t);this.startPt=n,this.endPt=n,this.isMouseDown=!0}}},{key:"onMouseMove",value:function(e){var t=!this.state.isPanning,n=this.eventToMousePos(e,t,t);if(this.props.onMouseMoved({x:n.x+this.props.chart.rect.x,y:n.y+this.props.chart.rect.y}),this.isMouseDown){if(this.state.isPanning){var i=this.endPt.x-n.x,a=this.endPt.y-n.y,r=this.getEffectiveScale(this.viewTransform);this.setTmpTransform(this.viewTransform.translate(-i/r.x,-a/r.y)),this.startPt=n,this.endPt=n,this.setState({isCentered:!1})}else{var o=this.props.chart.shapes;this.endPt=n;var s=Math.min(this.startPt.x,this.endPt.x),l=Math.min(this.startPt.y,this.endPt.y),c=Math.abs(this.endPt.x-this.startPt.x),u=Math.abs(this.endPt.y-this.startPt.y);if(c>2&&u>2){var h={x:s+this.props.chart.rect.x,y:l+this.props.chart.rect.y,width:c,height:u};this.hoveredCmdsIdx=[];for(var d=0;d<o.length;++d){if(o[d].isContained(h))this.props.ghostShapes.includes(o[d])||this.hoveredCmdsIdx.push(d)}}}this.redraw()}else{var p=this.eventToMousePos(e,!1,!0),f=this.getCommandAtPos(p.x,p.y);null!==f?1===this.hoveredCmdsIdx.length&&this.hoveredCmdsIdx[0]===f.idx||(this.hoveredCmdsIdx=[f.idx],this.redraw()):this.hoveredCmdsIdx.length>0&&(this.hoveredCmdsIdx=[],this.redraw())}}},{key:"onMouseLeave",value:function(e){this.hoveredCmdsIdx.length>0&&(this.hoveredCmdsIdx=[],this.redraw())}},{key:"zoom",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;if(-1===t&&-1===n){var i=this.transformPos(this.previousWidth/2,this.previousHeight/2,!1,!0);t=i.x,n=i.y}var a=this.viewTransform.translate(t,n);a.scaleSelf(e+1,e+1),a.translateSelf(-t,-n),this.setTmpTransform(a),this.setState({isCentered:!1})}},{key:"onMouseWheel",value:function(e){var t=this.eventToMousePos(e,!1,!0),n=e.deltaY<0?1:-1,i=Math.min(.01*Math.abs(e.deltaY),.4)*n;this.zoom(i,t.x,t.y)}},{key:"getEffectiveScale",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=null===e?this.viewTransform.multiply(this.bufferTransform):e,n=(t.a+t.d)/2,i=(t.a-t.d)/2,a=(t.c+t.b)/2,r=(t.c-t.b)/2,o=Math.sqrt(n*n+r*r),s=Math.sqrt(i*i+a*a);return{x:o+s,y:o-s}}},{key:"getShapesRect",value:function(e){for(var t={x:e[0].rect.x,y:e[0].rect.y},n={x:t.x+e[0].rect.width,y:t.y+e[0].rect.height},i=1;i<e.length;++i){var a=e[i].rect;t.x=Math.min(t.x,a.x),t.y=Math.min(t.y,a.y),n.x=Math.max(n.x,a.x+a.width),n.y=Math.max(n.y,a.y+a.height)}return{x:t.x,y:t.y,width:n.x-t.x,height:n.y-t.y}}},{key:"refreshBuffers",value:function(){if(void 0!==document.getElementById("chartview-canvas")){var e=this.getEffectiveScale(this.bufferTransform);this.zbuffer.width=this.props.chart.rect.width*e.x,this.zbuffer.height=this.props.chart.rect.height*e.y,this.chartBuffer.width=this.props.chart.rect.width*e.x,this.chartBuffer.height=this.props.chart.rect.height*e.y;var t=this.chartBuffer.getContext("2d"),n=this.zbuffer.getContext("2d");t.fillStyle="white",t.fillRect(0,0,this.chartBuffer.width,this.chartBuffer.height),n.clearRect(0,0,this.zbuffer.width,this.zbuffer.height);var i=this.props.chart.shapes;if(i.length>0){t.save(),n.save(),t.setTransform(this.bufferTransform),t.translate(-this.props.chart.rect.x,-this.props.chart.rect.y),n.setTransform(t.getTransform()),this.zIncrement=Math.floor(16777215/i.length);for(var a=0;a<i.length;++a){var r=this.props.ghostShapes.includes(i[a]),o={};if(m.copyStyle(o,i[a]),r&&(i[a].globalAlpha=.2,i[a].globalCompositeOperation="source-over"),i[a].draw(t),!r){var s=(this.zIncrement*a+1).toString(16),l="#000000".slice(0,-s.length)+s;i[a].fillStyle=l,i[a].strokeStyle=l,i[a].globalAlpha=1,i[a].draw(n)}m.copyStyle(i[a],o)}t.restore(),n.restore()}}}},{key:"drawOverlay",value:function(e){var t=this.props.state.overlay;if(t.points.length>0){e.save();var n=this.getEffectiveScale(this.bufferTransform);e.setTransform(e.getTransform().multiply(this.bufferTransform)),e.translate(-this.props.chart.rect.x,-this.props.chart.rect.y);var i=1/n.x;if(e.strokeStyle=this.overlayColor,e.lineWidth=i,e.fillStyle=this.overlayColor,t.type===p.CONNECTED){e.beginPath(),e.moveTo(t.points[0].x.pixel,t.points[0].y.pixel);for(var a=1;a<t.points.length;++a)e.lineTo(t.points[a].x.pixel,t.points[a].y.pixel);e.stroke()}else if(t.type===p.HORIZONTAL_GRIDLINE){e.beginPath();for(var r=0;r<t.points.length;++r)e.moveTo(this.props.chart.rect.x,t.points[r].y.pixel),e.lineTo(this.props.chart.rect.x+this.props.chart.rect.width,t.points[r].y.pixel);e.stroke()}else if(t.type===p.VERTICAL_GRIDLINE){e.beginPath();for(var o=0;o<t.points.length;++o)e.moveTo(t.points[o].x.pixel,this.props.chart.rect.y),e.lineTo(t.points[o].x.pixel,this.props.chart.rect.y+this.props.chart.rect.height);e.stroke()}else for(var s=0;s<t.points.length;++s){var l=t.points[s];e.fillRect(l.x.pixel-5,l.y.pixel-i/2,10,i),e.fillRect(l.x.pixel-i/2,l.y.pixel-5,i,10)}e.restore()}}},{key:"redraw",value:function(){var e=document.getElementById("chartview-canvas");if(null!==e){if(this.viewTransformed&&Date.now()-this.viewTransformedTime>1e3){var t=this.viewTransform.multiply(this.bufferTransform),n=this.getEffectiveScale(t).x,i=7e6/(e.width*e.height);n=Math.min(n,i),this.bufferTransform=new DOMMatrix,this.bufferTransform.scaleSelf(n,n),this.viewTransform=t.multiply(this.bufferTransform.inverse()),this.viewTransformed=!1,this.refreshBuffers()}var a=e.getContext("2d");a.fillStyle="white",a.resetTransform(),a.fillRect(0,0,e.width,e.height),a.setTransform(this.viewTransform),a.drawImage(this.chartBuffer,0,0);var r=this.props.chart.shapes,o=this.getEffectiveScale();if(this.drawOverlay(a),void 0!==r&&r.length>0){a.save(),a.setTransform(a.getTransform().multiply(this.bufferTransform)),a.save(),a.translate(-this.props.chart.rect.x,-this.props.chart.rect.y);var s=this.props.state.shapeSelection,l=[];l=l.concat(this.hoveredCmdsIdx),s.isDragged||s.isHidden()||(l=l.concat(s.shapesIdx));for(var c=0;c<l.length;++c){var u=r[l[c]],h={};m.copyStyle(h,u);var d=u.isFilled;u.strokeStyle="white",u.isFilled&&(u.isFilled=!1,u.lineWidth=1),u.isFilled=!1,u.globalAlpha=.8,u.globalCompositeOperation="source-over",u.draw(a);var p=u.rect;a.lineWidth=1/o.x,a.lineJoin="round",a.setLineDash([4*u.lineWidth,3*u.lineWidth]),a.lineDashOffset=this.offset,a.strokeStyle=this.selectionColor,a.strokeRect(p.x,p.y,p.width,p.height),m.copyStyle(u,h),u.isFilled=d}if(a.restore(),this.isMouseDown){a.fillStyle=this.selectionRectColor,a.strokeStyle=this.selectionRectOutlineColor,a.lineWidth=2/o.x,a.globalAlpha=1,a.lineDashOffset=0,a.setLineDash([a.lineWidth,a.lineWidth]),a.globalCompositeOperation="source-over";var f=this.startPt.x,v=this.startPt.y,g=this.endPt.x-f,y=this.endPt.y-v;a.fillRect(f,v,g,y),a.strokeRect(f,v,g,y),a.setLineDash([])}a.restore()}}}},{key:"isCentered",value:function(){return this.state.isCentered}},{key:"center",value:function(){this.previousWidth=-1,this.setState({isCentered:!0})}},{key:"resize",value:function(){var e=document.getElementById("chartview-canvas"),t=e.parentNode,n=t.offsetTop-t.parentElement.offsetTop;e.width=t.clientWidth,e.height=t.clientHeight-n;var i=this.props.chart;if(e.width!==this.previousWidth||e.height!==this.previousHeight||this.props.chart.shapes.length!==this.previousShapeCount||this.props.ghostShapes.length!==this.previousGhostCount){if(this.previousWidth=e.width,this.previousHeight=e.height,this.previousShapeCount=this.props.chart.shapes.length,this.previousGhostCount=this.props.ghostShapes.length,void 0!==i.shapes&&i.shapes.length>0&&this.state.isCentered){var a=i.rect,r=e.width/a.width,o=e.height/a.height,s=Math.min(r,o),l=new DOMMatrix;l.scaleSelf(s,s);var c=(e.width-a.width*s)/2/s,u=(e.height-a.height*s)/2/s;l.translateSelf(c,u);var h=l.multiply(this.bufferTransform.inverse());this.setTmpTransform(h),this.updateDraggableSelection()}this.refreshBuffers()}else this.redraw()}},{key:"setTmpTransform",value:function(e){this.viewTransformedTime=Date.now()+(0===this.viewTransformedTime?-1001:0),this.viewTransformed=!0,this.viewTransform=e,this.updateDraggableSelection()}},{key:"updateDraggableSelection",value:function(){var e=document.getElementById("chartview-canvas").parentNode,t=this.props.getDraggableSelection();if(void 0!==t){t.scale=this.getEffectiveScale();var n=e.getBoundingClientRect();this.tmpPoint.x=0,this.tmpPoint.y=0,this.tmpPoint.w=1,this.tmpPoint=this.viewTransform.multiply(this.bufferTransform).transformPoint(this.tmpPoint),t.translate={x:n.x+this.tmpPoint.x-this.props.chart.rect.x*t.scale.x,y:n.y+this.tmpPoint.y-this.props.chart.rect.y*t.scale.y},t.forceUpdate()}}},{key:"componentDidMount",value:function(){var e=this;this.globalMouseUpListener=this.onGlobalMouseUp.bind(this),document.addEventListener("mouseup",this.globalMouseUpListener),this.intervalId=window.setInterval(function(){e.offset+=2,e.redraw()},250),this.resize(),this.updateDraggableSelection()}},{key:"componentDidUpdate",value:function(){this.resize(),this.updateDraggableSelection()}},{key:"componentWillUnmount",value:function(){window.clearInterval(this.intervalId),document.removeEventListener("mouseup",this.globalMouseUpListener)}},{key:"enterPanMode",value:function(){this.state.isPanning||this.setState({isPanning:!0})}},{key:"exitPanMode",value:function(){this.setState({isPanning:!1})}},{key:"render",value:function(){var e=this;return a.a.createElement(i.Fragment,null,a.a.createElement("div",{style:{textAlign:"right",marginRight:"2px"}},a.a.createElement("button",{style:{margin:"2px"},className:"button gray small",onMouseDown:function(e){return e.preventDefault()},onClick:function(t){return e.zoom(.1)}},a.a.createElement("i",{className:"fa fa-search-plus","aria-hidden":"true"})),a.a.createElement("button",{style:{margin:"2px"},className:"button gray small",onMouseDown:function(e){return e.preventDefault()},onClick:function(t){return e.zoom(-.1)}},a.a.createElement("i",{className:"fa fa-search-minus","aria-hidden":"true"})),a.a.createElement("button",{style:{margin:"2px"},className:"button small "+(this.isCentered()?"gray disabled":""),onMouseDown:function(e){return e.preventDefault()},onClick:function(t){return e.center()}},a.a.createElement("i",{className:"fa fa-arrows-alt","aria-hidden":"true"})," Center & Fit")),a.a.createElement("div",{className:"noselect",style:{position:"relative",width:"100%",height:"100%",overflow:"hidden"}},a.a.createElement("canvas",{style:{cursor:this.state.isPanning?"grab":"crosshair"},id:"chartview-canvas",onMouseDown:this.onMouseDown.bind(this),onMouseMove:this.onMouseMove.bind(this),onMouseUp:this.onMouseUp.bind(this),onMouseLeave:this.onMouseLeave.bind(this),onWheel:this.onMouseWheel.bind(this)},"Canvas not supported")))}}]),t}(a.a.Component),b=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={switches:n.getGeneratedFilters()},n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"getGeneratedFilters",value:function(){var e=this.props.shapes,t={},n={},i=0;for(i=0;i<e.length;++i){var a=e[i],r=this.props.filter.getValue(a);void 0===t[r.hash]&&(t[r.hash]=0,n[r.hash]=r),n[r.hash].updateShape(a),t[r.hash]+=1}var o=Object.keys(t);o.sort(function(e,n){return t[n]-t[e]});var s=[];for(i=0;i<o.length;++i){var l=this.getUniqueId(i);r=n[o[i]];if(!(t[o[i]]>this.props.filter.minNumberElements()&&i<25)){s.push({value:{hash:"misc"},canvasId:l+"Canvas",checkboxId:l+"Checkbox"});break}s.push({value:n[o[i]],canvasId:l+"Canvas",checkboxId:l+"Checkbox"})}return s}},{key:"getAllowedHashes",value:function(){for(var e=[],t=[],n=0;n<this.state.switches.length;++n){var i=this.state.switches[n];(document.getElementById(i.checkboxId).checked?e:t).push(i.value.hash)}return{allowed:e,forbidden:t}}},{key:"apply",value:function(e){for(var t=[],n=this.getAllowedHashes(),i=n.allowed.includes("misc"),a=0;a<e.length;++a){var r=this.props.filter.getValue(e[a]).hash;(n.allowed.includes(r)||i&&!n.forbidden.includes(r))&&t.push(e[a])}return t}},{key:"setAllChecked",value:function(){for(var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=0;n<this.state.switches.length;++n){var i=this.state.switches[n];document.getElementById(i.checkboxId).checked=e}t&&this.props.onFilterChanged()}},{key:"setChecked",value:function(e){for(var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=0;n<this.state.switches.length;++n){var i=this.state.switches[n];document.getElementById(i.checkboxId).checked=e.includes(i.value.hash)}t&&this.props.onFilterChanged()}},{key:"onDoubleClick",value:function(e){var t=document.getElementById(e.checkboxId);this.setAllChecked(!1,!1),t.checked=!0,this.props.onFilterChanged()}},{key:"onChange",value:function(){this.props.onFilterChanged()}},{key:"repaintSwitches",value:function(){for(var e=0;e<this.state.switches.length;++e){var t=this.state.switches[e],n=document.getElementById(t.canvasId),i=n.getContext("2d");this.props.filter.paint(i,t.value,n.width,n.height)}}},{key:"componentDidMount",value:function(){this.repaintSwitches()}},{key:"componentDidUpdate",value:function(){this.repaintSwitches()}},{key:"getUniqueId",value:function(e){return this.props.filter.getName().replace(/ /g,"")+e.toString()}},{key:"render",value:function(){for(var e=this,t=[],n=function(){var n=e.state.switches[i];t.push(a.a.createElement("label",{onDoubleClick:function(t){return e.onDoubleClick(n)},key:i.toString(),className:"switch tooltip"},a.a.createElement("input",{id:n.checkboxId,type:"checkbox",onChange:function(t){return e.onChange()},defaultChecked:!0}),a.a.createElement("span",{className:"switch-rect"}),a.a.createElement("canvas",{id:n.canvasId,width:100,height:100,className:"switch-inside"}),a.a.createElement("span",{className:"tooltiptext tooltip-bottom"},"Double click to select only this.")))},i=0;i<this.state.switches.length;++i)n();return a.a.createElement("div",{style:{textAlign:"left",verticalAlign:"middle",marginLeft:10,overflowX:"hidden",overflowY:"hidden",whiteSpace:"nowrap"}},a.a.createElement("span",{style:{width:"90px",display:"inline-block",fontWeight:800,fontSize:"14px"}},this.props.filter.getName(),": "),a.a.createElement("button",{className:"button",onMouseDown:function(e){return e.preventDefault()},onClick:function(t){return e.setAllChecked(!0)}},"All"),a.a.createElement("button",{className:"button gray",onMouseDown:function(e){return e.preventDefault()},onClick:function(t){return e.setAllChecked(!1)}},"None"),t)}}]),t}(a.a.Component),w=function(){function e(t,n){Object(s.a)(this,e),this.pixel=void 0,this.axis=void 0,this.pixel=t,this.axis=n}return Object(l.a)(e,[{key:"clone",value:function(t){return new e(this.pixel,t)}},{key:"value",get:function(){return this.axis.pixelToTick(this.pixel)},set:function(e){this.pixel=this.axis.tickToPixel(e)}}]),e}(),_=function(){function e(t,n){Object(s.a)(this,e),this.x=void 0,this.y=void 0,this.x=t,this.y=n}return Object(l.a)(e,[{key:"clone",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.x.axis,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.y.axis;return new e(this.x.clone(t),this.y.clone(n))}}]),e}(),S=function(){function e(){Object(s.a)(this,e)}return Object(l.a)(e,null,[{key:"project",value:function(e,t,n,i,a){return(e-t)/(n-t)*(a-i)+i}},{key:"interpolate",value:function(e,t){if(0===e.length)return null;for(var n=e[0],i=e[e.length-1],a=0;a<e.length;++a){var r=e[a];if(r.x.pixel===t)return r;r.x.pixel>t&&r.x.pixel<i.x.pixel&&(i=r),r.x.pixel<t&&r.x.pixel>n.x.pixel&&(n=r)}if(n.x.pixel>t||i.x.pixel<t)return null;var o=Math.abs(i.x.pixel-n.x.pixel);if(0===o)return i;var s=Math.abs(i.x.pixel-t)/o,l=n.y.pixel*s+i.y.pixel*(1-s);return new _(new w(t,n.x.axis),new w(l,n.y.axis))}},{key:"dist",value:function(e,t,n,i){var a=n-e,r=t;return Math.sqrt(a*a+r*r)}}]),e}(),k=n(17);function x(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return E(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return E(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0,a=function(){};return{s:a,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,r=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw r}}}}function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var C=function(){function e(){Object(s.a)(this,e)}return Object(l.a)(e,null,[{key:"shapesToPoints",value:function(e,t,n){for(var i=[],a=0;a<e.length;++a)for(var r=e[a].path,o=e[a].transform,s=0;s<r.length;++s){var l=r[s][0],c=r[s][1];if(l===m.types.LINETO||l===m.types.MOVETO){var u=new DOMPoint(c[0],c[1]).matrixTransform(o),h=new w(u.x,t),d=new w(u.y,n);i.push(new _(h,d))}}return i}},{key:"splitIntoSubShapes",value:function(e){for(var t=e.path,n=e.transform,i=[],a=[],r=0;r<t.length;++r){if(t[r][0]===m.types.MOVETO&&a.length>1){var o=new m;m.copyStyle(o,e),o.path=a,o.transform=n,o.isFilled=e.isFilled,o.computeBBox(null),i.push(o),a=[]}a.push(t[r])}if(a.length>0){var s=new m;m.copyStyle(s,e),s.path=a,s.transform=n,s.isFilled=e.isFilled,s.computeBBox(null),i.push(s)}return i}},{key:"splitShapesIntoSubShapes",value:function(t){var n,i=[],a=x(t);try{for(a.s();!(n=a.n()).done;){var r=n.value;i=i.concat(e.splitIntoSubShapes(r))}}catch(o){a.e(o)}finally{a.f()}return i}},{key:"shapeToAngles",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:180/Math.PI,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=[];if(null!=e&&e.path.length>2)for(var a=[],r=0;r<e.path.length;++r){var o=e.path[r][0];if(o!==m.types.BEGIN){var s=0,l=0;if(o===m.types.CLOSE)s=a[0][0],l=a[0][1];else{var c=e.path[r][1];s=c[0],l=c[1]}if(a.push([s,l]),n){if(a.length>=2){var u=a[a.length-2],h=a[a.length-1],d=Math.atan2(u[1]-h[1],u[0]-h[0]),p=Math.round(d*t);i.push(p)}}else if(a.length>=3){var f=a[a.length-3],v=a[a.length-2],g=a[a.length-1],y=v[0]-f[0],b=v[1]-f[1],w=g[0]-v[0],_=g[1]-v[1],S=Math.atan2(y*_-b*w,y*w+b*_),k=180*S/Math.PI;if(0!==Math.abs(k)&&180!==Math.abs(k)){var x=Math.round(S*t);i.push(x)}}}}return i}},{key:"isLine",value:function(t){return 0===e.shapeToAngles(t).length}},{key:"isRectangle",value:function(t){var n=e.shapeToAngles(t);return 3===n.length&&n.every(function(e){return 90===Math.abs(e)})}},{key:"colorHexToRgb",value:function(e){e=e.startsWith("#")?e.substring(1,e.length):e;var t=parseInt(e,16);return[t>>16&255,t>>8&255,255&t]}},{key:"isColor",value:function(t){var n=e.colorHexToRgb(t);return!(n[0]===n[1]&&n[1]===n[2])}}]),e}();function P(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return T(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return T(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0,a=function(){};return{s:a,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,r=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw r}}}}function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var L=function(e){return e[e.AXIS=0]="AXIS",e[e.BAR=1]="BAR",e[e.LINE=2]="LINE",e[e.SCATTER=3]="SCATTER",e[e.ERRORBAR=4]="ERRORBAR",e[e.BOX_PLOT=5]="BOX_PLOT",e[e.BOX_PLOT_Q1=6]="BOX_PLOT_Q1",e[e.BOX_PLOT_Q3=7]="BOX_PLOT_Q3",e[e.BOX_PLOT_MIN=8]="BOX_PLOT_MIN",e[e.BOX_PLOT_MAX=9]="BOX_PLOT_MAX",e}({}),O=function(){function e(t,n){Object(s.a)(this,e),this._type=void 0,this.name=void 0,this._data=void 0,this.shapes=void 0,this.linkedElements=void 0,this.mainColor=void 0,this.canBeInterpolated=void 0,this._canHaveErrorBars=void 0,this._type=t,this.name=n,this._data=[],this.shapes=[],this.mainColor=null,this.linkedElements=[null,null],this.canBeInterpolated=t===L.LINE,this._canHaveErrorBars=t!==L.BOX_PLOT}return Object(l.a)(e,[{key:"copy",value:function(e,t,n){this._type=e._type,this.name=e.name,this._data=[];var i,a=P(e.data);try{for(a.s();!(i=a.n()).done;){var r=i.value;this._data.push(r.clone(t,n))}}catch(o){a.e(o)}finally{a.f()}this.linkedElements=Object(k.a)(e.linkedElements),this.shapes=Object(k.a)(e.shapes)}},{key:"clone",value:function(t,n){var i=new e(this._type,this.name);return i.copy(this,t,n),i}},{key:"is",value:function(e){return this._type===e}},{key:"getMainColor",value:function(){if(null!==this.mainColor)return this.mainColor;for(var e={},t=null,n=null,i=0;i<this.shapes.length;++i){var a=this.shapes[i],r=a.strokeStyle;a.isFilled&&(r=a.fillStyle),e[r]=r in e?e[r]+1:1,(null===t||e[r]>e[t])&&(t=r),C.isColor(r)&&(null===n||e[r]>e[n])&&(n=r)}return this.mainColor=null!==n?n:t,this.mainColor}},{key:"getAtTickX",value:function(e){for(var t=0;t<this.data.length;++t){var n=this.data[t];if(n.x.value===e)return n.y}return null}},{key:"getAtPixelX",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!this.canBeInterpolated){var n,i=P(this.data);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a.x.pixel===e){if(0===t)return a;t--}}}catch(r){i.e(r)}finally{i.f()}return null}return S.interpolate(this.data,e)}},{key:"canHaveErrorBars",value:function(){return this._canHaveErrorBars}},{key:"hasErrorBars",value:function(){return null!==this.linkedElements[0]&&null!==this.linkedElements[1]}},{key:"data",get:function(){return this._data},set:function(e){this._data=e}},{key:"upperErrorBar",get:function(){return this.linkedElements[0]},set:function(e){this.linkedElements[0]=e}},{key:"lowerErrorBar",get:function(){return this.linkedElements[1]},set:function(e){this.linkedElements[1]=e}}]),e}();function I(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return M(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return M(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0,a=function(){};return{s:a,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,r=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw r}}}}function M(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var N=function(e){return e[e.LINEAR=0]="LINEAR",e[e.CATEGORICAL=1]="CATEGORICAL",e}({}),B=function(e){return e[e.X=0]="X",e[e.Y=1]="Y",e}({}),A=function(e){function t(e,n,i){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,L.AXIS,e)))._interpolation=void 0,a._direction=void 0,a.ticks=void 0,a._interpolation=n,a._direction=i,a.ticks=[],a}return Object(h.a)(t,e),Object(l.a)(t,[{key:"clone",value:function(){var e=new t(this.name,this._interpolation,this._direction);e.copy(this,null,null),e.ticks=[];var n,i=I(this.ticks);try{for(i.s();!(n=i.n()).done;){var a=n.value;e.ticks.push({pixel:a.pixel,value:a.value})}}catch(r){i.e(r)}finally{i.f()}return e}},{key:"isHorizontal",value:function(){return this._direction===B.X}},{key:"isVertical",value:function(){return this._direction===B.Y}},{key:"addTickValue",value:function(e,t){this.ticks.push({value:e,pixel:t}),!this.isCategorical()&&isNaN(e)&&(this._interpolation=N.CATEGORICAL),this.ticks=this.ticks.sort(function(e,t){return e.pixel-t.pixel})}},{key:"pixelToTick",value:function(e){if(0===this.ticks.length)return e;if(this._interpolation===N.LINEAR&&this.ticks.length>1){var t=this.ticks[0],n=this.ticks[this.ticks.length-1],i=parseFloat(t.value),a=parseFloat(n.value);return S.project(e,t.pixel,n.pixel,i,a)}if(this._interpolation===N.CATEGORICAL&&this.ticks.length>1){for(var r=this.ticks[0],o=1;o<this.ticks.length;++o){var s=this.ticks[o];Math.abs(s.pixel-e)<Math.abs(r.pixel-e)&&(r=s)}return r.value}return this.ticks.length>0?this.ticks[0].value:"0"}},{key:"tickToPixel",value:function(e){if(0===this.ticks.length)return parseFloat(e);if(this._interpolation===N.LINEAR&&this.ticks.length>1){var t=this.ticks[0],n=this.ticks[this.ticks.length-1],i=parseFloat(t.value),a=parseFloat(n.value),r=parseFloat(e);return S.project(r,i,a,t.pixel,n.pixel)}if(this._interpolation===N.CATEGORICAL&&this.ticks.length>1){var o,s=I(this.ticks);try{for(s.s();!(o=s.n()).done;){var l=o.value;if(l.value===e)return l.pixel}}catch(c){s.e(c)}finally{s.f()}return this.ticks[0].pixel}return 0}},{key:"getTicks",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(null===e){var t,n=[],i=I(this.ticks);try{for(i.s();!(t=i.n()).done;){var a=t.value;n.push(new w(a.pixel,this))}}catch(u){i.e(u)}finally{i.f()}return n}if(0===this.ticks.length||e<=0)return[];for(var r=[],o=this.ticks[0].pixel,s=this.ticks[this.ticks.length-1].pixel,l=e<=1?0:(s-o)/(e-1),c=0;c<e;++c)r.push(new w(o+l*c,this));return r}},{key:"isCategorical",value:function(){return this._interpolation===N.CATEGORICAL}},{key:"getInterpolationName",value:function(){var e=N[this._interpolation].toLowerCase().replace("_"," ");return e.length>0&&(e=e[0].toUpperCase()+e.substr(1,e.length)),e}},{key:"clear",value:function(){this.ticks=[],this.shapes=[],this._interpolation=N.LINEAR}}]),t}(O),R=function(e){function t(e,n,i){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e,i)))._serie=void 0,a._serie=n,a}return Object(h.a)(t,e),Object(l.a)(t,[{key:"clone",value:function(e,n){var i=new t(this._type,this._serie,this.name);return i.copy(this,e,n),i}},{key:"getMainColor",value:function(){return this._serie.getMainColor()}},{key:"getMainSerie",value:function(){return this._serie}},{key:"canHaveErrorBars",value:function(){return!1}}]),t}(O),D=function(){function e(){Object(s.a)(this,e),this.name=void 0,this.axisX=void 0,this.axisY=void 0,this.series=void 0,this.name="Chart Title",this.axisX=new A("Horizontal (X) Axis",N.LINEAR,B.X),this.axisY=new A("Vertical (Y) Axis",N.LINEAR,B.Y),this.series=[]}return Object(l.a)(e,[{key:"clone",value:function(){var t=new e;t.axisX=this.axisX.clone(),t.axisY=this.axisY.clone(),t.name=this.name;for(var n=[],i=0;i<this.series.length;++i){var a=this.series[i],r=a.clone(t.axisX,t.axisY);n.push(a),t.series.push(r)}for(i=0;i<t.series.length;++i){for(var o=0;o<n[i].linkedElements.length;++o){var s=n[i].linkedElements[o];if(null!==s){var l=n.indexOf(s);t.series[i].linkedElements[o]=t.series[l]}}if(t.series[i]instanceof R){var c=n[i]._serie;t.series[i]._serie=t.series[n.indexOf(c)]}}return t}}]),e}(),F=function(){function e(){Object(s.a)(this,e),this.rect=void 0,this.shapesIdx=void 0,this.isDragged=void 0,this.rect=null,this.shapesIdx=[],this.isDragged=!1}return Object(l.a)(e,[{key:"clone",value:function(){var t=new e;return t.rect={x:this.rect.x,y:this.rect.y,width:this.rect.width,height:this.rect.height},t.shapesIdx=[].concat(this.shapesIdx),t}},{key:"isHidden",value:function(){return null===this.rect}},{key:"clear",value:function(){this.rect=null,this.isDragged=!1,this.shapesIdx=[]}}]),e}(),V=function(){function e(){Object(s.a)(this,e)}return Object(l.a)(e,null,[{key:"_createSnackDiv",value:function(){var e=document.createElement("div");return e.className="snackbar show",e}},{key:"_addSnackDiv",value:function(e){var t=document.getElementById("snackbar-container");t.append(e),setTimeout(function(){t.removeChild(e)},4e3)}},{key:"addMessage",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=this._createSnackDiv();if(null!==t&&(i.style.backgroundColor=t),null!==n){var a=document.createElement("div"),r=document.createElement("img");r.src=n,a.append(r),i.append(a)}i.append(e),this._addSnackDiv(i)}},{key:"addWarningMessage",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.addMessage(e,"rgb(185, 62, 65)",t)}},{key:"addInfoMessage",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.addMessage(e,null,t)}}]),e}(),j=function(){function e(t,n,i,a){Object(s.a)(this,e),this.sx=void 0,this.sy=void 0,this.ex=void 0,this.ey=void 0,this.sx=t,this.sy=n,this.ex=t+i,this.ey=n+a}return Object(l.a)(e,[{key:"add",value:function(e){this.sx=Math.min(this.sx,e.sx),this.sy=Math.min(this.sy,e.sy),this.ex=Math.max(this.ex,e.ex),this.ey=Math.max(this.ey,e.ey)}},{key:"clone",value:function(){return new e(this.x,this.y,this.width,this.height)}},{key:"x",get:function(){return this.sx},set:function(e){var t=this.width;this.sx=e,this.ex=e+t}},{key:"y",get:function(){return this.sy},set:function(e){var t=this.height;this.sy=e,this.ey=e+t}},{key:"width",get:function(){return this.ex-this.sx}},{key:"height",get:function(){return this.ey-this.sy}}]),e}(),U=n(44),H=n.n(U);function z(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return W(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return W(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0,a=function(){};return{s:a,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,r=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw r}}}}function W(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var G=function(){function e(){Object(s.a)(this,e)}return Object(l.a)(e,null,[{key:"getTextsFromShapes",value:function(t){return new Promise(function(n,i){var a=e.getTextsFromTextShapes(t);null===a?e.parseRenderedText(t).then(function(t){t.length>0&&n(e._chunksToLines(t))}):n(a)})}},{key:"getTextsFromTextShapes",value:function(t){for(var n=[],i=0;i<t.length;++i)if(void 0!==t[i].text){var a=t[i];n.push(new X(a))}return 0===n.length?null:e._chunksToLines(n)}},{key:"_chunksToLines",value:function(e){e=e.sort(function(e,t){return e.alignedRect.x-t.alignedRect.x});for(var t=[new q(e[0])],n=1;n<e.length;++n){for(var i=e[n],a=null,r=0;r<t.length;++r)if(t[r].isOnLine(i)){a=t[r];break}null===a?(a=new q(i),t.push(a)):a.addTextChunk(i)}t=t.sort(function(e,t){return e.alignedRect.y-t.alignedRect.y});var o=[];return t.forEach(function(e){o.push(e.getWords())}),o}},{key:"parseRenderedText",value:function(e){if(e.length>0){var t,n=new j(e[0].rect.x,e[0].rect.y,e[0].rect.width,e[0].rect.height),i=z(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;n.add(new j(a.rect.x,a.rect.y,a.rect.width,a.rect.height))}}catch(c){i.e(c)}finally{i.f()}var r=document.createElement("canvas");r.width=n.width,r.height=n.height;var o=r.getContext("2d");o.translate(-n.x,-n.y);var s,l=z(e);try{for(l.s();!(s=l.n()).done;){s.value.draw(o)}}catch(c){l.e(c)}finally{l.f()}return o.translate(n.x,n.y),new Promise(function(e,t){H.a.recognize(r,"eng",{}).then(function(t){var i,a=[],r=z(t.data.symbols);try{for(r.s();!(i=r.n()).done;){var o=i.value,s=new X(null,o.text,new j(o.bbox.x0+n.x,o.bbox.y0+n.y,o.bbox.x1-o.bbox.x0,o.bbox.y1-o.bbox.y0));a.push(s)}}catch(c){r.e(c)}finally{r.f()}e(a)})})}}},{key:"getTextFromShapes",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:" ",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"\n";return new Promise(function(a,r){e.getTextsFromShapes(t).then(function(e){a(e.map(function(e){return e.map(function(e){return e.text}).join(n)}).join(i))})})}}]),e}(),X=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;Object(s.a)(this,e),this.text=void 0,this.rect=void 0,this.alignedRect=void 0,t?(this.text=t.unicode,this.rect=new j(t.rect.x,t.rect.y,t.rect.width,t.rect.height),this.alignedRect=this.getAlignedBounds(t)):(this.text=n,this.alignedRect=this.rect=i)}return Object(l.a)(e,[{key:"getLetterWidth",value:function(){return this.alignedRect.width/this.text.length}},{key:"extractAngle",value:function(e){var t=e.transformPos(0,0),n=e.transformPos(1,0),i=n.x-t.x,a=n.y-t.y;return Math.atan2(a,i)}},{key:"getAlignedBounds",value:function(e){var t=e.rect,n=this.extractAngle(e);if(0===n)return new j(t.x,t.y,t.width,t.height);var i=new DOMMatrix;i=i.rotateSelf(-n*(180/Math.PI));var a=new DOMPoint(t.x,t.y),r=new DOMPoint(t.x+t.width,t.y+t.height),o=a.matrixTransform(i),s=r.matrixTransform(i),l=Math.min(o.x,s.x),c=Math.min(o.y,s.y),u=Math.abs(o.x-s.x),h=Math.abs(o.y-s.y);return new j(l,c,u,h)}},{key:"add",value:function(e){this.text+=e.text,this.alignedRect.add(e.alignedRect),this.rect.add(e.rect)}}]),e}(),q=function(){function e(t){Object(s.a)(this,e),this.textChunks=void 0,this.alignedRect=void 0,this._totalAvgLetterWidth=void 0,this.textChunks=[t],this.alignedRect=t.alignedRect.clone(),this._totalAvgLetterWidth=t.getLetterWidth()}return Object(l.a)(e,[{key:"addTextChunk",value:function(e){this.textChunks.push(e),this.alignedRect.add(e.alignedRect),this._totalAvgLetterWidth+=e.getLetterWidth()}},{key:"isOnLine",value:function(e){var t=e.alignedRect.sy,n=e.alignedRect.ey,i=this.alignedRect.sy,a=this.alignedRect.ey;return 0!==Math.max(0,Math.min(n,a)-Math.max(t,i))}},{key:"getWords",value:function(){for(var e=this._totalAvgLetterWidth/this.textChunks.length,t=[this.textChunks[0]],n=1;n<this.textChunks.length;++n){var i=this.textChunks[n],a=t[t.length-1];i.alignedRect.sx-a.alignedRect.ex>=e?t.push(i):a.add(i)}return t}}]),e}();function Y(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return K(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return K(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0,a=function(){};return{s:a,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,r=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw r}}}}function K(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var Z=function(){function e(t){Object(s.a)(this,e),this.axis=void 0,this.axis=t}return Object(l.a)(e,[{key:"getAccurateTickPos",value:function(e,t){var n,i=Y(t);try{for(i.s();!(n=i.n()).done;){var a,r=n.value,o=Y(C.splitIntoSubShapes(r));try{for(o.s();!(a=o.n()).done;){var s=a.value;if(void 0===s.text&&s.path.length<=3){var l=e.rect.y-(s.rect.y+s.rect.height);if(this.axis.isVertical()&&(l=s.rect.x-(e.rect.x+e.rect.width)),l<0||l>4*e.rect.width)continue;var c=e.rect.x,u=e.rect.x+e.rect.width,h=s.rect.x,d=s.rect.x+s.rect.width;this.axis.isVertical()&&(c=e.rect.y,u=e.rect.y+e.rect.height,h=s.rect.y,d=s.rect.y+s.rect.height);var p=h+(d-h)/2;if(p>c&&p<u)return p}}}catch(f){o.e(f)}finally{o.f()}}}catch(f){i.e(f)}finally{i.f()}return this.axis.isVertical()?e.rect.y+e.rect.height/2:e.rect.x+e.rect.width/2}},{key:"cleanTickLabel",value:function(e){return e.replace("\u2212","-")}},{key:"isNumber",value:function(e){return!isNaN(e)}},{key:"onShapesSelected",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];G.getTextsFromShapes(e).then(function(i){if(null!==i){for(var a=[],r=[],o=0;o<i.length;++o)for(var s=0;s<i[o].length;++s){var l=i[o][s],c=t.getAccurateTickPos(l,n),u=t.cleanTickLabel(l.text);u.trim().length>0&&(t.isNumber(u)?a.push({label:u,position:c}):r.push({label:u,position:c}))}var h=[];r.length>0&&a.length/(a.length+r.length)>.5?(h=h.concat(a),V.addWarningMessage("Tick(s) '"+r.map(function(e){return e.label}).join(", ")+"' could not be parsed as numbers and were excluded from the selection.")):h=(h=h.concat(a)).concat(r);var d,p=Y(h);try{for(p.s();!(d=p.n()).done;){var f=d.value;t.axis.addTickValue(f.label,f.position)}}catch(v){p.e(v)}finally{p.f()}t.axis.shapes=t.axis.shapes.concat(e)}else alert("No text found in selection")})}},{key:"element",get:function(){return this.axis}}]),e}(),Q=function(){function e(){Object(s.a)(this,e),this.undoHistory=void 0,this.redoHistory=void 0,this.dataTable=void 0,this.undoHistory=[],this.redoHistory=[]}return Object(l.a)(e,[{key:"clearMemory",value:function(){this.undoHistory=[],this.redoHistory=[]}},{key:"canUndo",value:function(){return this.undoHistory.length>0}},{key:"undo",value:function(){if(this.canUndo()){V.addInfoMessage("Undo");var e=this.undoHistory.pop();return this.redoHistory.push(this.cloneState()),e}}},{key:"canRedo",value:function(){return this.redoHistory.length>0}},{key:"redo",value:function(){if(this.canRedo()){V.addInfoMessage("Redo");var e=this.redoHistory.pop();return this.undoHistory.push(this.cloneState()),e}}},{key:"addUndoRestorePoint",value:function(){this.undoHistory.push(this.cloneState()),this.redoHistory=[]}},{key:"cloneState",value:function(){return this.dataTable.clone()}}],[{key:"get",value:function(){return null===e._instance&&(e._instance=new e),e._instance}}]),e}();function $(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return J(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return J(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0,a=function(){};return{s:a,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,r=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw r}}}}function J(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}Q._instance=null;var ee=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).dragOffset=void 0,n.mouseIntialPos=void 0,n.scale=void 0,n.translate=void 0,n.globalMouseMoveListener=void 0,n.globalMouseUpListener=void 0,n.isVisible=void 0,n.dragOffset={x:0,y:0},n.mouseIntialPos={x:0,y:0},n.scale={x:1,y:1},n.translate={x:0,y:0},n.isVisible=!0,n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"onMouseDown",value:function(e){0===e.button&&(this.getSelection().isDragged=!0,this.props.setState({shapeSelection:this.getSelection()}),this.mouseIntialPos={x:e.clientX,y:e.clientY},e.preventDefault())}},{key:"getX",value:function(){var e=this.getSelection().rect;return null===e?0:e.x*this.scale.x+this.translate.x-this.dragOffset.x}},{key:"getY",value:function(){var e=this.getSelection().rect;return null===e?0:e.y*this.scale.y+this.translate.y-this.dragOffset.y}},{key:"updateSelectionPosition",value:function(){var e=document.getElementById("draggableSelection");null!==e&&(e.style.left=this.getX()+"px",e.style.top=this.getY()+"px")}},{key:"onGlobalMouseMove",value:function(e){this.getSelection().isDragged&&(this.dragOffset={x:this.mouseIntialPos.x-e.clientX,y:this.mouseIntialPos.y-e.clientY},this.updateSelectionPosition(),e.preventDefault())}},{key:"onGlobalMouseUp",value:function(e){0===e.button&&(this.dragOffset={x:0,y:0},this.updateSelectionPosition(),this.getSelection().isDragged&&(this.getSelection().isDragged=!1,this.props.setState({shapeSelection:this.getSelection()}),this.forceUpdate(),e.preventDefault()))}},{key:"getShapesBBox",value:function(e){if(0===e.length)return null;for(var t=this.props.state.filteredShapes,n=t[e[0]].rect,i={sx:n.x,sy:n.y,ex:n.x+n.width,ey:n.y+n.height},a=1;a<e.length;++a){var r=t[e[a]];i.sx=Math.min(i.sx,r.rect.x),i.sy=Math.min(i.sy,r.rect.y),i.ex=Math.max(i.ex,r.rect.x+r.rect.width),i.ey=Math.max(i.ey,r.rect.y+r.rect.height)}return{x:i.sx,y:i.sy,width:i.ex-i.sx,height:i.ey-i.sy}}},{key:"getSelection",value:function(){return this.props.state.shapeSelection}},{key:"updateSelectionRect",value:function(){var e=this.getShapesBBox(this.getSelection().shapesIdx);e={x:e.x-2,y:e.y-2,width:e.width+4,height:e.height+4},this.getSelection().rect=e,this.props.setState({shapeSelection:this.getSelection()})}},{key:"addShapesIdx",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=$(e);try{for(i.s();!(t=i.n()).done;){var a=t.value,r=this.getSelection().shapesIdx.indexOf(a);r>-1?n&&this.getSelection().shapesIdx.splice(r,1):this.getSelection().shapesIdx.push(a)}}catch(o){i.e(o)}finally{i.f()}this.updateSelectionRect()}},{key:"hide",value:function(){var e=document.getElementById("draggableSelection");null!==e&&(e.style.display="none",this.isVisible=!1)}},{key:"show",value:function(){var e=document.getElementById("draggableSelection");null!==e&&(e.style.display="block",this.isVisible=!0)}},{key:"redraw",value:function(){var e=document.getElementById("draggableSelection");if(null!==e){var t=e.getContext("2d");if(t.clearRect(0,0,e.width,e.height),this.getSelection().isDragged){var n=this.props.state.filteredShapes,i=this.getSelection().rect;t.save(),t.scale(this.scale.x,this.scale.y),t.translate(-i.x,-i.y);for(var a=0;a<this.getSelection().shapesIdx.length;++a){var r=n[this.getSelection().shapesIdx[a]],o=r.globalAlpha;r.globalAlpha=.4,r.draw(t),r.globalAlpha=o}t.restore()}}}},{key:"clearShapes",value:function(){this.getSelection().clear(),this.props.setState({shapeSelection:this.getSelection()})}},{key:"componentDidMount",value:function(){this.globalMouseMoveListener=this.onGlobalMouseMove.bind(this),document.addEventListener("mousemove",this.globalMouseMoveListener),this.globalMouseUpListener=this.onGlobalMouseUp.bind(this),document.addEventListener("mouseup",this.globalMouseUpListener),this.redraw()}},{key:"componentDidUpdate",value:function(){this.redraw()}},{key:"render",value:function(){var e=this.getSelection().rect,t=null,n=!1;if(null!==e){var i="grab";this.getSelection().isDragged&&(i="grabbing",n=!0),t=a.a.createElement("canvas",{id:"draggableSelection",onMouseDown:this.onMouseDown.bind(this),width:e.width*this.scale.x,height:e.height*this.scale.y,style:{position:"absolute",left:this.getX(),top:this.getY(),display:this.isVisible?"block":"none",border:"1px solid rgba(81, 131, 251)",backgroundColor:"rgba(0, 0, 0, 0)",pointerEvents:n?"none":"all",cursor:i}})}return t}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousemove",this.globalMouseMoveListener),document.removeEventListener("mouseup",this.globalMouseUpListener)}}]),t}(a.a.Component),te=n(8),ne=n(21),ie=n(29),ae=0,re=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).data=void 0,n.title=void 0,n.id=void 0,n.floatingHeader=void 0,n.floatingFooter=void 0,n.colWidths=void 0,n.maxHeight=void 0,n.maxWidth=void 0,n.minWidth=void 0,n.columnWidth=void 0,n.rowHeight=void 0,n.cellSelectedListener=void 0,n.cellEditedListener=void 0,n.cachedTable=void 0,n.lastRowCount=void 0,n.lastColCount=void 0,n.stickyGrid=void 0,n.mainGrid=void 0,n.hasHorizontalScrollbar=void 0,n.hasVerticalScrollbar=void 0,n.data=[],n.title=null,n.id="table"+ae++,n.floatingHeader=null,n.floatingFooter=null,n.colWidths=[],n.columnWidth=50,n.rowHeight=22,n.maxHeight=6*n.rowHeight+1,n.maxWidth=-1,n.minWidth=50,n.cellSelectedListener=null,n.cellEditedListener=null,n.cachedTable=null,n.lastRowCount=0,n.lastColCount=0,n.stickyGrid=a.a.createRef(),n.mainGrid=a.a.createRef(),n.hasHorizontalScrollbar=!1,n.hasVerticalScrollbar=!1,n.state={selection:null,editedCell:null,gridWidth:200,gridHeight:n.rowHeight},n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"getData",value:function(){return this.data}},{key:"getTitle",value:function(){return this.title}},{key:"getFloatingFooter",value:function(){return this.floatingFooter}},{key:"getFloatingHeader",value:function(){return this.floatingHeader}},{key:"updateDataTableSize",value:function(){var e=document.getElementById(this.id);if(null!==e){var t=0,n=0;if(null!==this.mainGrid.current){var i=this.mainGrid.current._outerRef;t=i.offsetWidth-i.clientWidth,n=i.offsetHeight-i.clientHeight}this.hasHorizontalScrollbar=n>0,this.hasVerticalScrollbar=t>0,this.setState({gridWidth:e.clientWidth,gridHeight:Math.min(this.getHeight()+n,this.maxHeight)})}}},{key:"componentDidUpdate",value:function(){this.updateDataTableSize()}},{key:"componentDidMount",value:function(){this.updateDataTableSize()}},{key:"getColWidth",value:function(e){return e<this.colWidths.length?this.colWidths[e]:this.columnWidth}},{key:"getCellRect",value:function(e,t){for(var n=this.rowHeight,i=n*t,a=0,r=0;r<e;++r)a+=this.getColWidth(r);return new j(a,i,this.getColWidth(e),n)}},{key:"isCellSelectable",value:function(e,t){return!0}},{key:"isCellEditable",value:function(e,t){return!0}},{key:"onCellClicked",value:function(e,t,n){if(null!==this.state.editedCell&&this.onEditingComplete(),e.stopPropagation(),e.preventDefault(),this.isCellEditable(t,n)){var i=document.getElementById(this.id+"_editionCell");if(null!==i){var a="",r=this.getData();n<r.length&&t<r[n].length&&(a=r[n][t]),i.value=a,i.focus()}this.setState({editedCell:{startRow:n,startCol:t,endRow:n,endCol:t}})}}},{key:"onEditingComplete",value:function(){if(!(arguments.length>0&&void 0!==arguments[0]&&arguments[0])&&null!==this.state.editedCell){this.cachedTable=null;var e=document.getElementById(this.id+"_editionCell");null!==this.cellEditedListener&&this.cellEditedListener.call(this,this.state.editedCell.startCol,this.state.editedCell.startRow,e.value)}this.setState({editedCell:null})}},{key:"onCellHovered",value:function(e,t,n){this.isCellSelectable(t,n)&&!this.props.state.shapeSelection.isDragged?null!==this.state.selection&&t==this.state.selection.startCol&&n==this.state.selection.startRow||(this.setState({selection:{startRow:n,startCol:t,endRow:n,endCol:t}}),null!==this.cellSelectedListener&&this.cellSelectedListener.call(this,t,n)):this.onCellUnhovered()}},{key:"onCellUnhovered",value:function(){this.setState({selection:null}),null!==this.cellSelectedListener&&this.cellSelectedListener.call(this,-1,-1)}},{key:"getColCount",value:function(){var e=0;return this.getData().length>0&&(e=this.getData()[0].length),e}},{key:"getRowCount",value:function(){return this.getData().length}},{key:"getWidth",value:function(){for(var e=0,t=this.getColCount(),n=0;n<t;++n)e+=this.getColWidth(n);return Math.max(this.minWidth,Math.min(e+1,this.maxWidth<=0?99999999:this.maxWidth))}},{key:"getHeight",value:function(){var e=this.getRowCount();return Math.min(this.rowHeight*e+1,this.maxHeight)}},{key:"getFloatingHeaderHTML",value:function(){return a.a.createElement("div",{style:{left:"50%",width:"100%",top:"50%",transform:"translate(-50%, -50%)",position:"absolute"}},this.getFloatingHeader())}},{key:"getFloatingFooterHTML",value:function(){return a.a.createElement("div",{style:{left:"50%",width:"100%",top:"50%",transform:"translate(-50%, -50%)",position:"absolute"}},this.getFloatingFooter())}},{key:"onMainGridScrolled",value:function(e,t){null===this.stickyGrid.current||t||this.stickyGrid.current.scrollTo({scrollLeft:e.scrollLeft,scrollTop:e.scrollTop})}},{key:"scrollToRow",value:function(e){null!==this.mainGrid.current&&this.hasVerticalScrollbar&&this.mainGrid.current.scrollToItem({align:"end",rowIndex:e})}},{key:"getCellStyle",value:function(e,t){return{backgroundColor:"#ffffff"}}},{key:"getColumnStickyCount",value:function(){return 0}},{key:"getColumnStickyWidth",value:function(){return 0}},{key:"getColumnStickyHTML",value:function(){return null}},{key:"getGridOverlay",value:function(){var e=this,t=null;if(null!==this.state&&null!==this.state.selection){var n=this.state.selection;(t=this.getCellRect(n.startCol,n.startRow)).add(this.getCellRect(n.endCol,n.endRow))}var r={x:-200,y:-200,width:0,height:0};return null!==this.state&&null!==this.state.editedCell&&(r=this.getCellRect(this.state.editedCell.startCol,this.state.editedCell.startRow)),a.a.createElement(i.Fragment,null,null!==t&&a.a.createElement("div",{style:{position:"absolute",top:t.y+1,left:t.x+1,width:t.width-1,height:t.height-1,border:"2px solid rgb(79, 140, 252)",boxSizing:"border-box",pointerEvents:"none"}}),a.a.createElement("input",{type:"text",id:this.id+"_editionCell",onBlur:function(t){return e.onEditingComplete()},onKeyDown:function(t){"Enter"===t.key&&e.onEditingComplete(),"Escape"===t.key&&e.onEditingComplete(!0)},style:{position:"absolute",top:r.y+1,left:r.x+1,width:r.width-1,height:r.height-1,border:"2px solid rgb(79, 140, 252)",boxSizing:"border-box"}}))}},{key:"getTableHTML",value:function(){var e=this,t=(this.getHeight(),this),n=function(n){var i=n.columnIndex,r=n.rowIndex,o=n.style;return a.a.createElement("div",{className:"tableCell "+(i%2===0?"evenCol ":"oddCol ")+(r%2===0?"evenRow ":"oddRow ")+(0===r?"firstRow ":"")+(0===i?"firstCol ":"")+(r===e.getRowCount()-1?"lastRow ":"")+(i===e.getColCount()-1?"lastCol ":""),style:Object(ne.a)({},o,e.getCellStyle(i,r),{width:e.getColWidth(i),pointerEvents:"auto",cursor:"default"}),onMouseOver:e.props.state.shapeSelection.isDragged?null:function(t){return e.onCellHovered(t,i,r)},onMouseDown:function(t){return e.onCellClicked(t,i,r)}},t.data[r][i])};return a.a.createElement("div",{id:this.id,style:{position:"relative",display:"flex",flexDirection:"row",width:"100%"},onMouseLeave:function(t){return e.onCellUnhovered()}},this.getColumnStickyCount()>0&&a.a.createElement(ie.a,{ref:this.stickyGrid,style:{overflowX:this.hasHorizontalScrollbar?"scroll":"hidden",overflowY:"hidden",minWidth:this.getColumnStickyWidth()},columnCount:this.getColumnStickyCount(),columnWidth:function(t){return e.getColumnStickyWidth()/e.getColumnStickyCount()},height:this.state.gridHeight,rowCount:this.getRowCount(),rowHeight:function(t){return e.rowHeight},width:this.getColumnStickyWidth()},this.getColumnStickyHTML()),a.a.createElement(ie.a,{onScroll:this.onMainGridScrolled.bind(this),style:{},ref:this.mainGrid,columnCount:this.getColCount(),columnWidth:function(e){return t.getColWidth(e)},height:this.state.gridHeight,rowCount:this.getRowCount(),rowHeight:function(t){return e.rowHeight},width:this.state.gridWidth},n))}},{key:"render",value:function(){var e=this.getWidth();return this.data=this.getData(),a.a.createElement("div",{style:{position:"relative"}},null!==this.getFloatingHeader()&&a.a.createElement("div",{className:"tableFloatingHeader",style:{width:"100%",height:this.rowHeight+1}},this.getFloatingHeaderHTML()),this.getTableHTML(),null!==this.mainGrid.current&&o.a.createPortal(this.getGridOverlay(),this.mainGrid.current._outerRef),null!==this.getFloatingFooter()&&a.a.createElement("div",{className:"tableFloatingFooter",id:this.id+"_footer",style:{width:e-2,height:this.rowHeight}},this.getFloatingFooterHTML()),this.props.children)}}]),t}(a.a.PureComponent),oe=function(e){return e[e.RECOMMENDED=0]="RECOMMENDED",e[e.NEUTRAL=1]="NEUTRAL",e[e.DISABLED=2]="DISABLED",e}({}),se={TextOnly:function(e){return e.some(function(e){return void 0!==e.unicode})},TextOrShape:function(e){return e.length>0},ShapeOnly:function(e){return e.every(function(e){return void 0===e.unicode})}},le=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).dropCount=void 0,n.dropCount=0,n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"getSelectedShapes",value:function(){for(var e=[],t=this.props.state.shapeSelection.shapesIdx,n=0;n<t.length;++n)e.push(this.props.state.filteredShapes[t[n]]);return e}},{key:"getDropZoneState",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;void 0===e&&this.getSelectedShapes();return this.isSelectionValid(e)?void 0!==this.props.recommendedDropCount&&this.dropCount>=this.props.recommendedDropCount?oe.NEUTRAL:oe.RECOMMENDED:oe.DISABLED}},{key:"onMouseUp",value:function(e){var t=this.props.state.shapeSelection;if(t.isDragged){var n=this.getSelectedShapes();this.isSelectionValid(n)?this.props.onShapesDropped(n)?(this.dropCount+=1,t.clear(),this.props.setState({shapeSelection:t})):V.addWarningMessage("The selection could not be processed."):V.addWarningMessage(this.getSelectionInvalidReason())}}},{key:"getSelectionInvalidReason",value:function(){return this.props.isSelectionAccepted===se.ShapeOnly?"The selection contains textual elements. You cannot drop textual elements in this dropzone.":this.props.isSelectionAccepted===se.TextOnly?"The selection does not contain any textual element. This dropzone only accepts textual elements.":"You cannot drop these elements in this dropzone."}},{key:"isSelectionValid",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;return void 0===this.props.isSelectionAccepted||this.props.isSelectionAccepted(void 0===e?this.getSelectedShapes():e)}},{key:"render",value:function(){if(!this.props.state.shapeSelection.isDragged)return null;var e="dropZone",t=this.getDropZoneState();return t===oe.DISABLED&&(e+=" disabledDropZone"),t===oe.NEUTRAL&&(e+=" neutralDropZone"),a.a.createElement("div",{className:e,onMouseUp:this.onMouseUp.bind(this),style:this.props.style},a.a.createElement("div",{className:"dropZoneLabel"},this.props.text))}}]),t}(a.a.Component),ce=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).cellSelectedListener=n.onCellSelectedCallback.bind(Object(d.a)(Object(d.a)(n))),n.cellEditedListener=n.onCellEditedCallback.bind(Object(d.a)(Object(d.a)(n))),n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"getData",value:function(){for(var e=[["Value"],["Pixel"]],t=0;t<this.props.axis.ticks.length;++t){var n=this.props.axis.ticks[t];e[1].push(n.pixel),e[0].push(n.value)}for(;e[0].length<=2;)e[0].push(""),e[1].push("");return e}},{key:"isCellSelectable",value:function(e,t){return e>0}},{key:"isCellEditable",value:function(e,t){return e>0}},{key:"getHeaders",value:function(){return null}},{key:"getFloatingHeader",value:function(){return this.props.axis.name}},{key:"onShapesDroppedOnTicks",value:function(e){var t=new Z(this.props.axis);return Q.get().addUndoRestorePoint(),t.onShapesSelected(e,this.props.shapes),this.cachedTable=null,!0}},{key:"updateDatatable",value:function(){this.props.setState({dataTable:this.props.state.dataTable})}},{key:"onShapesDroppedOnTitle",value:function(e){var t=this;return G.getTextFromShapes(e).then(function(e){null===e&&alert("No text found in selection"),Q.get().addUndoRestorePoint(),t.props.axis.name=e,t.updateDatatable()}),!0}},{key:"onClearButton",value:function(e){Q.get().addUndoRestorePoint(),this.props.axis.clear(),this.cachedTable=null,this.updateDatatable()}},{key:"onInterpolationButton",value:function(e){Q.get().addUndoRestorePoint(),this.props.axis._interpolation=this.props.axis.isCategorical()?N.LINEAR:N.CATEGORICAL,this.updateDatatable()}},{key:"getFloatingHeaderHTML",value:function(){return a.a.createElement("div",{style:{width:"100%",height:"100%",position:"relative"}},a.a.createElement("div",{style:{left:"0%",width:"90%",top:"50%",transform:"translate(0%, -50%)",position:"absolute"}},this.getFloatingHeader()),a.a.createElement("div",{style:{right:1,top:"50%",transform:"translate(0%, -50%)",position:"absolute"}},a.a.createElement("button",{style:{marginRight:3},className:"button small gray tooltip",onClick:this.onInterpolationButton.bind(this)},this.props.axis.getInterpolationName()),a.a.createElement("button",{className:"button small gray tooltip",onClick:this.onClearButton.bind(this)},a.a.createElement("i",{className:"fa fa-trash","aria-hidden":"true"}))),a.a.createElement(le,{isSelectionAccepted:se.TextOnly,recommendedDropCount:1,state:this.props.state,setState:this.props.setState,style:{width:"100%",height:"100%",position:"absolute",top:0,left:0},text:"",onShapesDropped:this.onShapesDroppedOnTitle.bind(this)}))}},{key:"onCellSelectedCallback",value:function(e,t){if(this.props.state.overlay.clear(),this.props.state.overlay.type=p.VERTICAL_GRIDLINE,e>=1&&e-1<this.props.axis.ticks.length){var n=this.props.axis.ticks[e-1],i=new w(n.pixel,this.props.axis),a=new w(0,this.props.axis);this.props.axis.isHorizontal()?this.props.state.overlay.points.push(new _(i,a)):(this.props.state.overlay.type=p.HORIZONTAL_GRIDLINE,this.props.state.overlay.points.push(new _(a,i)))}this.updateDatatable()}},{key:"onCellEditedCallback",value:function(e,t,n){if(e>=1)if(Q.get().addUndoRestorePoint(),e>this.props.axis.ticks.length)this.props.axis.addTickValue(n,parseFloat(n));else{var i=this.props.axis.ticks[e-1];0==t?i.value=n:i.pixel=parseFloat(n)}}},{key:"getCellStyle",value:function(e,n){return 0===e?{backgroundColor:"#f0f0f0",textAlign:"center"}:Object(te.a)(Object(u.a)(t.prototype),"getCellStyle",this).call(this,e,n)}},{key:"getGridOverlay",value:function(){return this.cachedTable=null,a.a.createElement(i.Fragment,null,Object(te.a)(Object(u.a)(t.prototype),"getGridOverlay",this).call(this),a.a.createElement(le,{recommendedDropCount:1,isSelectionAccepted:se.TextOrShape,state:this.props.state,setState:this.props.setState,style:{width:this.getWidth()-2,height:42,position:"absolute",top:0,left:0},text:"",onShapesDropped:this.onShapesDroppedOnTicks.bind(this)}))}}]),t}(re),ue=function(e){return e[e.UPPER=0]="UPPER",e[e.LOWER=1]="LOWER",e}({}),he=function(e){function t(e,n){var i;return Object(s.a)(this,t),(i=Object(c.a)(this,Object(u.a)(t).call(this,L.ERRORBAR,e,"\u21b3 Error "+(n===ue.UPPER?"\u23c9":"\u23ca"))))._bound=void 0,i._bound=n,i}return Object(h.a)(t,e),Object(l.a)(t,[{key:"clone",value:function(e,n){var i=new t(this._serie,this._bound);return i.copy(this,e,n),i}},{key:"isUpperBound",value:function(){return this._bound===ue.UPPER}},{key:"isLowerBound",value:function(){return this._bound===ue.LOWER}},{key:"data",get:function(){if(this._data.length<this._serie.data.length)for(var e=this._data.length;e<this._serie.data.length;++e)this._data.push(this._serie.data[e].clone());return this._data}}]),t}(R);function de(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return pe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return pe(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0,a=function(){};return{s:a,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,r=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw r}}}}function pe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var fe=function(){function e(t){Object(s.a)(this,e),this.element=void 0,this.element=t}return Object(l.a)(e,[{key:"onShapesSelected",value:function(e){for(var t=[],n=0;n<e.length;++n)if(void 0!==e[n].text){var i=e[n];t.push(i)}var a,r=this.element.getMainColor(),o=null,s=[],l=de(e);try{for(l.s();!(a=l.n()).done;){var c=a.value;if(!this.element.shapes.includes(c)&&c.strokeStyle===r&&void 0===c.text){if(null!==o&&c.rect.width*c.rect.height>o.rect.width*o.rect.height)continue;var u,h=[],d=de(t);try{for(d.s();!(u=d.n()).done;){var p=u.value,f=Math.abs(c.rect.y+c.rect.height/2-(p.rect.y+p.rect.height/2));p.rect.x>c.rect.x+c.rect.width&&f<p.rect.height&&h.push(p)}}catch(S){d.e(S)}finally{d.f()}if(h.length>0){var v,g=de(G.getTextsFromTextShapes(h));try{for(g.s();!(v=g.n()).done;){var m,y=v.value,b=c.rect.x+c.rect.width,w=de(y);try{for(w.s();!(m=w.n()).done;){var _=m.value;_.rect.x-b<_.rect.width/_.text.length*2&&(o!==c&&(o=c,s=[]),s.push(_.text),b=_.rect.x+_.rect.width)}}catch(S){w.e(S)}finally{w.f()}}}catch(S){g.e(S)}finally{g.f()}}}}}catch(S){l.e(S)}finally{l.f()}s.length>0&&(this.element.name=s.join(" "))}}]),e}();function ve(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return ge(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ge(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0,a=function(){};return{s:a,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,r=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw r}}}}function ge(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var me=function(){function e(t,n){Object(s.a)(this,e),this.datatable=void 0,this.element=void 0,this.datatable=t,this.element=n}return Object(l.a)(e,[{key:"onShapesSelected",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=e;1===e.length&&(e=C.splitIntoSubShapes(e[0]));var i,a=ve(e);try{for(a.s();!(i=a.n()).done;){var r=i.value,o=r.rect.x+r.rect.width/2;this.element.data.push(new _(new w(o,this.datatable.axisX),new w(r.rect.y,this.datatable.axisY)))}}catch(s){a.e(s)}finally{a.f()}(this.element.shapes=this.element.shapes.concat(n),t.length>0)&&new fe(this.element).onShapesSelected(t)}}]),e}();function ye(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return be(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return be(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0,a=function(){};return{s:a,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,r=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw r}}}}function be(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var we=function(){function e(t,n){Object(s.a)(this,e),this.datatable=void 0,this.serie=void 0,this.datatable=t,this.serie=n}return Object(l.a)(e,[{key:"groupShapesByCenterX",value:function(e){var t,n=[],i=ye(e);try{for(i.s();!(t=i.n()).done;){for(var a=t.value,r=a.rect,o=r.x+r.width/2,s=-1,l=0;l<n.length;++l){var c=n[l][0].rect,u=c.x+c.width/2;if(Math.abs(u-o)<1){s=l;break}}-1===s?n.push([a]):n[s].push(a)}}catch(h){i.e(h)}finally{i.f()}return n}},{key:"setDatapoint",value:function(e,t){var n,i=t.x.pixel,a=!1,r=ye(e.data);try{for(r.s();!(n=r.n()).done;){var o=n.value;if(Math.abs(o.x.pixel-i)<.1){o.x=t.x,o.y=t.y,a=!0;break}}}catch(s){r.e(s)}finally{r.f()}a||e.data.push(t)}},{key:"onShapesSelected",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var t=this.groupShapesByCenterX(C.splitShapesIntoSubShapes(e.concat(this.serie.shapes)));if(this.serie.linkedElements.length<=2){this.serie.linkedElements.push(new R(L.BOX_PLOT_Q3,this.serie,"\u21b3 Q3")),this.serie.linkedElements.push(new R(L.BOX_PLOT_Q1,this.serie,"\u21b3 Q1")),this.serie.linkedElements.push(new R(L.BOX_PLOT_MIN,this.serie,"\u21b3 Min")),this.serie.linkedElements.push(new R(L.BOX_PLOT_MAX,this.serie,"\u21b3 Max"));for(var n=2;n<this.serie.linkedElements.length;++n){var i=this.datatable.series.indexOf(this.serie);this.datatable.series.splice(i+1,0,this.serie.linkedElements[n])}}var a,r=this.serie.linkedElements[2],o=this.serie.linkedElements[3],s=this.serie.linkedElements[4],l=this.serie.linkedElements[5],c=ye(t);try{for(c.s();!(a=c.n()).done;){var u,h=a.value,d=[],p=h[0].rect.y,f=h[0].rect.y+h[0].rect.height,v=p,g=f,m=h[0].rect.x+h[0].rect.width/2,y=ye(h);try{for(y.s();!(u=y.n()).done;){var b=u.value;C.isLine(b)&&b.rect.width>b.rect.height&&d.push(b.rect.y+b.rect.height/2),C.isRectangle(b)&&(v=b.rect.y,g=b.rect.y+b.rect.height),p=Math.min(p,b.rect.y),f=Math.max(f,b.rect.y+b.rect.height)}}catch(P){y.e(P)}finally{y.f()}for(var S=(g+v)/2,k=0,x=d;k<x.length;k++){var E=x[k];if(E>v&&E<g){S=E;break}}this.setDatapoint(this.serie,new _(new w(m,this.datatable.axisX),new w(S,this.datatable.axisY))),this.setDatapoint(r,new _(new w(m,this.datatable.axisX),new w(g,this.datatable.axisY))),this.setDatapoint(o,new _(new w(m,this.datatable.axisX),new w(v,this.datatable.axisY))),this.setDatapoint(s,new _(new w(m,this.datatable.axisX),new w(p,this.datatable.axisY))),this.setDatapoint(l,new _(new w(m,this.datatable.axisX),new w(f,this.datatable.axisY)))}}catch(P){c.e(P)}finally{c.f()}this.serie.shapes=this.serie.shapes.concat(e)}}]),e}();function _e(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return Se(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Se(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0,a=function(){};return{s:a,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,r=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw r}}}}function Se(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var ke=function(){function e(t,n){Object(s.a)(this,e),this.datatable=void 0,this.errorBar=void 0,this.datatable=t,this.errorBar=n}return Object(l.a)(e,[{key:"onShapesSelected",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var t,n=this.errorBar._serie,i=_e(e);try{for(i.s();!(t=i.n()).done;){for(var a=t.value.rect,r=a.x+a.width/2,o=Number.MAX_VALUE,s=-1,l=0;l<n.data.length;++l){var c=n.data[l],u=Math.abs(r-c.x.pixel);u<o&&(s=l,o=u)}if(o<1){var h=n.data[s],d=Math.min(a.y,this.errorBar.data[s].y.pixel);this.errorBar.isLowerBound()&&(d=Math.max(a.y+a.height,this.errorBar.data[s].y.pixel)),this.errorBar.data[s]=new _(new w(h.x.pixel,h.x.axis),new w(d,h.y.axis))}}}catch(p){i.e(p)}finally{i.f()}C.shapesToPoints(e,this.datatable.axisX,this.datatable.axisY);this.errorBar.shapes=this.errorBar.shapes.concat(e)}}]),e}(),xe=function(){function e(t,n){Object(s.a)(this,e),this.datatable=void 0,this.element=void 0,this.datatable=t,this.element=n}return Object(l.a)(e,[{key:"onShapesSelected",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=C.shapesToPoints(e,this.datatable.axisX,this.datatable.axisY);(this.element.shapes=this.element.shapes.concat(e),this.element.data=this.element.data.concat(n),t.length>0)&&new fe(this.element).onShapesSelected(t)}}]),e}();function Ee(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return Ce(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ce(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0,a=function(){};return{s:a,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,r=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw r}}}}function Ce(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var Pe=function(){function e(t,n){Object(s.a)(this,e),this.datatable=void 0,this.element=void 0,this.datatable=t,this.element=n}return Object(l.a)(e,[{key:"onShapesSelected",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=Ee(e);try{for(i.s();!(t=i.n()).done;){var a=t.value,r=a.rect.x+a.rect.width/2,o=a.rect.y+a.rect.height/2;this.element.data.push(new _(new w(r,this.datatable.axisX),new w(o,this.datatable.axisY)))}}catch(s){i.e(s)}finally{i.f()}(this.element.shapes=this.element.shapes.concat(e),n.length>0)&&new fe(this.element).onShapesSelected(n)}}]),e}(),Te=function(){function e(){Object(s.a)(this,e)}return Object(l.a)(e,null,[{key:"getSerieExtractor",value:function(e,t){var n=null;return e.is(L.AXIS)?n=new Z(e):e.is(L.LINE)?n=new xe(t,e):e.is(L.BAR)?n=new me(t,e):e.is(L.SCATTER)?n=new Pe(t,e):e.is(L.BOX_PLOT)?n=new we(t,e):e.is(L.ERRORBAR)?n=new ke(t,e):alert("Unsupported element"),n}},{key:"chartTypeToString",value:function(e){var t=L[e].toLowerCase().replace("_"," ");return t.length>0&&(t=t[0].toUpperCase()+t.substr(1,t.length)),t}}]),e}(),Le=function(e){function t(e){return Object(s.a)(this,t),Object(c.a)(this,Object(u.a)(t).call(this,e))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"onShapesDroppedOnNewSerie",value:function(e,t){var n=Te.chartTypeToString(e)+" "+(this.props.state.dataTable.series.length+1),i=new O(e,n),a=Te.getSerieExtractor(i,this.props.state.dataTable);return null!==a&&(Q.get().addUndoRestorePoint(),this.props.state.dataTable.series.push(i),a.onShapesSelected(t,this.props.shapes),this.props.setState({dataTable:this.props.state.dataTable}),!0)}},{key:"onMouseClick",value:function(e){V.addInfoMessage("Drag chart elements (lines, bars...) and drop them in the appropriate drop zone.","animations/element_dragndrop.gif")}},{key:"render",value:function(){var e=this,t=Te.chartTypeToString(this.props.type);return a.a.createElement("div",{className:"chartElementBtn",style:{textAlign:"center"},onClick:this.onMouseClick.bind(this)},a.a.createElement("div",{style:{position:"relative"}},a.a.createElement("div",{className:"coloredRect",style:{margin:"auto",width:65,position:"relative",backgroundColor:this.props.color,borderRadius:5,border:"2px solid "+this.props.color,boxSizing:"border-box"}},a.a.createElement("img",{alt:t,src:this.props.imgFile}),a.a.createElement("br",null)),a.a.createElement(le,{isSelectionAccepted:se.ShapeOnly,state:this.props.state,setState:this.props.setState,style:{width:"100%",height:"100%",position:"absolute",top:0,left:0},text:"",onShapesDropped:function(t){return e.onShapesDroppedOnNewSerie(e.props.type,t)},key:t})),a.a.createElement("span",null,t))}}]),t}(a.a.Component);function Oe(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return Ie(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ie(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0,a=function(){};return{s:a,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,r=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw r}}}}function Ie(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var Me=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;Object(s.a)(this,e),this.coord=void 0,this.duplicateId=void 0,this.coord=t,this.duplicateId=n},Ne=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).decimalPrecision=void 0,n.nTicks=void 0,n.cachedTicks=void 0,n.cachedHeaders=void 0,n.cachedData=void 0,n.cachedRawData=void 0,n.lastRowCount=void 0,n.cellSelectedListener=n.onCellSelectedCallback.bind(Object(d.a)(Object(d.a)(n))),n.cellEditedListener=n.onCellEditedCallback.bind(Object(d.a)(Object(d.a)(n))),n.nTicks=null,n.minWidth=350,n.maxHeight=600,n.decimalPrecision=2,n.colWidths=[100],n.cachedTicks=null,n.cachedData="",n.cachedRawData=null,n.cachedHeaders=null,n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"getMinDecimals",value:function(e){if(e.length<=0||"number"!=typeof e[0])return 0;for(var t=0,n=new Set,i=function(){var i=t;n=new Set(e.map(function(e){return parseFloat(e.toFixed(i))})),t++};n.size!==e.length&&t<20;)i();return t-1}},{key:"sortValues",value:function(e){return e.sort(function(e,t){return e===t?0:e<t?-1:1})}},{key:"getTicksX",value:function(){if(null!==this.cachedTicks)return this.cachedTicks;var e=this.props.state.dataTable,t=[];if(0===t.length&&e.series.length>0){for(var n=new Set,i={},a=0;a<e.series.length;++a){for(var r=new Set,o={},s=e.series[a],l=0;l<s.data.length;++l){var c=s.data[l].x.pixel;r.has(c)&&(o.hasOwnProperty(c)||(o[c]=0),o[c]+=1),r.add(c),n.add(c)}for(var u in o)i.hasOwnProperty(u)?i[u]=Math.max(i[u],o[u]):i[u]=o[u]}var h=Array.from(n);for(var d in t=h.map(function(t){return new Me(new w(t,e.axisX))}),i)for(var p=i[d],f=0;f<p;++f)t.push(new Me(new w(parseFloat(d),e.axisX),f+1));t=t.sort(function(e,t){return e.coord.pixel-t.coord.pixel})}return this.cachedTicks=t,t}},{key:"getCellValue",value:function(e,t){if(0===e||t>=this.props.dataTable.series.length)return null;var n=this.getTicksX();return this.props.dataTable.series[t].getAtPixelX(n[e-1].coord.pixel,n[e-1].duplicateId)}},{key:"getData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2;if(null!==this.cachedRawData)return this.cachedRawData;var t=[],n=this.getTicksX();if(n.length>0){var i=["Name"];if(this.props.state.dataTable.axisX.isCategorical())i=i.concat(n.map(function(e){return e.coord.value}));else{var a=n.filter(function(e){return 0==e.duplicateId}).map(function(e){return parseFloat(e.coord.value)}),r=this.getMinDecimals(a),o=n.map(function(e){return parseFloat(e.coord.value).toFixed(r)});i=i.concat(o)}t.push(i)}for(var s=0;s<this.props.dataTable.series.length;++s){for(var l=this.props.dataTable.series[s],c=[l.name],u=0;u<n.length;++u){var h=l.getAtPixelX(n[u].coord.pixel,n[u].duplicateId),d="";if(null!==h&&(d=h.y.value,!h.y.axis.isCategorical())){if(l.is(L.ERRORBAR)){var p=l.getMainSerie(),f=parseFloat(p.getAtPixelX(n[u].coord.pixel,n[u].duplicateId).y.value);d=Math.abs(parseFloat(d)-f).toString()}null!==e&&(d=parseFloat(d).toFixed(e))}c.push(d)}t.push(c)}return t}},{key:"getFloatingHeader",value:function(){return this.props.dataTable.name}},{key:"getRowBackgroundColor",value:function(e){var t=this.props.dataTable.series;if(e-1<t.length){var n=t[e-1].getMainColor();return n=null===n?"#ffffff":n,"rgba("+C.colorHexToRgb(n).join(",")+",0.2)"}return null}},{key:"updateDatatable",value:function(){this.cachedTable=null,this.props.setState({dataTable:this.props.state.dataTable})}},{key:"getGridOverlay",value:function(){for(var e=this,n=[],i=0,r=this.props.dataTable.series,o=function(){var t=r[s],o=s+1;if(l=e.getCellRect(0,o),n.push(a.a.createElement(le,{isSelectionAccepted:se.TextOnly,recommendedDropCount:1,key:3*o+1,state:e.props.state,setState:e.props.setState,style:{width:l.width,height:l.height,position:"absolute",top:l.y,left:l.x},text:"",onShapesDropped:function(n){return e.onShapesDroppedOnSerieName(n,t)}})),i>0)return i--,"continue";var u=l.height,p=function(n){return e.onShapesDroppedOnSerie(n,t)};if(t.is(L.ERRORBAR)){var f=t;if(s+1<r.length&&r[s+1].is(L.ERRORBAR)){var v=r[s+1];v._serie===f._serie&&(u=2*l.height,p=function(t){return e.onShapesDroppedOnSerie(t,f)&&e.onShapesDroppedOnSerie(t,v)},i=1)}}if(t.linkedElements.length>2){for(var g=0;g+1<r.length&&r[s+g+1]instanceof R&&r[s+g+1].getMainSerie()===t;)g++;u=l.height*(g+1),i=g}c=e.getCellRect(e.getColCount()-1,o),h=l.x+l.width,d=c.x+c.width,n.push(a.a.createElement(le,{isSelectionAccepted:se.ShapeOnly,recommendedDropCount:0,key:3*o+2,state:e.props.state,setState:e.props.setState,style:{width:d-h-2,height:u,position:"absolute",top:l.y,left:h+1},text:"",onShapesDropped:p}))},s=0;s<r.length;++s){var l,c,h,d;o()}return a.a.createElement("div",null,Object(te.a)(Object(u.a)(t.prototype),"getGridOverlay",this).call(this),n)}},{key:"getFloatingHeaderHTML",value:function(){return a.a.createElement("div",{style:{width:"100%",height:"100%",position:"relative"}},a.a.createElement("div",{style:{left:"0%",width:"90%",top:"50%",transform:"translate(0%, -50%)",position:"absolute"}},this.getFloatingHeader()),a.a.createElement("div",{style:{right:1,top:"50%",transform:"translate(0%, -50%)",position:"absolute"}},a.a.createElement("button",{className:"button small gray tooltip",onClick:this.downloadCSV.bind(this)},a.a.createElement("i",{className:"fa fa-download","aria-hidden":"true"})," CSV")),a.a.createElement(le,{recommendedDropCount:1,isSelectionAccepted:se.TextOnly,state:this.props.state,setState:this.props.setState,style:{width:"100%",height:"100%",position:"absolute",top:0,left:0},text:"",onShapesDropped:this.onShapesDroppedOnTitle.bind(this)}))}},{key:"onNbTicksChanged",value:function(e){var t=e.target.value;this.nTicks=null===t||"0"===t?null:parseInt(t),this.forceUpdate()}},{key:"isCellSelectable",value:function(e,t){return t>0}},{key:"isCellEditable",value:function(e,t){return t>0}},{key:"onCellSelectedCallback",value:function(e,t){if(this.props.state.overlay.clear(),e>0&&-1!==e&&-1!==t){var n=this.getCellValue(e,t-1);null!==n&&this.props.state.overlay.points.push(n)}}},{key:"onCellEditedCallback",value:function(e,t,n){if(0===e){var i=this.props.dataTable.series[t-1];Q.get().addUndoRestorePoint(),i.name=n}else{var a=this.getCellValue(e,t-1);null!==a&&(Q.get().addUndoRestorePoint(),a.y.value=n)}this.forceUpdate()}},{key:"onRowDeleted",value:function(e){Q.get().addUndoRestorePoint();var t,n=this.props.dataTable.series.splice(e,1)[0],i=Oe(n.linkedElements);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(null!==a){var r=this.props.dataTable.series.indexOf(a);r>-1&&this.props.dataTable.series.splice(r,1)}}}catch(l){i.e(l)}finally{i.f()}if(n instanceof R){var o=n.getMainSerie(),s=o.linkedElements.indexOf(n);s>=2&&(o.linkedElements[s]=null),0===s&&(o.upperErrorBar=null),1===s&&(o.lowerErrorBar=null)}this.updateDatatable()}},{key:"onAddErrorBars",value:function(e){Q.get().addUndoRestorePoint();var t=this.props.dataTable.series[e];if(null===t.lowerErrorBar){var n=new he(t,ue.LOWER);this.props.dataTable.series.splice(e+1,0,n),t.lowerErrorBar=n}if(null===t.upperErrorBar){var i=new he(t,ue.UPPER);this.props.dataTable.series.splice(e+1,0,i),t.upperErrorBar=i}this.updateDatatable()}},{key:"onShapesDroppedOnSerie",value:function(e,t){var n=Te.getSerieExtractor(t,this.props.dataTable);return null!==n&&(Q.get().addUndoRestorePoint(),n.onShapesSelected(e),this.updateDatatable()),!0}},{key:"onShapesDroppedOnErrorBar",value:function(e,t,n){return this.onAddErrorBars(n),this.onShapesDroppedOnSerie(e,t.upperErrorBar)&&this.onShapesDroppedOnSerie(e,t.lowerErrorBar)}},{key:"onShapesDroppedOnSerieName",value:function(e,t){var n=this;return G.getTextFromShapes(e).then(function(e){return null!==e&&(Q.get().addUndoRestorePoint(),t.name=e,n.updateDatatable(),!0)}),!0}},{key:"onShapesDroppedOnTitle",value:function(e){var t=this;return G.getTextFromShapes(e).then(function(e){null===e&&alert("No text found in selection"),Q.get().addUndoRestorePoint(),t.props.dataTable.name=e,t.updateDatatable()}),!0}},{key:"isErrorBarButtonShown",value:function(e){if(e<0)return!0;var t=this.props.dataTable.series[e];return t.hasErrorBars()||!t.canHaveErrorBars()}},{key:"getCellStyle",value:function(e,t){return{backgroundColor:0===t?"#f0f0f0":this.getRowBackgroundColor(t),textAlign:0===t?"center":"left"}}},{key:"getColumnStickyCount",value:function(){return 2}},{key:"getColumnStickyWidth",value:function(){return 40}},{key:"getStickyButton",value:function(e,t){var n=this;return 1!==e||this.isErrorBarButtonShown(t-1)?0===e&&t>0?a.a.createElement("div",{onMouseUp:function(e){n.onRowDeleted(t-1)},className:"deleteSeriesButton",style:{padding:4}},a.a.createElement("i",{className:"fa fa-trash","aria-hidden":"true"})):a.a.createElement("div",null):a.a.createElement("div",{style:{position:"relative"}},a.a.createElement("div",{onMouseUp:function(e){n.onAddErrorBars(t-1)},className:"deleteSeriesButton",style:{paddingLeft:3,paddingTop:1}},"\u2336"),a.a.createElement(le,{isSelectionAccepted:se.ShapeOnly,recommendedDropCount:1,state:this.props.state,setState:this.props.setState,style:{width:"100%",height:"100%",position:"absolute",top:0,left:0},text:"",onShapesDropped:function(e){return n.onShapesDroppedOnErrorBar(e,n.props.state.dataTable.series[t-1],t-1)}}))}},{key:"getColumnStickyHTML",value:function(){var e=this;return function(t){var n=t.columnIndex,i=t.rowIndex,r=t.style;return a.a.createElement("div",{className:"tableCell "+(n%2===0?"evenCol ":"oddCol ")+(i%2===0?"evenRow ":"oddRow ")+(0===i?"firstRow ":"")+(0===n?"firstCol ":"")+(i===e.getRowCount()-1?"lastRow ":"")+(n===e.getColCount()-1?"lastCol ":""),style:Object(ne.a)({},r,{backgroundColor:"#f0f0f0",padding:0,width:e.getColumnStickyWidth()/e.getColumnStickyCount()})},e.getStickyButton(n,i))}}},{key:"download",value:function(e,t){var n=document.createElement("a");n.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(t)),n.setAttribute("download",e),n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n)}},{key:"downloadCSV",value:function(){var e="";this.cachedRawData=null,e+=this.getData(null).map(function(e){return e.join(",")}).join("\n"),this.download(this.props.dataTable.name+".csv",e)}},{key:"updateDataTableSize",value:function(){var e=document.getElementById("dragAndDropArea"),n=document.getElementById("seriesWidget");if(null!==e&&null!==n){var i=document.getElementById("seriesWidget").querySelector(".tableFloatingHeader");this.maxHeight=n.clientHeight-e.clientHeight-(null!==i?i.clientHeight+2:0)}Object(te.a)(Object(u.a)(t.prototype),"updateDataTableSize",this).call(this)}},{key:"onNewRowAdded",value:function(e){this.scrollToRow(e)}},{key:"componentDidUpdate",value:function(){var e=this.getRowCount();this.lastRowCount!==e&&(this.lastRowCount<e&&this.onNewRowAdded(e),this.lastRowCount=e),Object(te.a)(Object(u.a)(t.prototype),"componentDidUpdate",this).call(this)}},{key:"render",value:function(){return this.cachedRawData=null,this.cachedTicks=null,this.cachedRawData=this.getData(),a.a.createElement("div",{id:"seriesWidget",style:{height:"100%",overflowY:"auto"}},Object(te.a)(Object(u.a)(t.prototype),"render",this).call(this),a.a.createElement("div",{id:"dragAndDropArea",style:{display:"flex",flexDirection:"column"}},a.a.createElement("div",{className:"panelSeparator"}," ",a.a.createElement("i",{style:{marginLeft:5},className:"fa fa-hand-pointer-o","aria-hidden":"true"})," Drag&Drop Chart Elements"),a.a.createElement("div",{id:"seriesDropzones",style:{display:"flex",flexDirection:"row"}},a.a.createElement(Le,{color:"#C7E2ED",imgFile:"icons/line.svg",state:this.props.state,shapes:this.props.shapes,setState:this.props.setState,type:L.LINE}),a.a.createElement(Le,{color:"rgb(229, 239, 212)",imgFile:"icons/vertical_bar.svg",shapes:this.props.shapes,state:this.props.state,setState:this.props.setState,type:L.BAR}),a.a.createElement(Le,{color:"#E4CCF0",imgFile:"icons/vertical_boxplot.svg",shapes:this.props.shapes,state:this.props.state,setState:this.props.setState,type:L.BOX_PLOT}),a.a.createElement(Le,{color:"#F6E6C3",imgFile:"icons/scatter.svg",shapes:this.props.shapes,state:this.props.state,setState:this.props.setState,type:L.SCATTER}))))}}]),t}(re),Be=n(45),Ae=n.n(Be),Re=n(46),De=n.n(Re);function Fe(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return Ve(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ve(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0,a=function(){};return{s:a,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,r=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw r}}}}function Ve(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var je=function(e){function t(e){return Object(s.a)(this,t),Object(c.a)(this,Object(u.a)(t).call(this,e))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"axisCoordToArray",value:function(e){var t,n=[],i=[],a=Fe(e);try{for(a.s();!(t=a.n()).done;){var r=t.value;n.push(r.x.value),i.push(r.y.value)}}catch(o){a.e(o)}finally{a.f()}return{x:n,y:i}}},{key:"render",value:function(){var e,n=this,i=[],r={},o=Fe(this.props.state.dataTable.series);try{var s=function(){var a=e.value;if(!(a instanceof R)){var o=n.axisCoordToArray(a.data),s=null;if(a.hasErrorBars()){var l=n.axisCoordToArray(a.upperErrorBar.data).y,c=n.axisCoordToArray(a.lowerErrorBar.data).y;s={type:"data",symmetric:!1,array:l.map(function(e,t){return Math.abs(e-o.y[t])}),arrayminus:c.map(function(e,t){return Math.abs(e-o.y[t])})}}var u=a.getMainColor();"#ffffff"===u&&(u="#CCCCCC");var h={x:o.x,y:o.y,name:a.name,error_y:s,line:{color:u},marker:{color:u}},d=L.LINE+"."+u;d in r||(r[d]=0);var p=r[d];a.is(L.LINE)&&(h.type="scatter",h.mode="lines",h.line.dash=t.dashLineStyle[p%t.dashLineStyle.length]),a.is(L.SCATTER)&&(h.type="scatter",h.mode="markers",h.marker.symbol=t.markerSymbols[p%t.markerSymbols.length]),a.is(L.BAR)&&(h.type="bar",h.marker.pattern={shape:t.barPatternStyle[p%t.barPatternStyle.length]}),a.is(L.BOX_PLOT)&&(h.type="box",h.median=o.y,h.y=void 0,null!==a.linkedElements[5]&&(h.lowerfence=n.axisCoordToArray(a.linkedElements[5].data).y),null!==a.linkedElements[4]&&(h.upperfence=n.axisCoordToArray(a.linkedElements[4].data).y),null!==a.linkedElements[2]&&(h.q1=n.axisCoordToArray(a.linkedElements[2].data).y),null!==a.linkedElements[3]&&(h.q3=n.axisCoordToArray(a.linkedElements[3].data).y)),i.push(h),r[d]+=1}};for(o.s();!(e=o.n()).done;)s()}catch(l){o.e(l)}finally{o.f()}return a.a.createElement(De.a,{style:{width:"100%",height:"100%"},useResizeHandler:!0,data:i,layout:{autosize:!0,title:this.props.state.dataTable.name,xaxis:{type:this.props.state.dataTable.axisX.isCategorical()?"category":"linear",title:this.props.state.dataTable.axisX.name},yaxis:{type:this.props.state.dataTable.axisY.isCategorical()?"category":"linear",title:this.props.state.dataTable.axisY.name},boxmode:"group"}})}}]),t}(a.a.Component);je.dashLineStyle=["solid","dash","dot","longdash","dashdot","longdashdot"],je.markerSymbols=["circle","cross","square","diamond","triangle","pentagon","hexagon","octagon","star"],je.barPatternStyle=["","/","\\","x","-","|","+","."];var Ue=function(){function e(t){Object(s.a)(this,e),this.color=void 0,this.hash=void 0,this.hash=this.color=t.isFilled?t.fillStyle:t.strokeStyle}return Object(l.a)(e,[{key:"updateShape",value:function(e){}}]),e}(),He=function(){function e(){Object(s.a)(this,e)}return Object(l.a)(e,[{key:"getValue",value:function(e){return new Ue(e)}},{key:"paint",value:function(e,t,n,i){e.fillStyle=t.color,e.fillRect(0,0,n,i)}},{key:"getName",value:function(){return"Color Filter"}},{key:"minNumberElements",value:function(){return 0}}]),e}(),ze=function(){function e(t){Object(s.a)(this,e),this.angles=void 0,this.shape=void 0,this.hash=void 0,this.angles=[],this.shape=t,this.hash="",void 0!==t.text?this.hash="text":(this.angles=C.shapeToAngles(t,45/Math.PI,!0),this.hash=this.angles.join("."))}return Object(l.a)(e,[{key:"updateShape",value:function(e){var t=Math.abs(1-this.shape.rect.width/this.shape.rect.height),n=Math.abs(1-e.rect.width/e.rect.height);(!e.isFilled&&this.shape.isFilled||n<t)&&(this.shape=e)}}]),e}(),We=function(){function e(){Object(s.a)(this,e)}return Object(l.a)(e,[{key:"getValue",value:function(e){return new ze(e)}},{key:"paint",value:function(e,t,n,i){if(e.fillStyle="white",e.fillRect(0,0,n,i),e.fillStyle="black","text"===t.hash)e.textAlign="center",e.textBaseline="middle",e.font="bold 80px Arial",e.fillText("Aa",n/2,i/2);else if("misc"===t.hash)e.textAlign="center",e.textBaseline="middle",e.font="bold 100px Arial",e.fillText("?",n/2,i/2);else{var a=t.shape.rect,r=(n-1)/Math.max(a.width,a.height);e.save(),e.translate((n-a.width*r)/2,(n-a.height*r)/2),e.scale(r,r),e.translate(-a.x,-a.y);var o={};m.copyStyle(o,t.shape),t.shape.fillStyle=t.shape.strokeStyle="black",t.shape.globalAlpha=1,t.shape.draw(e),m.copyStyle(t.shape,o),e.restore()}}},{key:"getName",value:function(){return"Shape Filter"}},{key:"minNumberElements",value:function(){return 1}}]),e}(),Ge=function(e){function t(e){var n;Object(s.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).filters=void 0,n.chartView=void 0,n.seriesWidget=void 0,n.xAxisWidget=void 0,n.yAxisWidget=void 0,n.statusBarText=void 0,n.draggableShapeSelection=void 0,n.globalMouseMoveListener=void 0;var i=new D;n.state={filteredShapes:n.props.chart.shapes,extractor:new Z(i.axisX),dataTable:i,shapeSelection:new F,overlay:new f},Q.get().dataTable=i,n.filters=[],n.chartView=null,n.seriesWidget=null,n.xAxisWidget=null,n.yAxisWidget=null,n.statusBarText="",n.draggableShapeSelection=null,n.globalMouseMoveListener=null;var a=Object(d.a)(Object(d.a)(n));return window.onresize=function(){a.forceUpdate()},document.onkeydown=function(e){n.onKeyDown(e)},document.onkeyup=function(e){n.onKeyUp(e)},n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"onUndo",value:function(){Q.get().canUndo()&&this.restoreDataTable(Q.get().undo())}},{key:"onRedo",value:function(){Q.get().canRedo()&&this.restoreDataTable(Q.get().redo())}},{key:"onKeyDown",value:function(e){e.ctrlKey||e.metaKey?"y"===e.key||"z"===e.key&&e.shiftKey?this.onRedo():"z"===e.key&&this.onUndo():" "===e.key?null!==this.chartView&&this.chartView.enterPanMode():"Escape"===e.key?null!==this.draggableShapeSelection&&this.draggableShapeSelection.clearShapes():"Shift"===e.key&&null!==this.draggableShapeSelection&&this.draggableShapeSelection.hide()}},{key:"restoreDataTable",value:function(e){this.setState({dataTable:e}),Q.get().dataTable=e}},{key:"onKeyUp",value:function(e){" "===e.key?null!==this.chartView&&this.chartView.exitPanMode():"Shift"===e.key&&null!==this.draggableShapeSelection&&this.draggableShapeSelection.show()}},{key:"getGhostShapes",value:function(){var e=[];e=(e=e.concat(this.state.dataTable.axisX.shapes)).concat(this.state.dataTable.axisY.shapes);for(var t=0;t<this.state.dataTable.series.length;++t){var n=this.state.dataTable.series[t];e=e.concat(n.shapes)}if(this.state.shapeSelection.isDragged)for(var i=this.state.shapeSelection.shapesIdx,a=0;a<i.length;++a){var r=i[a],o=this.state.filteredShapes[r];e.push(o)}return e}},{key:"onFilterChanged",value:function(){for(var e=this.props.chart.shapes,t=0;t<this.filters.length;++t)e=this.filters[t].apply(e);this.state.shapeSelection.clear(),this.setState({filteredShapes:e})}},{key:"onMouseMoved",value:function(e){var t="Value: (",n=this.state.dataTable.axisX.pixelToTick(e.x),i=this.state.dataTable.axisY.pixelToTick(e.y);Number.isFinite(n)&&(n=n.toFixed(2)),Number.isFinite(i)&&(i=i.toFixed(2)),t+=n,t+=", ",t+=i,t+=" Pixels: (",t+=e.x.toFixed()+", "+e.y.toFixed()+")",this.statusBarText=t;var a=document.getElementById("statusBar");void 0!==a&&null!==a&&(a.innerHTML=this.statusBarText)}},{key:"updateLayout",value:function(){null!=this.chartView&&this.chartView.resize()}},{key:"onGlobalMouseMove",value:function(e){var t=document.getElementById("dragElement");null!==t&&(t.style.left=e.clientX-t.clientWidth/2+"px",t.style.top=e.clientY-t.clientHeight/2+"px")}},{key:"componentDidMount",value:function(){this.updateLayout(),this.globalMouseMoveListener=this.onGlobalMouseMove.bind(this),document.addEventListener("mousemove",this.globalMouseMoveListener)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousemove",this.globalMouseMoveListener)}},{key:"componentDidUpdate",value:function(){this.updateLayout()}},{key:"getChart",value:function(){return this.props.chart}},{key:"getDraggableSelection",value:function(){return this.draggableShapeSelection}},{key:"render",value:function(){var e=this,t=Math.floor(Math.max((document.body.offsetHeight-4)/24-4,21)),n=this.props.chart.rect,i=15*(n.height/n.width)*(document.body.offsetWidth-4)/24-4,r=Math.min(Math.round(i/t)+1,22),o=(Math.round((22-r)/2),[{i:"menuBar",x:0,y:0,w:24,h:1,static:!0},{i:"axisTableX",x:0,y:1,w:9,h:3},{i:"axisTableY",x:0,y:4,w:9,h:3},{i:"dataTable",x:0,y:6,w:9,h:8},{i:"newChart",x:0,y:14,w:9,h:9},{i:"chartView",x:9,y:1,w:15,h:r},{i:"statusBar",x:9,y:r+1,w:15,h:1,static:!0}]);return this.filters=[],a.a.createElement("div",{id:"chartExtractor"},a.a.createElement(ee,{ref:function(t){return e.draggableShapeSelection=t},state:this.state,setState:this.setState.bind(this)}),a.a.createElement(Ae.a,{className:"layout",draggableHandle:".panelDragHandle",layout:o,cols:24,rowHeight:t,width:document.body.offsetWidth,containerPadding:[0,0],margin:[4,4],onLayoutChange:function(t){e.updateLayout()},resizeHandles:["se"],autoSize:!1,compactType:null},a.a.createElement("div",{key:"menuBar",className:"title"},a.a.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"}},a.a.createElement("div",null,a.a.createElement("button",{className:"button big"+(Q.get().canUndo()?"":" disabled"),onMouseDown:function(e){return e.preventDefault()},onClick:function(t){return e.onUndo()}},a.a.createElement("i",{className:"fa fa-undo","aria-hidden":"true"})," Undo (",Q.get().undoHistory.length>9?"+9":Q.get().undoHistory.length,")"),a.a.createElement("button",{className:"button big"+(Q.get().canRedo()?"":" disabled"),onMouseDown:function(e){return e.preventDefault()},onClick:function(t){return e.onRedo()}},a.a.createElement("i",{className:"fa fa-repeat","aria-hidden":"true"})," Redo (",Q.get().redoHistory.length>9?"+9":Q.get().redoHistory.length,")")),a.a.createElement("div",null,a.a.createElement("i",{className:"fa fa-bar-chart","aria-hidden":"true"})," ChartDetective"),a.a.createElement("div",null))),a.a.createElement("div",{key:"chartView",className:"panel"},a.a.createElement("div",{style:{width:"100%",height:"100%"}}," ",a.a.createElement("div",{className:"panelDragHandle panelTitle"},a.a.createElement("i",{className:"fa fa-line-chart","aria-hidden":"true"})," Chart"),a.a.createElement(b,{ref:function(t){null!==t&&e.filters.push(t)},onFilterChanged:this.onFilterChanged.bind(this),filter:new He,shapes:this.props.chart.shapes}),a.a.createElement(b,{ref:function(t){null!==t&&e.filters.push(t)},onFilterChanged:this.onFilterChanged.bind(this),filter:new We,shapes:this.props.chart.shapes}),a.a.createElement("div",{className:"panelSeparator"}),a.a.createElement(y,{ref:function(t){return e.chartView=t},state:this.state,setState:this.setState.bind(this),getDraggableSelection:this.getDraggableSelection.bind(this),ghostShapes:this.getGhostShapes(),chart:{rect:this.props.chart.rect,shapes:this.state.filteredShapes},onMouseMoved:this.onMouseMoved.bind(this)}))),a.a.createElement("div",{key:"axisTableX",className:"panel"},a.a.createElement(ce,{ref:function(t){return e.xAxisWidget=t},axis:this.state.dataTable.axisX,state:this.state,shapes:this.props.chart.shapes,setState:this.setState.bind(this)},a.a.createElement("div",{className:"panelDragHandle",style:{position:"absolute",top:4,left:5,fontSize:"14px"}},a.a.createElement("i",{className:"fa fa-arrow-right","aria-hidden":"true"})))),a.a.createElement("div",{key:"axisTableY",className:"panel"},a.a.createElement(ce,{ref:function(t){return e.yAxisWidget=t},axis:this.state.dataTable.axisY,state:this.state,shapes:this.props.chart.shapes,setState:this.setState.bind(this)},a.a.createElement("div",{className:"panelDragHandle",style:{position:"absolute",top:4,left:5,fontSize:"14px"}},a.a.createElement("i",{className:"fa fa-arrow-up","aria-hidden":"true"})))),a.a.createElement("div",{key:"dataTable",className:"panel scrollY"},a.a.createElement(Ne,{ref:function(t){return e.seriesWidget=t},dataTable:this.state.dataTable,state:this.state,shapes:this.props.chart.shapes,setState:this.setState.bind(this)},a.a.createElement("div",{className:"panelDragHandle",style:{position:"absolute",top:4,left:5,fontSize:"16px"}},a.a.createElement("i",{className:"fa fa-table","aria-hidden":"true"})))),a.a.createElement("div",{key:"newChart",className:"panel"},a.a.createElement("div",{className:"panelDragHandle panelTitle"},a.a.createElement("i",{className:"fa fa-line-chart","aria-hidden":"true"})," Reconstructed Chart"),a.a.createElement("div",{style:{flex:1,width:"100%",overflow:"scroll"}},a.a.createElement(je,{state:this.state,setState:this.setState.bind(this)}))),a.a.createElement("div",{key:"statusBar",className:"panel"},a.a.createElement("div",{id:"statusBar",style:{textAlign:"right"}},this.statusBarText))),a.a.createElement("div",{id:"snackbar-container"}))}}]),t}(a.a.Component),Xe=n(9),qe=n(4);function Ye(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return Ke(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ke(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0,a=function(){};return{s:a,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,r=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw r}}}}function Ke(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var Ze=function(){function e(t){Object(s.a)(this,e),this.hookedCtx=void 0,this.hookedCtxs=void 0,this.origGetContext=void 0,this.hookedCtxs=[],this.hookedCtx=t,this.hookCtx(t)}return Object(l.a)(e,[{key:"_createCanvas",value:function(e,t){var n=document.createElement("canvas");return n.width=e,n.height=t,n}},{key:"create",value:function(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");var n=this._createCanvas(e,t),i=n.getContext("2d");return this.hookCtx(i),{canvas:n,context:i}}},{key:"reset",value:function(e,t,n){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||n<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=n;var i=e.context;void 0!==i.isHooked&&(i.commands=[])}},{key:"destroy",value:function(e){if(!e.canvas)throw new Error("Canvas is not specified");this.unhookCtx(e.context),e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}},{key:"getCommands",value:function(){return this.hookedCtx.commands}},{key:"getCurrentCmd",value:function(e){return null==e.currentCommand&&(e.currentCommand=new m,e.currentCommand.saveStyle(e)),e.currentCommand}},{key:"addCommand",value:function(e,t){t.saveStyle(e),t.computeBBox(e),e.commands.push(t)}},{key:"clearRect",value:function(e,t,n,i,a){console.log("clearRect not supported")}},{key:"fillRect",value:function(e,t,n,i,a){}},{key:"strokeRect",value:function(e,t,n,i,a){console.log("strokeRect not supported")}},{key:"glyphFillText",value:function(e,t,n,i,a,r){var o=new m;o.text=t,o.textX=n,o.textY=i,o.isFilled=!0,void 0!==a&&void 0!==r&&(o.unicode=a[r].unicode),this.addCommand(e,o)}},{key:"strokeText",value:function(e,t,n,i){arguments.length>4&&void 0!==arguments[4]&&arguments[4];var a=new m;a.unicode=a.text=t,a.textX=n,a.textY=i,a.isFilled=!0,this.addCommand(e,a)}},{key:"beginPath",value:function(e){e.currentCommand=new m,this.getCurrentCmd(e).addCmd(m.types.BEGIN)}},{key:"closePath",value:function(e){this.getCurrentCmd(e).addCmd(m.types.CLOSE)}},{key:"moveTo",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];this.getCurrentCmd(e).addCmd(m.types.MOVETO,n)}},{key:"lineTo",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];this.getCurrentCmd(e).addCmd(m.types.LINETO,n)}},{key:"bezierCurveTo",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];this.getCurrentCmd(e).addCmd(m.types.CURVETO,n)}},{key:"quadraticCurveTo",value:function(e,t,n,i,a){console.log("quadraticCurveTo not supported")}},{key:"arc",value:function(e,t,n,i,a,r){arguments.length>6&&void 0!==arguments[6]&&arguments[6];console.log("arc not supported")}},{key:"arcTo",value:function(e,t,n,i,a,r){console.log("arcTo not supported")}},{key:"clip",value:function(e,t,n){e.clipPaths||(e.clipPaths=[]),e.clipPaths.push({path:this.getCurrentCmd(e).path,transform:DOMMatrix.fromMatrix(e.getTransform())})}},{key:"ellipse",value:function(e,t,n,i,a,r,o,s){arguments.length>8&&void 0!==arguments[8]&&arguments[8];console.log("ellipse not supported")}},{key:"rect",value:function(e,t,n,i,a){e.currentCommand=new m,this.getCurrentCmd(e).addCmd(m.types.BEGIN),this.getCurrentCmd(e).addCmd(m.types.MOVETO,[t,n]),this.getCurrentCmd(e).addCmd(m.types.LINETO,[t,n+a]),this.getCurrentCmd(e).addCmd(m.types.LINETO,[t+i,n+a]),this.getCurrentCmd(e).addCmd(m.types.LINETO,[t+i,n]),this.getCurrentCmd(e).addCmd(m.types.CLOSE)}},{key:"fill",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.getCurrentCmd(e).isFilled=!0,this.addCommand(e,this.getCurrentCmd(e)),e.currentCommand=e.currentCommand.clone()}},{key:"save",value:function(e){e.savedClippingPaths||(e.savedClippingPaths=[]),e.savedClippingPaths.push([].concat(e.clipPaths))}},{key:"restore",value:function(e){e.savedClippingPaths&&(e.clipPaths=e.savedClippingPaths.pop())}},{key:"stroke",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.getCurrentCmd(e).isFilled=!1,this.addCommand(e,this.getCurrentCmd(e)),e.currentCommand=e.currentCommand.clone()}},{key:"drawImage",value:function(e,t){try{if(void 0!==t.getContext){arguments[2],arguments[3];arguments.length>4&&(arguments[6],arguments[7],console.log("drawImage with clipping rect not supported"));var n=t.getContext("2d").commands;t.hooked=!0;var i,a=Ye(n);try{for(a.s();!(i=a.n()).done;){var r=i.value.clone();null!==r.transform?r.transform=e.getTransform().multiply(r.transform):r.transform=DOMMatrix.fromMatrix(e.getTransform()),r.globalAlpha*=e.globalAlpha,r.computeBBox(e),e.commands.push(r)}}catch(o){a.e(o)}finally{a.f()}}}catch(o){console.log(o)}}},{key:"hookCtx",value:function(e){var t=this;void 0!==e.isHooked&&e.isHooked&&this.unhookCtx(e),this.hookedCtxs.push(e),e.isHooked=!0,e.hookId=this.hookedCtxs.length,e.origFunctions={},e.commands=[],e.currentCommand=null,e.lastWidth=e.canvas.width,e.lastHeight=e.canvas.height,this.hookMethod(e,"clearRect",this.clearRect),this.hookMethod(e,"fillRect",this.fillRect),this.hookMethod(e,"strokeRect",this.strokeRect),this.hookMethod(e,"strokeText",this.strokeText),this.hookMethod(e,"beginPath",this.beginPath),this.hookMethod(e,"closePath",this.closePath),this.hookMethod(e,"moveTo",this.moveTo),this.hookMethod(e,"lineTo",this.lineTo),this.hookMethod(e,"bezierCurveTo",this.bezierCurveTo),this.hookMethod(e,"quadraticCurveTo",this.quadraticCurveTo),this.hookMethod(e,"arc",this.arc),this.hookMethod(e,"arcTo",this.arcTo),this.hookMethod(e,"ellipse",this.ellipse),this.hookMethod(e,"rect",this.rect),this.hookMethod(e,"fill",this.fill),this.hookMethod(e,"stroke",this.stroke),this.hookMethod(e,"drawImage",this.drawImage),e.glyphFillText=function(n,i,a,r,o){t.glyphFillText(e,n,i,a,r,o)}}},{key:"unhookCtx",value:function(e){for(var t in e.origFunctions)e.isHooked=void 0,e.origFunctions.hasOwnProperty(t)&&(e[t]=e.origFunctions[t]);e.commands=void 0}},{key:"hookMethod",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=this;e.origFunctions[t]=e[t],e[t]=function(){n.apply(a,[e].concat(Object(k.a)(arguments))),i||e.origFunctions[t].apply(e,arguments)}}},{key:"uninstallHook",value:function(){var e,t=Ye(this.hookedCtxs);try{for(t.s();!(e=t.n()).done;){var n=e.value;this.unhookCtx(n)}}catch(i){t.e(i)}finally{t.f()}}}]),e}();function Qe(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return $e(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return $e(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0,a=function(){};return{s:a,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,r=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw r}}}}function $e(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function Je(){Je=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},r=a.iterator||"@@iterator",o=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(T){l=function(e,t,n){return e[t]=n}}function c(e,t,n,a){var r=t&&t.prototype instanceof d?t:d,o=Object.create(r.prototype),s=new E(a||[]);return i(o,"_invoke",{value:_(e,n,s)}),o}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(T){return{type:"throw",arg:T}}}e.wrap=c;var h={};function d(){}function p(){}function f(){}var v={};l(v,r,function(){return this});var g=Object.getPrototypeOf,m=g&&g(g(C([])));m&&m!==t&&n.call(m,r)&&(v=m);var y=f.prototype=d.prototype=Object.create(v);function b(e){["next","throw","return"].forEach(function(t){l(e,t,function(e){return this._invoke(t,e)})})}function w(e,t){var a;i(this,"_invoke",{value:function(i,r){function o(){return new t(function(a,o){!function i(a,r,o,s){var l=u(e[a],e,r);if("throw"!==l.type){var c=l.arg,h=c.value;return h&&"object"==typeof h&&n.call(h,"__await")?t.resolve(h.__await).then(function(e){i("next",e,o,s)},function(e){i("throw",e,o,s)}):t.resolve(h).then(function(e){c.value=e,o(c)},function(e){return i("throw",e,o,s)})}s(l.arg)}(i,r,a,o)})}return a=a?a.then(o,o):o()}})}function _(e,t,n){var i="suspendedStart";return function(a,r){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===a)throw r;return P()}for(n.method=a,n.arg=r;;){var o=n.delegate;if(o){var s=S(o,n);if(s){if(s===h)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===i)throw i="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i="executing";var l=u(e,t,n);if("normal"===l.type){if(i=n.done?"completed":"suspendedYield",l.arg===h)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(i="completed",n.method="throw",n.arg=l.arg)}}}function S(e,t){var n=t.method,i=e.iterator[n];if(void 0===i)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var a=u(i,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,h;var r=a.arg;return r?r.done?(t[e.resultName]=r.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,h):r:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,h)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function C(e){if(e){var t=e[r];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,a=function t(){for(;++i<e.length;)if(n.call(e,i))return t.value=e[i],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:P}}function P(){return{value:void 0,done:!0}}return p.prototype=f,i(y,"constructor",{value:f,configurable:!0}),i(f,"constructor",{value:p,configurable:!0}),p.displayName=l(f,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,l(e,s,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},b(w.prototype),l(w.prototype,o,function(){return this}),e.AsyncIterator=w,e.async=function(t,n,i,a,r){void 0===r&&(r=Promise);var o=new w(c(t,n,i,a),r);return e.isGeneratorFunction(n)?o:o.next().then(function(e){return e.done?e.value:o.next()})},b(y),l(y,s,"Generator"),l(y,r,function(){return this}),l(y,"toString",function(){return"[object Generator]"}),e.keys=function(e){var t=Object(e),n=[];for(var i in t)n.push(i);return n.reverse(),function e(){for(;n.length;){var i=n.pop();if(i in t)return e.value=i,e.done=!1,e}return e.done=!0,e}},e.values=C,E.prototype={constructor:E,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function i(n,i){return o.type="throw",o.arg=e,t.next=n,i&&(t.method="next",t.arg=void 0),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var r=this.tryEntries[a],o=r.completion;if("root"===r.tryLoc)return i("end");if(r.tryLoc<=this.prev){var s=n.call(r,"catchLoc"),l=n.call(r,"finallyLoc");if(s&&l){if(this.prev<r.catchLoc)return i(r.catchLoc,!0);if(this.prev<r.finallyLoc)return i(r.finallyLoc)}else if(s){if(this.prev<r.catchLoc)return i(r.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return i(r.finallyLoc)}}}},abrupt:function(e,t){for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var r=a;break}}r&&("break"===e||"continue"===e)&&r.tryLoc<=t&&t<=r.finallyLoc&&(r=null);var o=r?r.completion:{};return o.type=e,o.arg=t,r?(this.method="next",this.next=r.finallyLoc,h):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var i=n.completion;if("throw"===i.type){var a=i.arg;x(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:C(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),h}},e}function et(){!function(e){var t={};function n(i){if(t[i])return t[i].exports;var a=t[i]={i:i,l:!1,exports:{}};return e[i].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(i,a,function(t){return e[t]}.bind(null,a));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){var i,a;function r(){var e={appContainer:document.body,mainContainer:document.getElementById("viewerContainer"),viewerContainer:document.getElementById("viewer"),eventBus:null,toolbar:{container:document.getElementById("toolbarViewer"),numPages:document.getElementById("numPages"),pageNumber:document.getElementById("pageNumber"),scaleSelectContainer:document.getElementById("scaleSelectContainer"),scaleSelect:document.getElementById("scaleSelect"),customScaleOption:document.getElementById("customScaleOption"),previous:document.getElementById("previous"),next:document.getElementById("next"),zoomIn:document.getElementById("zoomIn"),zoomOut:document.getElementById("zoomOut"),viewFind:document.getElementById("viewFind"),openFile:document.getElementById("openFile"),print:document.getElementById("print"),presentationModeButton:document.getElementById("presentationMode"),download:document.getElementById("download"),viewBookmark:document.getElementById("viewBookmark")},secondaryToolbar:{toolbar:document.getElementById("secondaryToolbar"),toggleButton:document.getElementById("secondaryToolbarToggle"),toolbarButtonContainer:document.getElementById("secondaryToolbarButtonContainer"),presentationModeButton:document.getElementById("secondaryPresentationMode"),openFileButton:document.getElementById("secondaryOpenFile"),printButton:document.getElementById("secondaryPrint"),downloadButton:document.getElementById("secondaryDownload"),viewBookmarkButton:document.getElementById("secondaryViewBookmark"),firstPageButton:document.getElementById("firstPage"),lastPageButton:document.getElementById("lastPage"),pageRotateCwButton:document.getElementById("pageRotateCw"),pageRotateCcwButton:document.getElementById("pageRotateCcw"),cursorSelectToolButton:document.getElementById("cursorSelectTool"),cursorHandToolButton:document.getElementById("cursorHandTool"),scrollVerticalButton:document.getElementById("scrollVertical"),scrollHorizontalButton:document.getElementById("scrollHorizontal"),scrollWrappedButton:document.getElementById("scrollWrapped"),spreadNoneButton:document.getElementById("spreadNone"),spreadOddButton:document.getElementById("spreadOdd"),spreadEvenButton:document.getElementById("spreadEven"),documentPropertiesButton:document.getElementById("documentProperties")},fullscreen:{contextFirstPage:document.getElementById("contextFirstPage"),contextLastPage:document.getElementById("contextLastPage"),contextPageRotateCw:document.getElementById("contextPageRotateCw"),contextPageRotateCcw:document.getElementById("contextPageRotateCcw")},sidebar:{outerContainer:document.getElementById("outerContainer"),viewerContainer:document.getElementById("viewerContainer"),toggleButton:document.getElementById("sidebarToggle"),thumbnailButton:document.getElementById("viewThumbnail"),outlineButton:document.getElementById("viewOutline"),attachmentsButton:document.getElementById("viewAttachments"),thumbnailView:document.getElementById("thumbnailView"),outlineView:document.getElementById("outlineView"),attachmentsView:document.getElementById("attachmentsView")},sidebarResizer:{outerContainer:document.getElementById("outerContainer"),resizer:document.getElementById("sidebarResizer")},findBar:{bar:document.getElementById("findbar"),toggleButton:document.getElementById("viewFind"),findField:document.getElementById("findInput"),highlightAllCheckbox:document.getElementById("findHighlightAll"),caseSensitiveCheckbox:document.getElementById("findMatchCase"),entireWordCheckbox:document.getElementById("findEntireWord"),findMsg:document.getElementById("findMsg"),findResultsCount:document.getElementById("findResultsCount"),findPreviousButton:document.getElementById("findPrevious"),findNextButton:document.getElementById("findNext")},passwordOverlay:{overlayName:"passwordOverlay",container:document.getElementById("passwordOverlay"),label:document.getElementById("passwordText"),input:document.getElementById("password"),submitButton:document.getElementById("passwordSubmit"),cancelButton:document.getElementById("passwordCancel")},documentProperties:{overlayName:"documentPropertiesOverlay",container:document.getElementById("documentPropertiesOverlay"),closeButton:document.getElementById("documentPropertiesClose"),fields:{fileName:document.getElementById("fileNameField"),fileSize:document.getElementById("fileSizeField"),title:document.getElementById("titleField"),author:document.getElementById("authorField"),subject:document.getElementById("subjectField"),keywords:document.getElementById("keywordsField"),creationDate:document.getElementById("creationDateField"),modificationDate:document.getElementById("modificationDateField"),creator:document.getElementById("creatorField"),producer:document.getElementById("producerField"),version:document.getElementById("versionField"),pageCount:document.getElementById("pageCountField"),pageSize:document.getElementById("pageSizeField"),linearized:document.getElementById("linearizedField")}},errorWrapper:{container:document.getElementById("errorWrapper"),errorMessage:document.getElementById("errorMessage"),closeButton:document.getElementById("errorClose"),errorMoreInfo:document.getElementById("errorMoreInfo"),moreInfoButton:document.getElementById("errorShowMore"),lessInfoButton:document.getElementById("errorShowLess")},printContainer:document.getElementById("printContainer"),openFileInputName:"fileInput",debuggerScriptPath:"./debugger.js"};window.PDFViewerApplication=i.PDFViewerApplication,window.PDFViewerApplicationOptions=a.AppOptions;var t=document.createEvent("CustomEvent");t.initCustomEvent("webviewerloaded",!0,!0,{source:window});try{parent.document.dispatchEvent(t)}catch(n){console.error("webviewerloaded: ".concat(n)),document.dispatchEvent(t)}i.PDFViewerApplication.run(e)}i=n(1),a=n(3),n(33),n(38),"interactive"===document.readyState||"complete"===document.readyState?r():document.addEventListener("DOMContentLoaded",r,!0)},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.PDFPrintServiceFactory=t.DefaultExternalServices=t.PDFViewerApplication=void 0;var i=n(2),a=n(3),r=n(5),o=n(6),c=n(8),u=n(9),h=n(10),d=n(11),p=n(12),f=n(13),v=n(14),g=n(15),m=n(17),y=n(18),b=n(19),w=n(20),_=n(21),S=n(22),k=n(24),x=n(29),E=n(31),C=n(32),P=1e3,T="enablePermissions",L=-1,O=1,I=function(){function e(){throw Object(s.a)(this,e),new Error("Cannot initialize DefaultExternalServices.")}return Object(l.a)(e,null,[{key:"updateFindControlState",value:function(e){}},{key:"updateFindMatchesCount",value:function(e){}},{key:"initPassiveLoading",value:function(e){}},{key:"fallback",value:function(e,t){}},{key:"reportTelemetry",value:function(e){}},{key:"createDownloadManager",value:function(e){throw new Error("Not implemented: createDownloadManager")}},{key:"createPreferences",value:function(){throw new Error("Not implemented: createPreferences")}},{key:"createL10n",value:function(e){throw new Error("Not implemented: createL10n")}},{key:"supportsIntegratedFind",get:function(){return(0,r.shadow)(this,"supportsIntegratedFind",!1)}},{key:"supportsDocumentFonts",get:function(){return(0,r.shadow)(this,"supportsDocumentFonts",!0)}},{key:"supportedMouseWheelZoomModifierKeys",get:function(){return(0,r.shadow)(this,"supportedMouseWheelZoomModifierKeys",{ctrlKey:!0,metaKey:!0})}},{key:"isInAutomation",get:function(){return(0,r.shadow)(this,"isInAutomation",!1)}}]),e}();t.DefaultExternalServices=I;var M,N={initialBookmark:document.location.hash.substring(1),_initializedCapability:(0,r.createPromiseCapability)(),fellback:!1,appConfig:null,pdfDocument:null,pdfLoadingTask:null,printService:null,pdfViewer:null,pdfThumbnailViewer:null,pdfRenderingQueue:null,pdfPresentationMode:null,pdfDocumentProperties:null,pdfLinkService:null,pdfHistory:null,pdfSidebar:null,pdfSidebarResizer:null,pdfOutlineViewer:null,pdfAttachmentViewer:null,pdfCursorTools:null,store:null,downloadManager:null,overlayManager:null,preferences:null,toolbar:null,secondaryToolbar:null,eventBus:null,l10n:null,isInitialViewSet:!1,downloadComplete:!1,isViewerEmbedded:window.parent!==window,url:"",baseUrl:"",externalServices:I,_boundEvents:{},contentDispositionFilename:null,initialize:function(){var e=Object(qe.a)(Je().mark(function e(t){var n,i=this;return Je().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.preferences=this.externalServices.createPreferences(),this.appConfig=t,e.next=4,this._readPreferences();case 4:return e.next=6,this._parseHashParameters();case 6:return e.next=8,this._initializeL10n();case 8:return this.isViewerEmbedded&&a.AppOptions.get("externalLinkTarget")===r.LinkTarget.NONE&&a.AppOptions.set("externalLinkTarget",r.LinkTarget.TOP),e.next=11,this._initializeViewerComponents();case 11:this.bindEvents(),this.bindWindowEvents(),n=t.appContainer||document.documentElement,this.l10n.translate(n).then(function(){i.eventBus.dispatch("localized",{source:i})}),this._initializedCapability.resolve();case 16:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),_readPreferences:function(){var e=Object(qe.a)(Je().mark(function e(){var t,n;return Je().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.AppOptions.get("disablePreferences")){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.preferences.getAll();case 5:for(n in t=e.sent)a.AppOptions.set(n,t[n]);e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.error('_readPreferences: "'.concat(e.t0.message,'".'));case 12:case"end":return e.stop()}},e,this,[[2,9]])}));return function(){return e.apply(this,arguments)}}(),_parseHashParameters:function(){var e=Object(qe.a)(Je().mark(function e(){var t,n,r,o;return Je().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a.AppOptions.get("pdfBugEnabled")){e.next=2;break}return e.abrupt("return",void 0);case 2:if(t=document.location.hash.substring(1)){e.next=5;break}return e.abrupt("return",void 0);case 5:if(n=(0,i.parseQueryString)(t),r=[],"disableworker"in n&&"true"===n.disableworker&&r.push(F()),"disablerange"in n&&a.AppOptions.set("disableRange","true"===n.disablerange),"disablestream"in n&&a.AppOptions.set("disableStream","true"===n.disablestream),"disableautofetch"in n&&a.AppOptions.set("disableAutoFetch","true"===n.disableautofetch),"disablefontface"in n&&a.AppOptions.set("disableFontFace","true"===n.disablefontface),"disablehistory"in n&&a.AppOptions.set("disableHistory","true"===n.disablehistory),"webgl"in n&&a.AppOptions.set("enableWebGL","true"===n.webgl),"verbosity"in n&&a.AppOptions.set("verbosity",0|n.verbosity),!("textlayer"in n)){e.next=23;break}e.t0=n.textlayer,e.next="off"===e.t0?18:"visible"===e.t0?20:"shadow"===e.t0?20:"hover"===e.t0?20:23;break;case 18:return a.AppOptions.set("textLayerMode",i.TextLayerMode.DISABLE),e.abrupt("break",23);case 20:return this.appConfig.viewerContainer.classList.add("textLayer-"+n.textlayer),e.abrupt("break",23);case 23:return"pdfbug"in n&&(a.AppOptions.set("pdfBug",!0),a.AppOptions.set("fontExtraProperties",!0),o=n.pdfbug.split(","),r.push(j(o))),"locale"in n&&a.AppOptions.set("locale",n.locale),e.abrupt("return",Promise.all(r).catch(function(e){console.error('_parseHashParameters: "'.concat(e.message,'".'))}));case 26:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),_initializeL10n:function(){var e=Object(qe.a)(Je().mark(function e(){var t;return Je().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.l10n=this.externalServices.createL10n({locale:a.AppOptions.get("locale")}),e.next=3,this.l10n.getDirection();case 3:t=e.sent,document.getElementsByTagName("html")[0].dir=t;case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),_initializeViewerComponents:function(){var e=Object(qe.a)(Je().mark(function e(){var t,n,r,s,l,C,P,T;return Je().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=this.appConfig,n=t.eventBus||new i.EventBus({isInAutomation:this.externalServices.isInAutomation}),this.eventBus=n,this.overlayManager=new h.OverlayManager,(r=new c.PDFRenderingQueue).onIdle=this.cleanup.bind(this),this.pdfRenderingQueue=r,s=new y.PDFLinkService({eventBus:n,externalLinkTarget:a.AppOptions.get("externalLinkTarget"),externalLinkRel:a.AppOptions.get("externalLinkRel"),ignoreDestinationZoom:a.AppOptions.get("ignoreDestinationZoom")}),this.pdfLinkService=s,l=this.externalServices.createDownloadManager({disableCreateObjectURL:a.AppOptions.get("disableCreateObjectURL")}),this.downloadManager=l,C=new g.PDFFindController({linkService:s,eventBus:n}),this.findController=C,P=t.mainContainer,T=t.viewerContainer,this.pdfViewer=new k.PDFViewer({container:P,viewer:T,eventBus:n,renderingQueue:r,linkService:s,downloadManager:l,findController:C,renderer:a.AppOptions.get("renderer"),enableWebGL:a.AppOptions.get("enableWebGL"),l10n:this.l10n,textLayerMode:a.AppOptions.get("textLayerMode"),imageResourcesPath:a.AppOptions.get("imageResourcesPath"),renderInteractiveForms:a.AppOptions.get("renderInteractiveForms"),enablePrintAutoRotate:a.AppOptions.get("enablePrintAutoRotate"),useOnlyCssZoom:a.AppOptions.get("useOnlyCssZoom"),maxCanvasPixels:a.AppOptions.get("maxCanvasPixels")}),r.setViewer(this.pdfViewer),s.setViewer(this.pdfViewer),this.pdfThumbnailViewer=new S.PDFThumbnailViewer({container:t.sidebar.thumbnailView,renderingQueue:r,linkService:s,l10n:this.l10n}),r.setThumbnailViewer(this.pdfThumbnailViewer),this.pdfHistory=new m.PDFHistory({linkService:s,eventBus:n}),s.setHistory(this.pdfHistory),this.supportsIntegratedFind||(this.findBar=new v.PDFFindBar(t.findBar,n,this.l10n)),this.pdfDocumentProperties=new f.PDFDocumentProperties(t.documentProperties,this.overlayManager,n,this.l10n),this.pdfCursorTools=new o.PDFCursorTools({container:P,eventBus:n,cursorToolOnLoad:a.AppOptions.get("cursorToolOnLoad")}),this.toolbar=new E.Toolbar(t.toolbar,n,this.l10n),this.secondaryToolbar=new x.SecondaryToolbar(t.secondaryToolbar,P,n),this.supportsFullscreen&&(this.pdfPresentationMode=new w.PDFPresentationMode({container:P,pdfViewer:this.pdfViewer,eventBus:n,contextMenuItems:t.fullscreen})),this.passwordPrompt=new d.PasswordPrompt(t.passwordOverlay,this.overlayManager,this.l10n),this.pdfOutlineViewer=new b.PDFOutlineViewer({container:t.sidebar.outlineView,eventBus:n,linkService:s}),this.pdfAttachmentViewer=new p.PDFAttachmentViewer({container:t.sidebar.attachmentsView,eventBus:n,downloadManager:l}),this.pdfSidebar=new u.PDFSidebar({elements:t.sidebar,pdfViewer:this.pdfViewer,pdfThumbnailViewer:this.pdfThumbnailViewer,eventBus:n,l10n:this.l10n}),this.pdfSidebar.onToggled=this.forceRendering.bind(this),this.pdfSidebarResizer=new _.PDFSidebarResizer(t.sidebarResizer,n,this.l10n);case 34:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),run:function(e){this.initialize(e).then(U)},get initialized(){return this._initializedCapability.settled},get initializedPromise(){return this._initializedCapability.promise},zoomIn:function(e){if(!this.pdfViewer.isInPresentationMode){var t=this.pdfViewer.currentScale;do{t=(1.1*t).toFixed(2),t=Math.ceil(10*t)/10,t=Math.min(i.MAX_SCALE,t)}while(--e>0&&t<i.MAX_SCALE);this.pdfViewer.currentScaleValue=t}},zoomOut:function(e){if(!this.pdfViewer.isInPresentationMode){var t=this.pdfViewer.currentScale;do{t=(t/1.1).toFixed(2),t=Math.floor(10*t)/10,t=Math.max(i.MIN_SCALE,t)}while(--e>0&&t>i.MIN_SCALE);this.pdfViewer.currentScaleValue=t}},zoomReset:function(){this.pdfViewer.isInPresentationMode||(this.pdfViewer.currentScaleValue=i.DEFAULT_SCALE_VALUE)},get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0},get page(){return this.pdfViewer.currentPageNumber},set page(e){this.pdfViewer.currentPageNumber=e},get printing(){return!!this.printService},get supportsPrinting(){return Ie.instance.supportsPrinting},get supportsFullscreen(){var e,t=document.documentElement;return e=!!(t.requestFullscreen||t.mozRequestFullScreen||t.webkitRequestFullScreen||t.msRequestFullscreen),!1!==document.fullscreenEnabled&&!1!==document.mozFullScreenEnabled&&!1!==document.webkitFullscreenEnabled&&!1!==document.msFullscreenEnabled||(e=!1),(0,r.shadow)(this,"supportsFullscreen",e)},get supportsIntegratedFind(){return this.externalServices.supportsIntegratedFind},get supportsDocumentFonts(){return this.externalServices.supportsDocumentFonts},get loadingBar(){var e=new i.ProgressBar("#loadingBar");return(0,r.shadow)(this,"loadingBar",e)},get supportedMouseWheelZoomModifierKeys(){return this.externalServices.supportedMouseWheelZoomModifierKeys},initPassiveLoading:function(){throw new Error("Not implemented: initPassiveLoading")},setTitleUsingUrl:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.url=e,this.baseUrl=e.split("#")[0];var t=(0,i.getPDFFileNameFromURL)(e,"");if(!t)try{t=decodeURIComponent((0,r.getFilenameFromUrl)(e))||e}catch(n){t=e}this.setTitle(t)},setTitle:function(e){this.isViewerEmbedded||(document.title=e)},close:function(){var e=Object(qe.a)(Je().mark(function e(){var t;return Je().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.appConfig.errorWrapper.container.setAttribute("hidden","true"),this.pdfLoadingTask){e.next=4;break}return e.abrupt("return",void 0);case 4:return t=this.pdfLoadingTask.destroy(),this.pdfLoadingTask=null,this.pdfDocument&&(this.pdfDocument=null,this.pdfThumbnailViewer.setDocument(null),this.pdfViewer.setDocument(null),this.pdfLinkService.setDocument(null),this.pdfDocumentProperties.setDocument(null)),H(),this.store=null,this.isInitialViewSet=!1,this.downloadComplete=!1,this.url="",this.baseUrl="",this.contentDispositionFilename=null,this.pdfSidebar.reset(),this.pdfOutlineViewer.reset(),this.pdfAttachmentViewer.reset(),this.pdfHistory&&this.pdfHistory.reset(),this.findBar&&this.findBar.reset(),this.toolbar.reset(),this.secondaryToolbar.reset(),"undefined"!==typeof PDFBug&&PDFBug.cleanup(),e.abrupt("return",t);case 23:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),open:function(){var e=Object(qe.a)(Je().mark(function e(t,n){var i,o,s,l,c,u,h,d,p,f=this;return Je().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.pdfLoadingTask){e.next=3;break}return e.next=3,this.close();case 3:for(o in i=a.AppOptions.getAll(a.OptionKind.WORKER))r.GlobalWorkerOptions[o]=i[o];for(c in s=Object.create(null),"string"===typeof t?(this.setTitleUsingUrl(t),s.url=t):t&&"byteLength"in t?s.data=t:t.url&&t.originalUrl&&(this.setTitleUsingUrl(t.originalUrl),s.url=t.url),l=a.AppOptions.getAll(a.OptionKind.API))u=l[c],s[c]=u;if(n)for(h in n)d=n[h],"length"===h&&this.pdfDocumentProperties.setFileSize(d),s[h]=d;return p=(0,r.getDocument)(s),this.pdfLoadingTask=p,p.onPassword=function(e,t){f.pdfLinkService.externalLinkEnabled=!1,f.passwordPrompt.setUpdateCallback(e,t),f.passwordPrompt.open()},p.onProgress=function(e){var t=e.loaded,n=e.total;f.progress(t/n)},p.onUnsupportedFeature=this.fallback.bind(this),e.abrupt("return",p.promise.then(function(e){f.load(e)},function(e){if(p===f.pdfLoadingTask){var t=e&&e.message;return(e instanceof r.InvalidPDFException?f.l10n.get("invalid_file_error",null,"Invalid or corrupted PDF file."):e instanceof r.MissingPDFException?f.l10n.get("missing_file_error",null,"Missing PDF file."):e instanceof r.UnexpectedResponseException?f.l10n.get("unexpected_response_error",null,"Unexpected server response."):f.l10n.get("loading_error",null,"An error occurred while loading the PDF.")).then(function(n){throw f.error(n,{message:t}),e})}}));case 16:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),download:function(){var e=this;function t(){r.downloadUrl(n,a)}var n=this.baseUrl,a=this.contentDispositionFilename||(0,i.getPDFFileNameFromURL)(this.url),r=this.downloadManager;r.onerror=function(t){e.error("PDF failed to download: ".concat(t))},this.pdfDocument&&this.downloadComplete?this.pdfDocument.getData().then(function(e){var t=new Blob([e],{type:"application/pdf"});r.download(t,n,a)}).catch(t):t()},fallback:function(e){this.fellback||(this.fellback=!0,this.externalServices.fallback({featureId:e,url:this.baseUrl},function(e){e&&N.download()}))},error:function(e,t){var n=[this.l10n.get("error_version_info",{version:r.version||"?",build:r.build||"?"},"PDF.js v{{version}} (build: {{build}})")];t&&(n.push(this.l10n.get("error_message",{message:t.message},"Message: {{message}}")),t.stack?n.push(this.l10n.get("error_stack",{stack:t.stack},"Stack: {{stack}}")):(t.filename&&n.push(this.l10n.get("error_file",{file:t.filename},"File: {{file}}")),t.lineNumber&&n.push(this.l10n.get("error_line",{line:t.lineNumber},"Line: {{line}}"))));var a=this.appConfig.errorWrapper,o=a.container;o.removeAttribute("hidden"),a.errorMessage.textContent=e;var s=a.closeButton;s.onclick=function(){o.setAttribute("hidden","true")};var l=a.errorMoreInfo,c=a.moreInfoButton,u=a.lessInfoButton;c.onclick=function(){l.removeAttribute("hidden"),c.setAttribute("hidden","true"),u.removeAttribute("hidden"),l.style.height=l.scrollHeight+"px"},u.onclick=function(){l.setAttribute("hidden","true"),c.removeAttribute("hidden"),u.setAttribute("hidden","true")},c.oncontextmenu=i.noContextMenuHandler,u.oncontextmenu=i.noContextMenuHandler,s.oncontextmenu=i.noContextMenuHandler,c.removeAttribute("hidden"),u.setAttribute("hidden","true"),Promise.all(n).then(function(e){l.value=e.join("\n")})},progress:function(e){var t=this;if(!this.downloadComplete){var n=Math.round(100*e);if(n>this.loadingBar.percent||isNaN(n))this.loadingBar.percent=n,(this.pdfDocument?this.pdfDocument.loadingParams.disableAutoFetch:a.AppOptions.get("disableAutoFetch"))&&n&&(this.disableAutoFetchLoadingBarTimeout&&(clearTimeout(this.disableAutoFetchLoadingBarTimeout),this.disableAutoFetchLoadingBarTimeout=null),this.loadingBar.show(),this.disableAutoFetchLoadingBarTimeout=setTimeout(function(){t.loadingBar.hide(),t.disableAutoFetchLoadingBarTimeout=null},5e3))}},load:function(e){var t=this;this.pdfDocument=e,e.getDownloadInfo().then(function(){t.downloadComplete=!0,t.loadingBar.hide(),l.then(function(){t.eventBus.dispatch("documentloaded",{source:t})})});var n=e.getPageLayout().catch(function(){}),r=e.getPageMode().catch(function(){}),o=e.getOpenAction().catch(function(){});this.toolbar.setPagesCount(e.numPages,!1),this.secondaryToolbar.setPagesCount(e.numPages),this.pdfLinkService.setDocument(e,null),this.pdfDocumentProperties.setDocument(e,this.url);var s=this.pdfViewer;s.setDocument(e);var l=s.firstPagePromise,c=s.onePageRendered,h=s.pagesPromise;this.pdfThumbnailViewer.setDocument(e);var d=(this.store=new C.ViewHistory(e.fingerprint)).getMultiple({page:null,zoom:i.DEFAULT_SCALE_VALUE,scrollLeft:"0",scrollTop:"0",rotation:null,sidebarView:u.SidebarView.UNKNOWN,scrollMode:i.ScrollMode.UNKNOWN,spreadMode:i.SpreadMode.UNKNOWN}).catch(function(){return Object.create(null)});l.then(function(l){t.loadingBar.setWidth(t.appConfig.viewerContainer),Promise.all([i.animationStarted,d,n,r,o]).then(function(){var n=Object(qe.a)(Je().mark(function n(r){var o,l,c,d,p,f,v,g,m,y,b,w,_;return Je().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return o=Object(Xe.a)(r,5),o[0],l=o[1],c=o[2],d=o[3],p=o[4],f=a.AppOptions.get("viewOnLoad"),t._initializePdfHistory({fingerprint:e.fingerprint,viewOnLoad:f,initialDest:p&&p.dest}),v=t.initialBookmark,g=a.AppOptions.get("defaultZoomValue"),m=g?"zoom=".concat(g):null,y=null,b=a.AppOptions.get("sidebarViewOnLoad"),w=a.AppOptions.get("scrollModeOnLoad"),_=a.AppOptions.get("spreadModeOnLoad"),l.page&&f!==O&&(m="page=".concat(l.page,"&zoom=").concat(g||l.zoom,",")+"".concat(l.scrollLeft,",").concat(l.scrollTop),y=parseInt(l.rotation,10),b===u.SidebarView.UNKNOWN&&(b=0|l.sidebarView),w===i.ScrollMode.UNKNOWN&&(w=0|l.scrollMode),_===i.SpreadMode.UNKNOWN&&(_=0|l.spreadMode)),d&&b===u.SidebarView.UNKNOWN&&(b=Oe(d)),c&&_===i.SpreadMode.UNKNOWN&&(_=Le(c)),t.setInitialView(m,{rotation:y,sidebarView:b,scrollMode:w,spreadMode:_}),t.eventBus.dispatch("documentinit",{source:t}),t.isViewerEmbedded||s.focus(),t._initializePermissions(e),n.next=19,Promise.race([h,new Promise(function(e){setTimeout(e,1e4)})]);case 19:if(v||m){n.next=21;break}return n.abrupt("return");case 21:if(!s.hasEqualPageSizes){n.next=23;break}return n.abrupt("return");case 23:t.initialBookmark=v,s.currentScaleValue=s.currentScaleValue,t.setInitialView(m);case 26:case"end":return n.stop()}},n)}));return function(e){return n.apply(this,arguments)}}()).catch(function(){t.setInitialView()}).then(function(){s.update()})}),h.then(function(){t._initializeAutoPrint(e,o)}),c.then(function(){e.getOutline().then(function(e){t.pdfOutlineViewer.render({outline:e})}),e.getAttachments().then(function(e){t.pdfAttachmentViewer.render({attachments:e})})}),this._initializePageLabels(e),this._initializeMetadata(e)},_initializeAutoPrint:function(){var e=Object(qe.a)(Je().mark(function e(t,n){var a,o,s,l,c,u,h,d,p=this;return Je().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([n,t.getJavaScript()]);case 2:if(a=e.sent,o=Object(Xe.a)(a,2),s=o[0],l=o[1],t===this.pdfDocument){e.next=8;break}return e.abrupt("return");case 8:if(c=!1,s&&"Print"===s.action&&(c=!0),!l){e.next=31;break}if(l.some(function(e){return!!e&&(console.warn("Warning: JavaScript is not supported"),p.fallback(r.UNSUPPORTED_FEATURES.javaScript),!0)}),c){e.next=31;break}u=Qe(l),e.prev=14,u.s();case 16:if((h=u.n()).done){e.next=23;break}if(!(d=h.value)||!i.AutoPrintRegExp.test(d)){e.next=21;break}return c=!0,e.abrupt("break",23);case 21:e.next=16;break;case 23:e.next=28;break;case 25:e.prev=25,e.t0=e.catch(14),u.e(e.t0);case 28:return e.prev=28,u.f(),e.finish(28);case 31:if(this.supportsPrinting){e.next=33;break}return e.abrupt("return");case 33:c&&setTimeout(function(){window.print()});case 34:case"end":return e.stop()}},e,this,[[14,25,28,31]])}));return function(t,n){return e.apply(this,arguments)}}(),_initializeMetadata:function(){var e=Object(qe.a)(Je().mark(function e(t){var n,i,a,o,s,l,c,u,h,d,p,f;return Je().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getMetadata();case 2:if(n=e.sent,i=n.info,a=n.metadata,o=n.contentDispositionFilename,t===this.pdfDocument){e.next=8;break}return e.abrupt("return");case 8:this.documentInfo=i,this.metadata=a,this.contentDispositionFilename=o,console.log("PDF ".concat(t.fingerprint," [").concat(i.PDFFormatVersion," ")+"".concat((i.Producer||"-").trim()," / ").concat((i.Creator||"-").trim(),"] ")+"(PDF.js: ".concat(r.version||"-")+"".concat(this.pdfViewer.enableWebGL?" [WebGL]":"",")")),(l=i&&i.Title)&&(s=l),(c=a&&a.get("dc:title"))&&("Untitled"===c||/[\uFFF0-\uFFFF]/g.test(c)||(s=c)),s?this.setTitle("".concat(s," - ").concat(o||document.title)):o&&this.setTitle(o),i.IsAcroFormPresent&&(console.warn("Warning: AcroForm/XFA is not supported"),this.fallback(r.UNSUPPORTED_FEATURES.forms)),u="other",["1.0","1.1","1.2","1.3","1.4","1.5","1.6","1.7","1.8","1.9","2.0","2.1","2.2","2.3"].includes(i.PDFFormatVersion)&&(u="v".concat(i.PDFFormatVersion.replace(".","_"))),h="other",d=["acrobat distiller","acrobat pdfwriter","adobe livecycle","adobe pdf library","adobe photoshop","ghostscript","tcpdf","cairo","dvipdfm","dvips","pdftex","pdfkit","itext","prince","quarkxpress","mac os x","microsoft","openoffice","oracle","luradocument","pdf-xchange","antenna house","aspose.cells","fpdf"],i.Producer&&(p=i.Producer.toLowerCase(),d.some(function(e){return!!p.includes(e)&&(h=e.replace(/[ .\-]/g,"_"),!0)})),f=null,i.IsAcroFormPresent&&(f=i.IsXFAPresent?"xfa":"acroform"),this.externalServices.reportTelemetry({type:"documentInfo",version:u,generator:h,formType:f});case 27:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),_initializePageLabels:function(){var e=Object(qe.a)(Je().mark(function e(t){var n,i,r,o,s,l;return Je().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getPageLabels();case 2:if(n=e.sent,t===this.pdfDocument){e.next=5;break}return e.abrupt("return");case 5:if(n&&!a.AppOptions.get("disablePageLabels")){e.next=7;break}return e.abrupt("return");case 7:if((i=n.length)===this.pagesCount){e.next=11;break}return console.error("The number of Page Labels does not match the number of pages in the document."),e.abrupt("return");case 11:for(r=0;r<i&&n[r]===(r+1).toString();)r++;if(r!==i){e.next=15;break}return e.abrupt("return");case 15:o=this.pdfViewer,s=this.pdfThumbnailViewer,l=this.toolbar,o.setPageLabels(n),s.setPageLabels(n),l.setPagesCount(i,!0),l.setPageNumber(o.currentPageNumber,o.currentPageLabel);case 20:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),_initializePdfHistory:function(e){var t=e.fingerprint,n=e.viewOnLoad,i=e.initialDest,r=void 0===i?null:i;this.isViewerEmbedded||a.AppOptions.get("disableHistory")||(this.pdfHistory.initialize({fingerprint:t,resetHistory:n===O,updateUrl:a.AppOptions.get("historyUpdateUrl")}),this.pdfHistory.initialBookmark&&(this.initialBookmark=this.pdfHistory.initialBookmark,this.initialRotation=this.pdfHistory.initialRotation),r&&!this.initialBookmark&&n===L&&(this.initialBookmark=JSON.stringify(r),this.pdfHistory.push({explicitDest:r,pageNumber:null})))},_initializePermissions:function(){var e=Object(qe.a)(Je().mark(function e(t){var n;return Je().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getPermissions();case 2:if(n=e.sent,t===this.pdfDocument){e.next=5;break}return e.abrupt("return");case 5:if(n&&a.AppOptions.get("enablePermissions")){e.next=7;break}return e.abrupt("return");case 7:n.includes(r.PermissionFlag.COPY)||this.appConfig.viewerContainer.classList.add(T);case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),setInitialView:function(e){var t,n,a=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=r.rotation,s=r.sidebarView,l=r.scrollMode,c=r.spreadMode,u=function(e){(0,i.isValidRotation)(e)&&(a.pdfViewer.pagesRotation=e)};this.isInitialViewSet=!0,this.pdfSidebar.setInitialView(s),t=l,n=c,(0,i.isValidScrollMode)(t)&&(a.pdfViewer.scrollMode=t),(0,i.isValidSpreadMode)(n)&&(a.pdfViewer.spreadMode=n),this.initialBookmark?(u(this.initialRotation),delete this.initialRotation,this.pdfLinkService.setHash(this.initialBookmark),this.initialBookmark=null):e&&(u(o),this.pdfLinkService.setHash(e)),this.toolbar.setPageNumber(this.pdfViewer.currentPageNumber,this.pdfViewer.currentPageLabel),this.secondaryToolbar.setPageNumber(this.pdfViewer.currentPageNumber),this.pdfViewer.currentScaleValue||(this.pdfViewer.currentScaleValue=i.DEFAULT_SCALE_VALUE)},cleanup:function(){},forceRendering:function(){this.pdfRenderingQueue.printing=this.printing,this.pdfRenderingQueue.isThumbnailViewEnabled=this.pdfSidebar.isThumbnailViewVisible,this.pdfRenderingQueue.renderHighestPriority()},beforePrint:function(){var e=this;if(!this.printService)if(this.supportsPrinting)if(this.pdfViewer.pageViewsReady){var t=this.pdfViewer.getPagesOverview(),n=this.appConfig.printContainer,i=Ie.instance.createPrintService(this.pdfDocument,t,n,this.l10n);this.printService=i,this.forceRendering(),i.layout(),this.externalServices.reportTelemetry({type:"print"})}else this.l10n.get("printing_not_ready",null,"Warning: The PDF is not fully loaded for printing.").then(function(e){window.alert(e)});else this.l10n.get("printing_not_supported",null,"Warning: Printing is not fully supported by this browser.").then(function(t){e.error(t)})},afterPrint:function(){this.printService&&(this.printService.destroy(),this.printService=null),this.forceRendering()},rotatePages:function(e){if(this.pdfDocument){var t=(this.pdfViewer.pagesRotation+360+e)%360;this.pdfViewer.pagesRotation=t}},requestPresentationMode:function(){this.pdfPresentationMode&&this.pdfPresentationMode.request()},bindEvents:function(){var e=this.eventBus,t=this._boundEvents;t.beforePrint=this.beforePrint.bind(this),t.afterPrint=this.afterPrint.bind(this),e._on("resize",Q),e._on("hashchange",$),e._on("beforeprint",t.beforePrint),e._on("afterprint",t.afterPrint),e._on("pagerendered",z),e._on("updateviewarea",Y),e._on("pagechanging",Se),e._on("scalechanging",we),e._on("rotationchanging",_e),e._on("sidebarviewchanged",q),e._on("pagemode",W),e._on("namedaction",G),e._on("presentationmodechanged",X),e._on("presentationmode",J),e._on("print",ee),e._on("download",te),e._on("firstpage",ne),e._on("lastpage",ie),e._on("nextpage",ae),e._on("previouspage",re),e._on("zoomin",oe),e._on("zoomout",se),e._on("zoomreset",le),e._on("pagenumberchanged",ce),e._on("scalechanged",ue),e._on("rotatecw",he),e._on("rotateccw",de),e._on("switchscrollmode",pe),e._on("scrollmodechanged",K),e._on("switchspreadmode",fe),e._on("spreadmodechanged",Z),e._on("documentproperties",ve),e._on("find",ge),e._on("findfromurlhash",me),e._on("updatefindmatchescount",ye),e._on("updatefindcontrolstate",be),e._on("fileinputchange",A),e._on("openfile",R)},bindWindowEvents:function(){var e=this.eventBus,t=this._boundEvents;t.windowResize=function(){e.dispatch("resize",{source:window})},t.windowHashChange=function(){e.dispatch("hashchange",{source:window,hash:document.location.hash.substring(1)})},t.windowBeforePrint=function(){e.dispatch("beforeprint",{source:window})},t.windowAfterPrint=function(){e.dispatch("afterprint",{source:window})},window.addEventListener("visibilitychange",ke),window.addEventListener("wheel",Ce,{passive:!1}),window.addEventListener("click",Pe),window.addEventListener("keydown",Te),window.addEventListener("resize",t.windowResize),window.addEventListener("hashchange",t.windowHashChange),window.addEventListener("beforeprint",t.windowBeforePrint),window.addEventListener("afterprint",t.windowAfterPrint)},unbindEvents:function(){var e=this.eventBus,t=this._boundEvents;e._off("resize",Q),e._off("hashchange",$),e._off("beforeprint",t.beforePrint),e._off("afterprint",t.afterPrint),e._off("pagerendered",z),e._off("updateviewarea",Y),e._off("pagechanging",Se),e._off("scalechanging",we),e._off("rotationchanging",_e),e._off("sidebarviewchanged",q),e._off("pagemode",W),e._off("namedaction",G),e._off("presentationmodechanged",X),e._off("presentationmode",J),e._off("print",ee),e._off("download",te),e._off("firstpage",ne),e._off("lastpage",ie),e._off("nextpage",ae),e._off("previouspage",re),e._off("zoomin",oe),e._off("zoomout",se),e._off("zoomreset",le),e._off("pagenumberchanged",ce),e._off("scalechanged",ue),e._off("rotatecw",he),e._off("rotateccw",de),e._off("switchscrollmode",pe),e._off("scrollmodechanged",K),e._off("switchspreadmode",fe),e._off("spreadmodechanged",Z),e._off("documentproperties",ve),e._off("find",ge),e._off("findfromurlhash",me),e._off("updatefindmatchescount",ye),e._off("updatefindcontrolstate",be),e._off("fileinputchange",A),e._off("openfile",R),t.beforePrint=null,t.afterPrint=null},unbindWindowEvents:function(){var e=this._boundEvents;window.removeEventListener("visibilitychange",ke),window.removeEventListener("wheel",Ce,{passive:!1}),window.removeEventListener("click",Pe),window.removeEventListener("keydown",Te),window.removeEventListener("resize",e.windowResize),window.removeEventListener("hashchange",e.windowHashChange),window.removeEventListener("beforeprint",e.windowBeforePrint),window.removeEventListener("afterprint",e.windowAfterPrint),e.windowResize=null,e.windowHashChange=null,e.windowBeforePrint=null,e.windowAfterPrint=null}};t.PDFViewerApplication=N;var B,A,R,D=["null","http://mozilla.github.io","https://mozilla.github.io"];function F(){return V.apply(this,arguments)}function V(){return(V=Object(qe.a)(Je().mark(function e(){return Je().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r.GlobalWorkerOptions.workerSrc||(r.GlobalWorkerOptions.workerSrc=a.AppOptions.get("workerSrc")),e.abrupt("return",(0,r.loadScript)(r.PDFWorker.getWorkerSrc()));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}function j(e){var t=N.appConfig;return(0,r.loadScript)(t.debuggerScriptPath).then(function(){PDFBug.enable(e),PDFBug.init({OPS:r.OPS},t.mainContainer)})}function U(){var e,t=N.appConfig,n=document.location.search.substring(1),r=(0,i.parseQueryString)(n);e="file"in r?r.file:a.AppOptions.get("defaultUrl"),M(e);var o=document.createElement("input");o.id=t.openFileInputName,o.className="fileInput",o.setAttribute("type","file"),o.oncontextmenu=i.noContextMenuHandler,document.body.appendChild(o),window.File&&window.FileReader&&window.FileList&&window.Blob?o.value=null:(t.toolbar.openFile.setAttribute("hidden","true"),t.secondaryToolbar.openFileButton.setAttribute("hidden","true")),o.addEventListener("change",function(e){var t=e.target.files;t&&0!==t.length&&N.eventBus.dispatch("fileinputchange",{source:this,fileInput:e.target})}),t.mainContainer.addEventListener("dragover",function(e){e.preventDefault(),e.dataTransfer.dropEffect="move"}),t.mainContainer.addEventListener("drop",function(e){e.preventDefault();var t=e.dataTransfer.files;t&&0!==t.length&&N.eventBus.dispatch("fileinputchange",{source:this,fileInput:e.dataTransfer})}),N.supportsDocumentFonts||(a.AppOptions.set("disableFontFace",!0),N.l10n.get("web_fonts_disabled",null,"Web fonts are disabled: unable to use embedded PDF fonts.").then(function(e){console.warn(e)})),N.supportsPrinting||(t.toolbar.print.classList.add("hidden"),t.secondaryToolbar.printButton.classList.add("hidden")),N.supportsFullscreen||(t.toolbar.presentationModeButton.classList.add("hidden"),t.secondaryToolbar.presentationModeButton.classList.add("hidden")),N.supportsIntegratedFind&&t.toolbar.viewFind.classList.add("hidden"),t.mainContainer.addEventListener("transitionend",function(e){e.target===this&&N.eventBus.dispatch("resize",{source:this})},!0);try{B(e)}catch(s){N.l10n.get("loading_error",null,"An error occurred while loading the PDF.").then(function(e){N.error(e,s)})}}function H(){var e=N.appConfig;e&&e.viewerContainer.classList.remove(T)}function z(e){var t=e.pageNumber,n=t-1,i=N.pdfViewer.getPageView(n);if(t===N.page&&N.toolbar.updateLoadingIndicatorState(!1),i){if(N.pdfSidebar.isThumbnailViewVisible)N.pdfThumbnailViewer.getThumbnail(n).setImage(i);"undefined"!==typeof Stats&&Stats.enabled&&i.stats&&Stats.add(t,i.stats),i.error&&N.l10n.get("rendering_error",null,"An error occurred while rendering the page.").then(function(e){N.error(e,i.error)}),N.externalServices.reportTelemetry({type:"pageInfo",timestamp:e.timestamp}),N.pdfDocument.getStats().then(function(e){N.externalServices.reportTelemetry({type:"documentStats",stats:e})})}}function W(e){var t,n=e.mode;switch(n){case"thumbs":t=u.SidebarView.THUMBS;break;case"bookmarks":case"outline":t=u.SidebarView.OUTLINE;break;case"attachments":t=u.SidebarView.ATTACHMENTS;break;case"none":t=u.SidebarView.NONE;break;default:return void console.error('Invalid "pagemode" hash parameter: '+n)}N.pdfSidebar.switchView(t,!0)}function G(e){switch(e.action){case"GoToPage":N.appConfig.toolbar.pageNumber.select();break;case"Find":N.supportsIntegratedFind||N.findBar.toggle()}}function X(e){var t=e.active,n=e.switchInProgress,a=i.PresentationModeState.NORMAL;n?a=i.PresentationModeState.CHANGING:t&&(a=i.PresentationModeState.FULLSCREEN),N.pdfViewer.presentationModeState=a}function q(e){N.pdfRenderingQueue.isThumbnailViewEnabled=N.pdfSidebar.isThumbnailViewVisible;var t=N.store;t&&N.isInitialViewSet&&t.set("sidebarView",e.view).catch(function(){})}function Y(e){var t=e.location,n=N.store;n&&N.isInitialViewSet&&n.setMultiple({page:t.pageNumber,zoom:t.scale,scrollLeft:t.left,scrollTop:t.top,rotation:t.rotation}).catch(function(){});var i=N.pdfLinkService.getAnchorUrl(t.pdfOpenParams);N.appConfig.toolbar.viewBookmark.href=i,N.appConfig.secondaryToolbar.viewBookmarkButton.href=i;var a=N.pdfViewer.getPageView(N.page-1).renderingState!==c.RenderingStates.FINISHED;N.toolbar.updateLoadingIndicatorState(a)}function K(e){var t=N.store;t&&N.isInitialViewSet&&t.set("scrollMode",e.mode).catch(function(){})}function Z(e){var t=N.store;t&&N.isInitialViewSet&&t.set("spreadMode",e.mode).catch(function(){})}function Q(){var e=N.pdfDocument,t=N.pdfViewer;if(e){var n=t.currentScaleValue;"auto"!==n&&"page-fit"!==n&&"page-width"!==n||(t.currentScaleValue=n),t.update()}}function $(e){var t=e.hash;t&&(N.isInitialViewSet?N.pdfHistory.popStateInProgress||N.pdfLinkService.setHash(t):N.initialBookmark=t)}function J(){N.requestPresentationMode()}function ee(){window.print()}function te(){N.download()}function ne(){N.pdfDocument&&(N.page=1)}function ie(){N.pdfDocument&&(N.page=N.pagesCount)}function ae(){N.page++}function re(){N.page--}function oe(){N.zoomIn()}function se(){N.zoomOut()}function le(){N.zoomReset()}function ce(e){var t=N.pdfViewer;""!==e.value&&(t.currentPageLabel=e.value),e.value!==t.currentPageNumber.toString()&&e.value!==t.currentPageLabel&&N.toolbar.setPageNumber(t.currentPageNumber,t.currentPageLabel)}function ue(e){N.pdfViewer.currentScaleValue=e.value}function he(){N.rotatePages(90)}function de(){N.rotatePages(-90)}function pe(e){N.pdfViewer.scrollMode=e.mode}function fe(e){N.pdfViewer.spreadMode=e.mode}function ve(){N.pdfDocumentProperties.open()}function ge(e){N.findController.executeCommand("find"+e.type,{query:e.query,phraseSearch:e.phraseSearch,caseSensitive:e.caseSensitive,entireWord:e.entireWord,highlightAll:e.highlightAll,findPrevious:e.findPrevious})}function me(e){N.findController.executeCommand("find",{query:e.query,phraseSearch:e.phraseSearch,caseSensitive:!1,entireWord:!1,highlightAll:!0,findPrevious:!1})}function ye(e){var t=e.matchesCount;N.supportsIntegratedFind?N.externalServices.updateFindMatchesCount(t):N.findBar.updateResultsCount(t)}function be(e){var t=e.state,n=e.previous,i=e.matchesCount;N.supportsIntegratedFind?N.externalServices.updateFindControlState({result:t,findPrevious:n,matchesCount:i}):N.findBar.updateUIState(t,n,i)}function we(e){N.toolbar.setPageScale(e.presetValue,e.scale),N.pdfViewer.update()}function _e(e){N.pdfThumbnailViewer.pagesRotation=e.pagesRotation,N.forceRendering(),N.pdfViewer.currentPageNumber=e.pageNumber}function Se(e){var t=e.pageNumber;if(N.toolbar.setPageNumber(t,e.pageLabel||null),N.secondaryToolbar.setPageNumber(t),N.pdfSidebar.isThumbnailViewVisible&&N.pdfThumbnailViewer.scrollThumbnailIntoView(t),"undefined"!==typeof Stats&&Stats.enabled){var n=N.pdfViewer.getPageView(t-1);n&&n.stats&&Stats.add(t,n.stats)}}function ke(e){"visible"===document.visibilityState&&Ee()}M=function(e){if(void 0!==e)try{var t=new URL(window.location.href).origin||"null";if(D.includes(t))return;var n=new URL(e,window.location.href),i=n.origin,a=n.protocol;if(i!==t&&"blob:"!==a)throw new Error("file origin does not match viewer's")}catch(o){var r=o&&o.message;throw N.l10n.get("loading_error",null,"An error occurred while loading the PDF.").then(function(e){N.error(e,{message:r})}),o}},B=function(e){if(e&&0===e.lastIndexOf("file:",0)){N.setTitleUsingUrl(e);var t=new XMLHttpRequest;return t.onload=function(){N.open(new Uint8Array(t.response))},t.open("GET",e),t.responseType="arraybuffer",void t.send()}e&&N.open(e)},A=function(e){if(!N.pdfViewer||!N.pdfViewer.isInPresentationMode){var t=e.fileInput.files[0];if(a.AppOptions.get("disableCreateObjectURL")){N.setTitleUsingUrl(t.name);var n=new FileReader;n.onload=function(e){var t=e.target.result;N.open(new Uint8Array(t))},n.readAsArrayBuffer(t)}else{var i=URL.createObjectURL(t);t.name&&(i={url:i,originalUrl:t.name}),N.open(i)}var r=N.appConfig;r.toolbar.viewBookmark.setAttribute("hidden","true"),r.secondaryToolbar.viewBookmarkButton.setAttribute("hidden","true"),r.toolbar.download.setAttribute("hidden","true"),r.secondaryToolbar.downloadButton.setAttribute("hidden","true")}},R=function(e){var t=N.appConfig.openFileInputName;document.getElementById(t).click()};var xe=null;function Ee(){xe&&clearTimeout(xe),xe=setTimeout(function(){xe=null},P)}function Ce(e){var t=N.pdfViewer,n=N.supportedMouseWheelZoomModifierKeys;if(!t.isInPresentationMode)if(e.ctrlKey&&n.ctrlKey||e.metaKey&&n.metaKey){if(e.preventDefault(),xe||"hidden"===document.visibilityState)return;var a=t.currentScale,r=3*(0,i.normalizeWheelEventDelta)(e);r<0?N.zoomOut(-r):N.zoomIn(r);var o=t.currentScale;if(a!==o){var s=o/a-1,l=t.container.getBoundingClientRect(),c=e.clientX-l.left,u=e.clientY-l.top;t.container.scrollLeft+=c*s,t.container.scrollTop+=u*s}}else Ee()}function Pe(e){if(N.secondaryToolbar.isOpen){var t=N.appConfig;(N.pdfViewer.containsElement(e.target)||t.toolbar.container.contains(e.target)&&e.target!==t.secondaryToolbar.toggleButton)&&N.secondaryToolbar.close()}}function Te(e){if(!N.overlayManager.active){var t=!1,n=!1,i=(e.ctrlKey?1:0)|(e.altKey?2:0)|(e.shiftKey?4:0)|(e.metaKey?8:0),a=N.pdfViewer,r=a&&a.isInPresentationMode;if(1===i||8===i||5===i||12===i)switch(e.keyCode){case 70:N.supportsIntegratedFind||(N.findBar.open(),t=!0);break;case 71:if(!N.supportsIntegratedFind){var s=N.findController.state;s&&N.findController.executeCommand("findagain",{query:s.query,phraseSearch:s.phraseSearch,caseSensitive:s.caseSensitive,entireWord:s.entireWord,highlightAll:s.highlightAll,findPrevious:5===i||12===i}),t=!0}break;case 61:case 107:case 187:case 171:r||N.zoomIn(),t=!0;break;case 173:case 109:case 189:r||N.zoomOut(),t=!0;break;case 48:case 96:r||(setTimeout(function(){N.zoomReset()}),t=!1);break;case 38:(r||N.page>1)&&(N.page=1,t=!0,n=!0);break;case 40:(r||N.page<N.pagesCount)&&(N.page=N.pagesCount,t=!0,n=!0)}var l=N.eventBus;if(1===i||8===i)switch(e.keyCode){case 83:l.dispatch("download",{source:window}),t=!0;break;case 79:l.dispatch("openfile",{source:window}),t=!0}if(3===i||10===i)switch(e.keyCode){case 80:N.requestPresentationMode(),t=!0;break;case 71:N.appConfig.toolbar.pageNumber.select(),t=!0}if(t)return n&&!r&&a.focus(),void e.preventDefault();var c=document.activeElement||document.querySelector(":focus"),u=c&&c.tagName.toUpperCase();if(!("INPUT"===u||"TEXTAREA"===u||"SELECT"===u||c&&c.isContentEditable)||27===e.keyCode){if(0===i){var h=0,d=!1;switch(e.keyCode){case 38:case 33:a.isVerticalScrollbarEnabled&&(d=!0),h=-1;break;case 8:r||(d=!0),h=-1;break;case 37:a.isHorizontalScrollbarEnabled&&(d=!0);case 75:case 80:h=-1;break;case 27:N.secondaryToolbar.isOpen&&(N.secondaryToolbar.close(),t=!0),!N.supportsIntegratedFind&&N.findBar.opened&&(N.findBar.close(),t=!0);break;case 40:case 34:a.isVerticalScrollbarEnabled&&(d=!0),h=1;break;case 13:case 32:r||(d=!0),h=1;break;case 39:a.isHorizontalScrollbarEnabled&&(d=!0);case 74:case 78:h=1;break;case 36:(r||N.page>1)&&(N.page=1,t=!0,n=!0);break;case 35:(r||N.page<N.pagesCount)&&(N.page=N.pagesCount,t=!0,n=!0);break;case 83:N.pdfCursorTools.switchTool(o.CursorTool.SELECT);break;case 72:N.pdfCursorTools.switchTool(o.CursorTool.HAND);break;case 82:N.rotatePages(90);break;case 115:N.pdfSidebar.toggle()}0===h||d&&"page-fit"!==a.currentScaleValue||(h>0?N.page<N.pagesCount&&N.page++:N.page>1&&N.page--,t=!0)}if(4===i)switch(e.keyCode){case 13:case 32:if(!r&&"page-fit"!==a.currentScaleValue)break;N.page>1&&N.page--,t=!0;break;case 82:N.rotatePages(-90)}t||r||(e.keyCode>=33&&e.keyCode<=40||32===e.keyCode&&"BUTTON"!==u)&&(n=!0),n&&!a.containsElement(c)&&a.focus(),t&&e.preventDefault()}}}function Le(e){switch(e){case"SinglePage":case"OneColumn":return i.SpreadMode.NONE;case"TwoColumnLeft":case"TwoPageLeft":return i.SpreadMode.ODD;case"TwoColumnRight":case"TwoPageRight":return i.SpreadMode.EVEN}return i.SpreadMode.NONE}function Oe(e){switch(e){case"UseNone":return u.SidebarView.NONE;case"UseThumbs":return u.SidebarView.THUMBS;case"UseOutlines":return u.SidebarView.OUTLINE;case"UseAttachments":return u.SidebarView.ATTACHMENTS}return u.SidebarView.NONE}var Ie={instance:{supportsPrinting:!1,createPrintService:function(){throw new Error("Not implemented: createPrintService")}}};t.PDFPrintServiceFactory=Ie},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.isValidRotation=function(e){return Number.isInteger(e)&&e%90===0},t.isValidScrollMode=function(e){return Number.isInteger(e)&&Object.values(i).includes(e)&&e!==i.UNKNOWN},t.isValidSpreadMode=function(e){return Number.isInteger(e)&&Object.values(a).includes(e)&&e!==a.UNKNOWN},t.isPortraitOrientation=function(e){return e.width<=e.height},t.clamp=f,t.getPDFFileNameFromURL=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"document.pdf";if("string"!==typeof e)return t;if(function(e){var t=0,n=e.length;for(;t<n&&""===e[t].trim();)t++;return"data:"===e.substring(t,t+5).toLowerCase()}(e))return console.warn('getPDFFileNameFromURL: ignoring "data:" URL for performance reasons.'),t;var n=/[^\/?#=]+\.pdf\b(?!.*\.pdf\b)/i,i=/^(?:(?:[^:]+:)?\/\/[^\/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/.exec(e),a=n.exec(i[1])||n.exec(i[2])||n.exec(i[3]);if(a&&(a=a[0]).includes("%"))try{a=n.exec(decodeURIComponent(a))[0]}catch(r){}return a||t},t.noContextMenuHandler=function(e){e.preventDefault()},t.parseQueryString=function(e){for(var t=e.split("&"),n=Object.create(null),i=0,a=t.length;i<a;++i){var r=t[i].split("="),o=r[0].toLowerCase(),s=r.length>1?r[1]:null;n[decodeURIComponent(o)]=decodeURIComponent(s)}return n},t.backtrackBeforeAllVisibleElements=u,t.getVisibleElements=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=e.scrollTop,r=a+e.clientHeight,o=e.scrollLeft,s=o+e.clientWidth;var l=[],h=t.length,d=0===h?0:c(t,i?function(e){var t=e.div;return t.offsetLeft+t.clientLeft+t.clientWidth>o}:function(e){var t=e.div;return t.offsetTop+t.clientTop+t.clientHeight>a});d>0&&d<h&&!i&&(d=u(d,t,a));for(var p=i?s:-1,f=d;f<h;f++){var v=t[f],g=v.div,m=g.offsetLeft+g.clientLeft,y=g.offsetTop+g.clientTop,b=g.clientWidth,w=g.clientHeight,_=m+b,S=y+w;if(-1===p)S>=r&&(p=S);else if((i?m:y)>p)break;if(!(S<=a||y>=r||_<=o||m>=s)){var k=Math.max(0,a-y)+Math.max(0,S-r),x=Math.max(0,o-m)+Math.max(0,_-s),E=(w-k)*(b-x)*100/w/b|0;l.push({id:v.id,x:m,y:y,view:v,percent:E})}}var C=l[0],P=l[l.length-1];n&&l.sort(function(e,t){var n=e.percent-t.percent;return Math.abs(n)>.001?-n:e.id-t.id});return{first:C,last:P,views:l}},t.roundToDivide=function(e,t){var n=e%t;return 0===n?e:Math.round(e-n+t)},t.getPageSizeInches=function(e){var t=e.view,n=e.userUnit,i=e.rotate,a=Object(Xe.a)(t,4),r=a[0],o=a[1],s=a[2],l=a[3],c=i%180!==0,u=(s-r)/72*n,h=(l-o)/72*n;return{width:c?h:u,height:c?u:h}},t.approximateFraction=function(e){if(Math.floor(e)===e)return[e,1];var t=1/e;if(t>8)return[1,8];if(Math.floor(t)===t)return[1,t];var n,i=e>1?t:e,a=0,r=1,o=1,s=1;for(;;){var l=a+o,c=r+s;if(c>8)break;i<=l/c?(o=l,s=c):(a=l,r=c)}n=i-a/r<o/s-i?i===e?[a,r]:[r,a]:i===e?[o,s]:[s,o];return n},t.getOutputScale=function(e){var t=window.devicePixelRatio||1,n=e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1,i=t/n;return{sx:i,sy:i,scaled:1!==i}},t.scrollIntoView=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=e.offsetParent;if(!i)return void console.error("offsetParent is not set -- cannot scroll");var a=e.offsetTop+e.clientTop,r=e.offsetLeft+e.clientLeft;for(;i.clientHeight===i.scrollHeight&&i.clientWidth===i.scrollWidth||n&&"hidden"===getComputedStyle(i).overflow;)if(i.dataset._scaleY&&(a/=i.dataset._scaleY,r/=i.dataset._scaleX),a+=i.offsetTop,r+=i.offsetLeft,!(i=i.offsetParent))return;t&&(void 0!==t.top&&(a+=t.top),void 0!==t.left&&(r+=t.left,i.scrollLeft=r));i.scrollTop=a},t.watchScroll=function(e,t){var n=function(n){a||(a=window.requestAnimationFrame(function(){a=null;var n=e.scrollLeft,r=i.lastX;n!==r&&(i.right=n>r),i.lastX=n;var o=e.scrollTop,s=i.lastY;o!==s&&(i.down=o>s),i.lastY=o,t(i)}))},i={right:!0,down:!0,lastX:e.scrollLeft,lastY:e.scrollTop,_eventHandler:n},a=null;return e.addEventListener("scroll",n,!0),i},t.binarySearchFirstItem=c,t.normalizeWheelEventDelta=function(e){var t=Math.sqrt(e.deltaX*e.deltaX+e.deltaY*e.deltaY),n=Math.atan2(e.deltaY,e.deltaX);-.25*Math.PI<n&&n<.75*Math.PI&&(t=-t);0===e.deltaMode?t/=900:1===e.deltaMode&&(t/=30);return t},t.waitOnEventOrTimeout=function(e){var t=e.target,n=e.name,i=e.delay,a=void 0===i?0:i;return new Promise(function(e,i){if("object"!==typeof t||!n||"string"!==typeof n||!(Number.isInteger(a)&&a>=0))throw new Error("waitOnEventOrTimeout - invalid parameters.");function r(i){t instanceof p?t._off(n,o):t.removeEventListener(n,o),l&&clearTimeout(l),e(i)}var o=r.bind(null,h.EVENT);t instanceof p?t._on(n,o):t.addEventListener(n,o);var s=r.bind(null,h.TIMEOUT),l=setTimeout(s,a)})},t.moveToEndOfArray=function(e,t){for(var n=[],i=e.length,a=0,r=0;r<i;++r)t(e[r])?n.push(e[r]):(e[a]=e[r],++a);for(var o=0;a<i;++o,++a)e[a]=n[o]},t.WaitOnType=t.animationStarted=t.ProgressBar=t.EventBus=t.NullL10n=t.SpreadMode=t.ScrollMode=t.TextLayerMode=t.RendererType=t.PresentationModeState=t.VERTICAL_PADDING=t.SCROLLBAR_PADDING=t.MAX_AUTO_SCALE=t.UNKNOWN_SCALE=t.MAX_SCALE=t.MIN_SCALE=t.DEFAULT_SCALE=t.DEFAULT_SCALE_VALUE=t.CSS_UNITS=t.AutoPrintRegExp=void 0;t.CSS_UNITS=96/72;t.DEFAULT_SCALE_VALUE="auto";t.DEFAULT_SCALE=1;t.MIN_SCALE=.1;t.MAX_SCALE=10;t.UNKNOWN_SCALE=0;t.MAX_AUTO_SCALE=1.25;t.SCROLLBAR_PADDING=40;t.VERTICAL_PADDING=5;t.PresentationModeState={UNKNOWN:0,NORMAL:1,CHANGING:2,FULLSCREEN:3};t.RendererType={CANVAS:"canvas",SVG:"svg"};t.TextLayerMode={DISABLE:0,ENABLE:1,ENABLE_ENHANCE:2};var i={UNKNOWN:-1,VERTICAL:0,HORIZONTAL:1,WRAPPED:2};t.ScrollMode=i;var a={UNKNOWN:-1,NONE:0,ODD:1,EVEN:2};t.SpreadMode=a;function r(e,t){return t?e.replace(/\{\{\s*(\w+)\s*\}\}/g,function(e,n){return n in t?t[n]:"{{"+n+"}}"}):e}t.AutoPrintRegExp=/\bprint\s*\(/;var o={getLanguage:function(){var e=Object(qe.a)(Je().mark(function e(){return Je().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return","en-us");case 1:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),getDirection:function(){var e=Object(qe.a)(Je().mark(function e(){return Je().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return","ltr");case 1:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),get:function(){var e=Object(qe.a)(Je().mark(function e(t,n,i){return Je().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",r(i,n));case 1:case"end":return e.stop()}},e)}));return function(t,n,i){return e.apply(this,arguments)}}(),translate:function(){var e=Object(qe.a)(Je().mark(function e(t){return Je().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()};function c(e,t){var n=0,i=e.length-1;if(i<0||!t(e[i]))return e.length;if(t(e[n]))return n;for(;n<i;){var a=n+i>>1;t(e[a])?i=a:n=a+1}return n}function u(e,t,n){if(e<2)return e;var i=t[e].div,a=i.offsetTop+i.clientTop;a>=n&&(a=(i=t[e-1].div).offsetTop+i.clientTop);for(var r=e-2;r>=0&&!((i=t[r].div).offsetTop+i.clientTop+i.clientHeight<=a);--r)e=r;return e}t.NullL10n=o;var h={EVENT:"event",TIMEOUT:"timeout"};t.WaitOnType=h;var d=new Promise(function(e){window.requestAnimationFrame(e)});t.animationStarted=d;var p=function(){function e(t){Object(s.a)(this,e),this._listeners=Object.create(null)}return Object(l.a)(e,[{key:"on",value:function(e,t){this._on(e,t,{external:!0})}},{key:"off",value:function(e,t){this._off(e,t,{external:!0})}},{key:"dispatch",value:function(e){var t=this._listeners[e];if(t&&0!==t.length){var n,i=Array.prototype.slice.call(arguments,1);t.slice(0).forEach(function(e){var t=e.listener;if(e.external)return n||(n=[]),void n.push(t);t.apply(null,i)}),n&&(n.forEach(function(e){e.apply(null,i)}),n=null)}}},{key:"_on",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=this._listeners[e];i||(this._listeners[e]=i=[]),i.push({listener:t,external:!0===(n&&n.external)})}},{key:"_off",value:function(e,t){arguments.length>2&&void 0!==arguments[2]&&arguments[2];var n=this._listeners[e];if(n)for(var i=0,a=n.length;i<a;i++)if(n[i].listener===t)return void n.splice(i,1)}}]),e}();function f(e,t,n){return Math.min(Math.max(e,t),n)}t.EventBus=p;var v=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.height,a=n.width,r=n.units;Object(s.a)(this,e),this.visible=!0,this.div=document.querySelector(t+" .progress"),this.bar=this.div.parentNode,this.height=i||100,this.width=a||100,this.units=r||"%",this.div.style.height=this.height+this.units,this.percent=0}return Object(l.a)(e,[{key:"_updateBar",value:function(){if(this._indeterminate)return this.div.classList.add("indeterminate"),void(this.div.style.width=this.width+this.units);this.div.classList.remove("indeterminate");var e=this.width*this._percent/100;this.div.style.width=e+this.units}},{key:"setWidth",value:function(e){if(e){var t=e.parentNode.offsetWidth-e.offsetWidth;t>0&&(this.bar.style.width="calc(100% - ".concat(t,"px)"))}}},{key:"hide",value:function(){this.visible&&(this.visible=!1,this.bar.classList.add("hidden"),document.body.classList.remove("loadingInProgress"))}},{key:"show",value:function(){this.visible||(this.visible=!0,document.body.classList.add("loadingInProgress"),this.bar.classList.remove("hidden"))}},{key:"percent",get:function(){return this._percent},set:function(e){this._indeterminate=isNaN(e),this._percent=f(e,0,100),this._updateBar()}}]),e}();t.ProgressBar=v},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.OptionKind=t.AppOptions=void 0;var i=n(4),a={VIEWER:2,API:4,WORKER:8,PREFERENCE:128};t.OptionKind=a;var r={cursorToolOnLoad:{value:0,kind:a.VIEWER+a.PREFERENCE},defaultUrl:{value:"example.pdf",kind:a.VIEWER},defaultZoomValue:{value:"",kind:a.VIEWER+a.PREFERENCE},disableCreateObjectURL:{value:!1,compatibility:i.viewerCompatibilityParams.disableCreateObjectURL,kind:a.VIEWER},disableHistory:{value:!1,kind:a.VIEWER},disablePageLabels:{value:!1,kind:a.VIEWER+a.PREFERENCE},enablePermissions:{value:!1,kind:a.VIEWER+a.PREFERENCE},enablePrintAutoRotate:{value:!1,kind:a.VIEWER+a.PREFERENCE},enableWebGL:{value:!1,kind:a.VIEWER+a.PREFERENCE},externalLinkRel:{value:"noopener noreferrer nofollow",kind:a.VIEWER},externalLinkTarget:{value:0,kind:a.VIEWER+a.PREFERENCE},historyUpdateUrl:{value:!1,kind:a.VIEWER+a.PREFERENCE},ignoreDestinationZoom:{value:!1,kind:a.VIEWER+a.PREFERENCE},imageResourcesPath:{value:"./images/",kind:a.VIEWER},maxCanvasPixels:{value:16777216,compatibility:i.viewerCompatibilityParams.maxCanvasPixels,kind:a.VIEWER},pdfBugEnabled:{value:!1,kind:a.VIEWER+a.PREFERENCE},printResolution:{value:150,kind:a.VIEWER},renderer:{value:"canvas",kind:a.VIEWER+a.PREFERENCE},renderInteractiveForms:{value:!1,kind:a.VIEWER+a.PREFERENCE},sidebarViewOnLoad:{value:-1,kind:a.VIEWER+a.PREFERENCE},scrollModeOnLoad:{value:-1,kind:a.VIEWER+a.PREFERENCE},spreadModeOnLoad:{value:-1,kind:a.VIEWER+a.PREFERENCE},textLayerMode:{value:1,kind:a.VIEWER+a.PREFERENCE},useOnlyCssZoom:{value:!1,kind:a.VIEWER+a.PREFERENCE},viewOnLoad:{value:0,kind:a.VIEWER+a.PREFERENCE},cMapPacked:{value:!0,kind:a.API},cMapUrl:{value:"../web/cmaps/",kind:a.API},disableAutoFetch:{value:!1,kind:a.API+a.PREFERENCE},disableFontFace:{value:!1,kind:a.API+a.PREFERENCE},disableRange:{value:!1,kind:a.API+a.PREFERENCE},disableStream:{value:!1,kind:a.API+a.PREFERENCE},docBaseUrl:{value:"",kind:a.API},fontExtraProperties:{value:!1,kind:a.API},isEvalSupported:{value:!0,kind:a.API},maxImageSize:{value:-1,kind:a.API},pdfBug:{value:!1,kind:a.API},verbosity:{value:1,kind:a.API},workerPort:{value:null,kind:a.WORKER},workerSrc:{value:"libs/pdf.worker.js",kind:a.WORKER}};r.disablePreferences={value:!1,kind:a.VIEWER},r.locale={value:"undefined"!==typeof navigator?navigator.language:"en-US",kind:a.VIEWER};var o=Object.create(null),c=function(){function e(){throw Object(s.a)(this,e),new Error("Cannot initialize AppOptions.")}return Object(l.a)(e,null,[{key:"get",value:function(e){var t=o[e];if(void 0!==t)return t;var n=r[e];return void 0!==n?n.compatibility||n.value:void 0}},{key:"getAll",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=Object.create(null);for(var n in r){var i=r[n];if(e){if(0===(e&i.kind))continue;if(e===a.PREFERENCE){var s=i.value,l=typeof s;if("boolean"===l||"string"===l||"number"===l&&Number.isInteger(s)){t[n]=s;continue}throw new Error("Invalid type for preference: ".concat(n))}}var c=o[n];t[n]=void 0!==c?c:i.compatibility||i.value}return t}},{key:"set",value:function(e,t){o[e]=t}},{key:"remove",value:function(e){delete o[e]}}]),e}();t.AppOptions=c},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.viewerCompatibilityParams=void 0;var i=Object.create(null),a="undefined"!==typeof navigator&&navigator.userAgent||"",r="undefined"!==typeof navigator&&navigator.platform||"",o="undefined"!==typeof navigator&&navigator.maxTouchPoints||1,s=/Android/.test(a),l=/Trident/.test(a),c=/\b(iPad|iPhone|iPod)(?=;)/.test(a)||"MacIntel"===r&&o>1,u=/CriOS/.test(a);(l||u)&&(i.disableCreateObjectURL=!0),(c||s)&&(i.maxCanvasPixels=5242880);var h=Object.freeze(i);t.viewerCompatibilityParams=h},function(e,t,n){var i;"undefined"!==typeof window&&window["pdfjs-dist/build/pdf"]&&(i=window["pdfjs-dist/build/pdf"]),e.exports=i},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.PDFCursorTools=t.CursorTool=void 0;var i=n(7),a={SELECT:0,HAND:1,ZOOM:2};t.CursorTool=a;var r=function(){function e(t){var n=this,r=t.container,o=t.eventBus,l=t.cursorToolOnLoad,c=void 0===l?a.SELECT:l;Object(s.a)(this,e),this.container=r,this.eventBus=o,this.active=a.SELECT,this.activeBeforePresentationMode=null,this.handTool=new i.GrabToPan({element:this.container}),this._addEventListeners(),Promise.resolve().then(function(){n.switchTool(c)})}return Object(l.a)(e,[{key:"switchTool",value:function(e){var t=this;if(null===this.activeBeforePresentationMode&&e!==this.active){var n=function(){switch(t.active){case a.SELECT:break;case a.HAND:t.handTool.deactivate();break;case a.ZOOM:}};switch(e){case a.SELECT:n();break;case a.HAND:n(),this.handTool.activate();break;case a.ZOOM:default:return void console.error('switchTool: "'.concat(e,'" is an unsupported value.'))}this.active=e,this._dispatchEvent()}}},{key:"_dispatchEvent",value:function(){this.eventBus.dispatch("cursortoolchanged",{source:this,tool:this.active})}},{key:"_addEventListeners",value:function(){var e=this;this.eventBus._on("switchcursortool",function(t){e.switchTool(t.tool)}),this.eventBus._on("presentationmodechanged",function(t){var n;t.switchInProgress||(t.active?(n=e.active,e.switchTool(a.SELECT),e.activeBeforePresentationMode=n):(n=e.activeBeforePresentationMode,e.activeBeforePresentationMode=null,e.switchTool(n)))})}},{key:"activeTool",get:function(){return this.active}}]),e}();t.PDFCursorTools=r},function(e,t,n){function i(e){this.element=e.element,this.document=e.element.ownerDocument,"function"===typeof e.ignoreTarget&&(this.ignoreTarget=e.ignoreTarget),this.onActiveChanged=e.onActiveChanged,this.activate=this.activate.bind(this),this.deactivate=this.deactivate.bind(this),this.toggle=this.toggle.bind(this),this._onmousedown=this._onmousedown.bind(this),this._onmousemove=this._onmousemove.bind(this),this._endPan=this._endPan.bind(this),(this.overlay=document.createElement("div")).className="grab-to-pan-grabbing"}var a;Object.defineProperty(t,"__esModule",{value:!0}),t.GrabToPan=i,i.prototype={CSS_CLASS_GRAB:"grab-to-pan-grab",activate:function(){this.active||(this.active=!0,this.element.addEventListener("mousedown",this._onmousedown,!0),this.element.classList.add(this.CSS_CLASS_GRAB),this.onActiveChanged&&this.onActiveChanged(!0))},deactivate:function(){this.active&&(this.active=!1,this.element.removeEventListener("mousedown",this._onmousedown,!0),this._endPan(),this.element.classList.remove(this.CSS_CLASS_GRAB),this.onActiveChanged&&this.onActiveChanged(!1))},toggle:function(){this.active?this.deactivate():this.activate()},ignoreTarget:function(e){return e[a]("a[href], a[href] *, input, textarea, button, button *, select, option")},_onmousedown:function(e){if(0===e.button&&!this.ignoreTarget(e.target)){if(e.originalTarget)try{e.originalTarget.tagName}catch(n){return}this.scrollLeftStart=this.element.scrollLeft,this.scrollTopStart=this.element.scrollTop,this.clientXStart=e.clientX,this.clientYStart=e.clientY,this.document.addEventListener("mousemove",this._onmousemove,!0),this.document.addEventListener("mouseup",this._endPan,!0),this.element.addEventListener("scroll",this._endPan,!0),e.preventDefault(),e.stopPropagation();var t=document.activeElement;t&&!t.contains(e.target)&&t.blur()}},_onmousemove:function(e){if(this.element.removeEventListener("scroll",this._endPan,!0),function(e){if("buttons"in e&&r)return!(1&e.buttons);if(s||l)return 0===e.which;return!1}(e))this._endPan();else{var t=e.clientX-this.clientXStart,n=e.clientY-this.clientYStart,i=this.scrollTopStart-n,a=this.scrollLeftStart-t;this.element.scrollTo?this.element.scrollTo({top:i,left:a,behavior:"instant"}):(this.element.scrollTop=i,this.element.scrollLeft=a),this.overlay.parentNode||document.body.appendChild(this.overlay)}},_endPan:function(){this.element.removeEventListener("scroll",this._endPan,!0),this.document.removeEventListener("mousemove",this._onmousemove,!0),this.document.removeEventListener("mouseup",this._endPan,!0),this.overlay.remove()}},["webkitM","mozM","msM","oM","m"].some(function(e){var t=e+"atches";return t in document.documentElement&&(a=t),(t+="Selector")in document.documentElement&&(a=t),a});var r=!document.documentMode||document.documentMode>9,o=window.chrome,s=o&&(o.webstore||o.app),l=/Apple/.test(navigator.vendor)&&/Version\/([6-9]\d*|[1-5]\d+)/.test(navigator.userAgent)},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.PDFRenderingQueue=t.RenderingStates=void 0;var i={INITIAL:0,RUNNING:1,PAUSED:2,FINISHED:3};t.RenderingStates=i;var a=function(){function e(){Object(s.a)(this,e),this.pdfViewer=null,this.pdfThumbnailViewer=null,this.onIdle=null,this.highestPriorityPage=null,this.idleTimeout=null,this.printing=!1,this.isThumbnailViewEnabled=!1}return Object(l.a)(e,[{key:"setViewer",value:function(e){this.pdfViewer=e}},{key:"setThumbnailViewer",value:function(e){this.pdfThumbnailViewer=e}},{key:"isHighestPriority",value:function(e){return this.highestPriorityPage===e.renderingId}},{key:"renderHighestPriority",value:function(e){this.idleTimeout&&(clearTimeout(this.idleTimeout),this.idleTimeout=null),this.pdfViewer.forceRendering(e)||this.pdfThumbnailViewer&&this.isThumbnailViewEnabled&&this.pdfThumbnailViewer.forceRendering()||this.printing||this.onIdle&&(this.idleTimeout=setTimeout(this.onIdle.bind(this),3e4))}},{key:"getHighestPriority",value:function(e,t,n){var i=e.views,a=i.length;if(0===a)return null;for(var r=0;r<a;++r){var o=i[r].view;if(!this.isViewFinished(o))return o}if(n){var s=e.last.id;if(t[s]&&!this.isViewFinished(t[s]))return t[s]}else{var l=e.first.id-2;if(t[l]&&!this.isViewFinished(t[l]))return t[l]}return null}},{key:"isViewFinished",value:function(e){return e.renderingState===i.FINISHED}},{key:"renderView",value:function(e){var t=this;switch(e.renderingState){case i.FINISHED:return!1;case i.PAUSED:this.highestPriorityPage=e.renderingId,e.resume();break;case i.RUNNING:this.highestPriorityPage=e.renderingId;break;case i.INITIAL:this.highestPriorityPage=e.renderingId,e.draw().finally(function(){t.renderHighestPriority()}).catch(function(e){console.error('renderView: "'.concat(e,'"'))})}return!0}}]),e}();t.PDFRenderingQueue=a},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.PDFSidebar=t.SidebarView=void 0;var i=n(2),a=n(8),r={UNKNOWN:-1,NONE:0,THUMBS:1,OUTLINE:2,ATTACHMENTS:3,LAYERS:4};t.SidebarView=r;var o=function(){function e(t){var n=t.elements,a=t.pdfViewer,o=t.pdfThumbnailViewer,l=t.eventBus,c=t.l10n,u=void 0===c?i.NullL10n:c,h=t.disableNotification,d=void 0!==h&&h;Object(s.a)(this,e),this.isOpen=!1,this.active=r.THUMBS,this.isInitialViewSet=!1,this.onToggled=null,this.pdfViewer=a,this.pdfThumbnailViewer=o,this.outerContainer=n.outerContainer,this.viewerContainer=n.viewerContainer,this.toggleButton=n.toggleButton,this.thumbnailButton=n.thumbnailButton,this.outlineButton=n.outlineButton,this.attachmentsButton=n.attachmentsButton,this.thumbnailView=n.thumbnailView,this.outlineView=n.outlineView,this.attachmentsView=n.attachmentsView,this.eventBus=l,this.l10n=u,this._disableNotification=d,this._addEventListeners()}return Object(l.a)(e,[{key:"reset",value:function(){this.isInitialViewSet=!1,this._hideUINotification(null),this.switchView(r.THUMBS),this.outlineButton.disabled=!1,this.attachmentsButton.disabled=!1}},{key:"setInitialView",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.NONE;this.isInitialViewSet||(this.isInitialViewSet=!0,e!==r.NONE&&e!==r.UNKNOWN&&this._switchView(e,!0)||this._dispatchEvent())}},{key:"switchView",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._switchView(e,t)}},{key:"_switchView",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e!==this.active,i=!1;switch(e){case r.NONE:return!!this.isOpen&&(this.close(),!0);case r.THUMBS:this.isOpen&&n&&(i=!0);break;case r.OUTLINE:if(this.outlineButton.disabled)return!1;break;case r.ATTACHMENTS:if(this.attachmentsButton.disabled)return!1;break;default:return console.error('PDFSidebar._switchView: "'.concat(e,'" is not a valid view.')),!1}return this.active=e,this.thumbnailButton.classList.toggle("toggled",e===r.THUMBS),this.outlineButton.classList.toggle("toggled",e===r.OUTLINE),this.attachmentsButton.classList.toggle("toggled",e===r.ATTACHMENTS),this.thumbnailView.classList.toggle("hidden",e!==r.THUMBS),this.outlineView.classList.toggle("hidden",e!==r.OUTLINE),this.attachmentsView.classList.toggle("hidden",e!==r.ATTACHMENTS),t&&!this.isOpen?(this.open(),!0):(i&&(this._updateThumbnailViewer(),this._forceRendering()),n&&this._dispatchEvent(),this._hideUINotification(this.active),n)}},{key:"open",value:function(){this.isOpen||(this.isOpen=!0,this.toggleButton.classList.add("toggled"),this.outerContainer.classList.add("sidebarMoving","sidebarOpen"),this.active===r.THUMBS&&this._updateThumbnailViewer(),this._forceRendering(),this._dispatchEvent(),this._hideUINotification(this.active))}},{key:"close",value:function(){this.isOpen&&(this.isOpen=!1,this.toggleButton.classList.remove("toggled"),this.outerContainer.classList.add("sidebarMoving"),this.outerContainer.classList.remove("sidebarOpen"),this._forceRendering(),this._dispatchEvent())}},{key:"toggle",value:function(){this.isOpen?this.close():this.open()}},{key:"_dispatchEvent",value:function(){this.eventBus.dispatch("sidebarviewchanged",{source:this,view:this.visibleView})}},{key:"_forceRendering",value:function(){this.onToggled?this.onToggled():(this.pdfViewer.forceRendering(),this.pdfThumbnailViewer.forceRendering())}},{key:"_updateThumbnailViewer",value:function(){for(var e=this.pdfViewer,t=this.pdfThumbnailViewer,n=e.pagesCount,i=0;i<n;i++){var r=e.getPageView(i);if(r&&r.renderingState===a.RenderingStates.FINISHED)t.getThumbnail(i).setImage(r)}t.scrollThumbnailIntoView(e.currentPageNumber)}},{key:"_showUINotification",value:function(e){var t=this;if(!this._disableNotification){if(this.l10n.get("toggle_sidebar_notification.title",null,"Toggle Sidebar (document contains outline/attachments)").then(function(e){t.toggleButton.title=e}),this.isOpen){if(e===this.active)return}else this.toggleButton.classList.add("pdfSidebarNotification");switch(e){case r.OUTLINE:this.outlineButton.classList.add("pdfSidebarNotification");break;case r.ATTACHMENTS:this.attachmentsButton.classList.add("pdfSidebarNotification")}}}},{key:"_hideUINotification",value:function(e){var t=this;if(!this._disableNotification){var n=function(e){switch(e){case r.OUTLINE:t.outlineButton.classList.remove("pdfSidebarNotification");break;case r.ATTACHMENTS:t.attachmentsButton.classList.remove("pdfSidebarNotification")}};if(this.isOpen||null===e)if(this.toggleButton.classList.remove("pdfSidebarNotification"),null===e){for(e in r)n(r[e]);this.l10n.get("toggle_sidebar.title",null,"Toggle Sidebar").then(function(e){t.toggleButton.title=e})}else n(e)}}},{key:"_addEventListeners",value:function(){var e=this;this.viewerContainer.addEventListener("transitionend",function(t){t.target===e.viewerContainer&&e.outerContainer.classList.remove("sidebarMoving")}),this.toggleButton.addEventListener("click",function(){e.toggle()}),this.thumbnailButton.addEventListener("click",function(){e.switchView(r.THUMBS)}),this.outlineButton.addEventListener("click",function(){e.switchView(r.OUTLINE)}),this.outlineButton.addEventListener("dblclick",function(){e.eventBus.dispatch("toggleoutlinetree",{source:e})}),this.attachmentsButton.addEventListener("click",function(){e.switchView(r.ATTACHMENTS)}),this.eventBus._on("outlineloaded",function(t){var n=t.outlineCount;e.outlineButton.disabled=!n,n?e._showUINotification(r.OUTLINE):e.active===r.OUTLINE&&e.switchView(r.THUMBS)}),this.eventBus._on("attachmentsloaded",function(t){if(t.attachmentsCount)return e.attachmentsButton.disabled=!1,void e._showUINotification(r.ATTACHMENTS);Promise.resolve().then(function(){e.attachmentsView.hasChildNodes()||(e.attachmentsButton.disabled=!0,e.active===r.ATTACHMENTS&&e.switchView(r.THUMBS))})}),this.eventBus._on("presentationmodechanged",function(t){t.active||t.switchInProgress||!e.isThumbnailViewVisible||e._updateThumbnailViewer()})}},{key:"visibleView",get:function(){return this.isOpen?this.active:r.NONE}},{key:"isThumbnailViewVisible",get:function(){return this.isOpen&&this.active===r.THUMBS}},{key:"isOutlineViewVisible",get:function(){return this.isOpen&&this.active===r.OUTLINE}},{key:"isAttachmentsViewVisible",get:function(){return this.isOpen&&this.active===r.ATTACHMENTS}}]),e}();t.PDFSidebar=o},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.OverlayManager=void 0;var i=function(){function e(){Object(s.a)(this,e),this._overlays={},this._active=null,this._keyDownBound=this._keyDown.bind(this)}return Object(l.a)(e,[{key:"register",value:function(){var e=Object(qe.a)(Je().mark(function e(t,n){var i,a,r,o=arguments;return Je().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i=o.length>2&&void 0!==o[2]?o[2]:null,a=o.length>3&&void 0!==o[3]&&o[3],t&&n&&(r=n.parentNode)){e.next=6;break}throw new Error("Not enough parameters.");case 6:if(!this._overlays[t]){e.next=8;break}throw new Error("The overlay is already registered.");case 8:this._overlays[t]={element:n,container:r,callerCloseMethod:i,canForceClose:a};case 9:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"unregister",value:function(){var e=Object(qe.a)(Je().mark(function e(t){return Je().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this._overlays[t]){e.next=4;break}throw new Error("The overlay does not exist.");case 4:if(this._active!==t){e.next=6;break}throw new Error("The overlay cannot be removed while it is active.");case 6:delete this._overlays[t];case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"open",value:function(){var e=Object(qe.a)(Je().mark(function e(t){return Je().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this._overlays[t]){e.next=4;break}throw new Error("The overlay does not exist.");case 4:if(!this._active){e.next=14;break}if(!this._overlays[t].canForceClose){e.next=9;break}this._closeThroughCaller(),e.next=14;break;case 9:if(this._active!==t){e.next=13;break}throw new Error("The overlay is already active.");case 13:throw new Error("Another overlay is currently active.");case 14:this._active=t,this._overlays[this._active].element.classList.remove("hidden"),this._overlays[this._active].container.classList.remove("hidden"),window.addEventListener("keydown",this._keyDownBound);case 18:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"close",value:function(){var e=Object(qe.a)(Je().mark(function e(t){return Je().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this._overlays[t]){e.next=4;break}throw new Error("The overlay does not exist.");case 4:if(this._active){e.next=8;break}throw new Error("The overlay is currently not active.");case 8:if(this._active===t){e.next=10;break}throw new Error("Another overlay is currently active.");case 10:this._overlays[this._active].container.classList.add("hidden"),this._overlays[this._active].element.classList.add("hidden"),this._active=null,window.removeEventListener("keydown",this._keyDownBound);case 14:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"_keyDown",value:function(e){this._active&&27===e.keyCode&&(this._closeThroughCaller(),e.preventDefault())}},{key:"_closeThroughCaller",value:function(){this._overlays[this._active].callerCloseMethod&&this._overlays[this._active].callerCloseMethod(),this._active&&this.close(this._active)}},{key:"active",get:function(){return this._active}}]),e}();t.OverlayManager=i},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.PasswordPrompt=void 0;var i=n(2),a=n(5),r=function(){function e(t,n){var a=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i.NullL10n;Object(s.a)(this,e),this.overlayName=t.overlayName,this.container=t.container,this.label=t.label,this.input=t.input,this.submitButton=t.submitButton,this.cancelButton=t.cancelButton,this.overlayManager=n,this.l10n=r,this.updateCallback=null,this.reason=null,this.submitButton.addEventListener("click",this.verify.bind(this)),this.cancelButton.addEventListener("click",this.close.bind(this)),this.input.addEventListener("keydown",function(e){13===e.keyCode&&a.verify()}),this.overlayManager.register(this.overlayName,this.container,this.close.bind(this),!0)}return Object(l.a)(e,[{key:"open",value:function(){var e=this;this.overlayManager.open(this.overlayName).then(function(){e.input.focus(),(e.reason===a.PasswordResponses.INCORRECT_PASSWORD?e.l10n.get("password_invalid",null,"Invalid password. Please try again."):e.l10n.get("password_label",null,"Enter the password to open this PDF file.")).then(function(t){e.label.textContent=t})})}},{key:"close",value:function(){var e=this;this.overlayManager.close(this.overlayName).then(function(){e.input.value=""})}},{key:"verify",value:function(){var e=this.input.value;e&&e.length>0&&(this.close(),this.updateCallback(e))}},{key:"setUpdateCallback",value:function(e,t){this.updateCallback=e,this.reason=t}}]),e}();t.PasswordPrompt=r},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.PDFAttachmentViewer=void 0;var i=n(5),a=function(){function e(t){var n=t.container,i=t.eventBus,a=t.downloadManager;Object(s.a)(this,e),this.container=n,this.eventBus=i,this.downloadManager=a,this.reset(),this.eventBus._on("fileattachmentannotation",this._appendAttachment.bind(this))}return Object(l.a)(e,[{key:"reset",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.attachments=null,this.container.textContent="",e||(this._renderedCapability=(0,i.createPromiseCapability)())}},{key:"_dispatchEvent",value:function(e){this._renderedCapability.resolve(),this.eventBus.dispatch("attachmentsloaded",{source:this,attachmentsCount:e})}},{key:"_bindPdfLink",value:function(e,t,n){var i,a=this;e.onclick=function(){var e;i||(i=URL.createObjectURL(new Blob([t],{type:"application/pdf"}))),e="?file="+encodeURIComponent(i+"#"+n);try{window.open(e)}catch(r){console.error("_bindPdfLink: ".concat(r)),URL.revokeObjectURL(i),i=null,a.downloadManager.downloadData(t,n,"application/pdf")}return!1}}},{key:"_bindLink",value:function(e,t,n){var i=this;e.onclick=function(){return i.downloadManager.downloadData(t,n,""),!1}}},{key:"render",value:function(e){var t=e.attachments,n=e.keepRenderedCapability,a=void 0!==n&&n,r=0;if(this.attachments&&this.reset(!0===a),this.attachments=t||null,t){var o=Object.keys(t).sort(function(e,t){return e.toLowerCase().localeCompare(t.toLowerCase())});r=o.length;for(var s=0;s<r;s++){var l=t[o[s]],c=(0,i.removeNullCharacters)((0,i.getFilenameFromUrl)(l.filename)),u=document.createElement("div");u.className="attachmentsItem";var h=document.createElement("button");h.textContent=c,/\.pdf$/i.test(c)&&!this.downloadManager.disableCreateObjectURL?this._bindPdfLink(h,l.content,c):this._bindLink(h,l.content,c),u.appendChild(h),this.container.appendChild(u)}this._dispatchEvent(r)}else this._dispatchEvent(r)}},{key:"_appendAttachment",value:function(e){var t=this,n=e.id,i=e.filename,a=e.content;this._renderedCapability.promise.then(function(){var e=t.attachments;if(e){for(var r in e)if(n===r)return}else e=Object.create(null);e[n]={filename:i,content:a},t.render({attachments:e,keepRenderedCapability:!0})})}}]),e}();t.PDFAttachmentViewer=a},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.PDFDocumentProperties=void 0;var i=n(5),a=n(2),r=["en-us","en-lr","my"],o={"8.5x11":"Letter","8.5x14":"Legal"},c={"297x420":"A3","210x297":"A4"};function u(e,t,n){var i=t?e.width:e.height,a=t?e.height:e.width;return n["".concat(i,"x").concat(a)]}var h=function(){function e(t,n,i){var o=this,l=t.overlayName,c=t.fields,u=t.container,h=t.closeButton,d=arguments.length>3&&void 0!==arguments[3]?arguments[3]:a.NullL10n;Object(s.a)(this,e),this.overlayName=l,this.fields=c,this.container=u,this.overlayManager=n,this.l10n=d,this._reset(),h.addEventListener("click",this.close.bind(this)),this.overlayManager.register(this.overlayName,this.container,this.close.bind(this)),i._on("pagechanging",function(e){o._currentPageNumber=e.pageNumber}),i._on("rotationchanging",function(e){o._pagesRotation=e.pagesRotation}),this._isNonMetricLocale=!0,d.getLanguage().then(function(e){o._isNonMetricLocale=r.includes(e)})}return Object(l.a)(e,[{key:"open",value:function(){var e=this,t=function(t){Object.defineProperty(e,"fieldData",{value:Object.freeze(t),writable:!1,enumerable:!0,configurable:!0})};Promise.all([this.overlayManager.open(this.overlayName),this._dataAvailableCapability.promise]).then(function(){var n=e._currentPageNumber,i=e._pagesRotation;e.fieldData&&n===e.fieldData._currentPageNumber&&i===e.fieldData._pagesRotation?e._updateUI():e.pdfDocument.getMetadata().then(function(t){var r=t.info,o=t.metadata,s=t.contentDispositionFilename;return Promise.all([r,o,s||(0,a.getPDFFileNameFromURL)(e.url),e._parseFileSize(e.maybeFileSize),e._parseDate(r.CreationDate),e._parseDate(r.ModDate),e.pdfDocument.getPage(n).then(function(t){return e._parsePageSize((0,a.getPageSizeInches)(t),i)}),e._parseLinearization(r.IsLinearized)])}).then(function(a){var r=Object(Xe.a)(a,8),o=r[0],s=(r[1],r[2]),l=r[3],c=r[4],u=r[5],h=r[6],d=r[7];return t({fileName:s,fileSize:l,title:o.Title,author:o.Author,subject:o.Subject,keywords:o.Keywords,creationDate:c,modificationDate:u,creator:o.Creator,producer:o.Producer,version:o.PDFFormatVersion,pageCount:e.pdfDocument.numPages,pageSize:h,linearized:d,_currentPageNumber:n,_pagesRotation:i}),e._updateUI(),e.pdfDocument.getDownloadInfo()}).then(function(t){var n=t.length;return e.maybeFileSize=n,e._parseFileSize(n)}).then(function(n){if(n!==e.fieldData.fileSize){var i=Object.assign(Object.create(null),e.fieldData);i.fileSize=n,t(i),e._updateUI()}})})}},{key:"close",value:function(){this.overlayManager.close(this.overlayName)}},{key:"setDocument",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.pdfDocument&&(this._reset(),this._updateUI(!0)),e&&(this.pdfDocument=e,this.url=t,this._dataAvailableCapability.resolve())}},{key:"setFileSize",value:function(e){Number.isInteger(e)&&e>0&&(this.maybeFileSize=e)}},{key:"_reset",value:function(){this.pdfDocument=null,this.url=null,this.maybeFileSize=0,delete this.fieldData,this._dataAvailableCapability=(0,i.createPromiseCapability)(),this._currentPageNumber=1,this._pagesRotation=0}},{key:"_updateUI",value:function(){if(!(arguments.length>0&&void 0!==arguments[0]&&arguments[0])&&this.fieldData){if(this.overlayManager.active===this.overlayName)for(var e in this.fields){var t=this.fieldData[e];this.fields[e].textContent=t||0===t?t:"-"}}else for(var n in this.fields)this.fields[n].textContent="-"}},{key:"_parseFileSize",value:function(){var e=Object(qe.a)(Je().mark(function e(){var t,n,i=arguments;return Je().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=i.length>0&&void 0!==i[0]?i[0]:0,n=t/1024){e.next=6;break}return e.abrupt("return",void 0);case 6:if(!(n<1024)){e.next=8;break}return e.abrupt("return",this.l10n.get("document_properties_kb",{size_kb:(+n.toPrecision(3)).toLocaleString(),size_b:t.toLocaleString()},"{{size_kb}} KB ({{size_b}} bytes)"));case 8:return e.abrupt("return",this.l10n.get("document_properties_mb",{size_mb:(+(n/1024).toPrecision(3)).toLocaleString(),size_b:t.toLocaleString()},"{{size_mb}} MB ({{size_b}} bytes)"));case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"_parsePageSize",value:function(){var e=Object(qe.a)(Je().mark(function e(t,n){var i,r,s,l,h,d,p,f=this;return Je().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",void 0);case 2:return n%180!==0&&(t={width:t.height,height:t.width}),i=(0,a.isPortraitOrientation)(t),r={width:Math.round(100*t.width)/100,height:Math.round(100*t.height)/100},s={width:Math.round(25.4*t.width*10)/10,height:Math.round(25.4*t.height*10)/10},l=null,(h=u(r,i,o)||u(s,i,c))||Number.isInteger(s.width)&&Number.isInteger(s.height)||(d={width:25.4*t.width,height:25.4*t.height},p={width:Math.round(s.width),height:Math.round(s.height)},Math.abs(d.width-p.width)<.1&&Math.abs(d.height-p.height)<.1&&(h=u(p,i,c))&&(r={width:Math.round(p.width/25.4*100)/100,height:Math.round(p.height/25.4*100)/100},s=p)),h&&(l=this.l10n.get("document_properties_page_size_name_"+h.toLowerCase(),null,h)),e.abrupt("return",Promise.all([this._isNonMetricLocale?r:s,this.l10n.get("document_properties_page_size_unit_"+(this._isNonMetricLocale?"inches":"millimeters"),null,this._isNonMetricLocale?"in":"mm"),l,this.l10n.get("document_properties_page_size_orientation_"+(i?"portrait":"landscape"),null,i?"portrait":"landscape")]).then(function(e){var t=Object(Xe.a)(e,4),n=t[0],i=n.width,a=n.height,r=t[1],o=t[2],s=t[3];return f.l10n.get("document_properties_page_size_dimension_"+(o?"name_":"")+"string",{width:i.toLocaleString(),height:a.toLocaleString(),unit:r,name:o,orientation:s},"{{width}} \xd7 {{height}} {{unit}} ("+(o?"{{name}}, ":"")+"{{orientation}})")}));case 11:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"_parseDate",value:function(){var e=Object(qe.a)(Je().mark(function e(t){var n;return Je().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.PDFDateString.toDateObject(t)){e.next=3;break}return e.abrupt("return",void 0);case 3:return e.abrupt("return",this.l10n.get("document_properties_date_string",{date:n.toLocaleDateString(),time:n.toLocaleTimeString()},"{{date}}, {{time}}"));case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"_parseLinearization",value:function(e){return this.l10n.get("document_properties_linearized_"+(e?"yes":"no"),null,e?"Yes":"No")}}]),e}();t.PDFDocumentProperties=h},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.PDFFindBar=void 0;var i=n(15),a=n(2),r=function(){function e(t,n){var i=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a.NullL10n;Object(s.a)(this,e),this.opened=!1,this.bar=t.bar||null,this.toggleButton=t.toggleButton||null,this.findField=t.findField||null,this.highlightAll=t.highlightAllCheckbox||null,this.caseSensitive=t.caseSensitiveCheckbox||null,this.entireWord=t.entireWordCheckbox||null,this.findMsg=t.findMsg||null,this.findResultsCount=t.findResultsCount||null,this.findPreviousButton=t.findPreviousButton||null,this.findNextButton=t.findNextButton||null,this.eventBus=n,this.l10n=r,this.toggleButton.addEventListener("click",function(){i.toggle()}),this.findField.addEventListener("input",function(){i.dispatchEvent("")}),this.bar.addEventListener("keydown",function(e){switch(e.keyCode){case 13:e.target===i.findField&&i.dispatchEvent("again",e.shiftKey);break;case 27:i.close()}}),this.findPreviousButton.addEventListener("click",function(){i.dispatchEvent("again",!0)}),this.findNextButton.addEventListener("click",function(){i.dispatchEvent("again",!1)}),this.highlightAll.addEventListener("click",function(){i.dispatchEvent("highlightallchange")}),this.caseSensitive.addEventListener("click",function(){i.dispatchEvent("casesensitivitychange")}),this.entireWord.addEventListener("click",function(){i.dispatchEvent("entirewordchange")}),this.eventBus._on("resize",this._adjustWidth.bind(this))}return Object(l.a)(e,[{key:"reset",value:function(){this.updateUIState()}},{key:"dispatchEvent",value:function(e,t){this.eventBus.dispatch("find",{source:this,type:e,query:this.findField.value,phraseSearch:!0,caseSensitive:this.caseSensitive.checked,entireWord:this.entireWord.checked,highlightAll:this.highlightAll.checked,findPrevious:t})}},{key:"updateUIState",value:function(e,t,n){var a=this,r=!1,o="",s="";switch(e){case i.FindState.FOUND:break;case i.FindState.PENDING:s="pending";break;case i.FindState.NOT_FOUND:o=this.l10n.get("find_not_found",null,"Phrase not found"),r=!0;break;case i.FindState.WRAPPED:o=t?this.l10n.get("find_reached_top",null,"Reached top of document, continued from bottom"):this.l10n.get("find_reached_bottom",null,"Reached end of document, continued from top")}this.findField.classList.toggle("notFound",r),this.findField.setAttribute("data-status",s),Promise.resolve(o).then(function(e){a.findMsg.textContent=e,a._adjustWidth()}),this.updateResultsCount(n)}},{key:"updateResultsCount",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.current,i=void 0===n?0:n,a=t.total,r=void 0===a?0:a;if(this.findResultsCount){var o="";r>0&&(o=r>1e3?this.l10n.get("find_match_count_limit",{limit:1e3},"More than {{limit}} matches"):this.l10n.get("find_match_count",{current:i,total:r},"{{current}} of {{total}} match"+(1!==r?"es":""))),Promise.resolve(o).then(function(t){e.findResultsCount.textContent=t,e.findResultsCount.classList.toggle("hidden",!r),e._adjustWidth()})}}},{key:"open",value:function(){this.opened||(this.opened=!0,this.toggleButton.classList.add("toggled"),this.bar.classList.remove("hidden")),this.findField.select(),this.findField.focus(),this._adjustWidth()}},{key:"close",value:function(){this.opened&&(this.opened=!1,this.toggleButton.classList.remove("toggled"),this.bar.classList.add("hidden"),this.eventBus.dispatch("findbarclose",{source:this}))}},{key:"toggle",value:function(){this.opened?this.close():this.open()}},{key:"_adjustWidth",value:function(){this.opened&&(this.bar.classList.remove("wrapContainers"),this.bar.clientHeight>this.bar.firstElementChild.clientHeight&&this.bar.classList.add("wrapContainers"))}}]),e}();t.PDFFindBar=r},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.PDFFindController=t.FindState=void 0;var i=n(5),a=n(16),r=n(2),o={FOUND:0,NOT_FOUND:1,WRAPPED:2,PENDING:3};t.FindState=o;var c={"\u2018":"'","\u2019":"'","\u201a":"'","\u201b":"'","\u201c":'"',"\u201d":'"',"\u201e":'"',"\u201f":'"',"\xbc":"1/4","\xbd":"1/2","\xbe":"3/4"},u=null;function h(e){if(!u){var t=Object.keys(c).join("");u=new RegExp("[".concat(t,"]"),"g")}return e.replace(u,function(e){return c[e]})}var d=function(){function e(t){var n=t.linkService,i=t.eventBus;Object(s.a)(this,e),this._linkService=n,this._eventBus=i,this._reset(),i._on("findbarclose",this._onFindBarClose.bind(this))}return Object(l.a)(e,[{key:"setDocument",value:function(e){this._pdfDocument&&this._reset(),e&&(this._pdfDocument=e,this._firstPageCapability.resolve())}},{key:"executeCommand",value:function(e,t){var n=this;if(t){var i=this._pdfDocument;(null===this._state||this._shouldDirtyMatch(e,t))&&(this._dirtyMatch=!0),this._state=t,"findhighlightallchange"!==e&&this._updateUIState(o.PENDING),this._firstPageCapability.promise.then(function(){if(n._pdfDocument&&(!i||n._pdfDocument===i)){n._extractText();var t=!n._highlightMatches,a=!!n._findTimeout;n._findTimeout&&(clearTimeout(n._findTimeout),n._findTimeout=null),"find"===e?n._findTimeout=setTimeout(function(){n._nextMatch(),n._findTimeout=null},250):n._dirtyMatch?n._nextMatch():"findagain"===e?(n._nextMatch(),t&&n._state.highlightAll&&n._updateAllPages()):"findhighlightallchange"===e?(a?n._nextMatch():n._highlightMatches=!0,n._updateAllPages()):n._nextMatch()}})}}},{key:"scrollMatchIntoView",value:function(e){var t=e.element,n=void 0===t?null:t,i=e.pageIndex,a=void 0===i?-1:i,o=e.matchIndex,s=void 0===o?-1:o;if(this._scrollMatches&&n&&-1!==s&&s===this._selected.matchIdx&&-1!==a&&a===this._selected.pageIdx){this._scrollMatches=!1;var l={top:-50,left:-400};(0,r.scrollIntoView)(n,l,!0)}}},{key:"_reset",value:function(){this._highlightMatches=!1,this._scrollMatches=!1,this._pdfDocument=null,this._pageMatches=[],this._pageMatchesLength=[],this._state=null,this._selected={pageIdx:-1,matchIdx:-1},this._offset={pageIdx:null,matchIdx:null,wrapped:!1},this._extractTextPromises=[],this._pageContents=[],this._matchesCountTotal=0,this._pagesToSearch=null,this._pendingFindMatches=Object.create(null),this._resumePageIdx=null,this._dirtyMatch=!1,clearTimeout(this._findTimeout),this._findTimeout=null,this._firstPageCapability=(0,i.createPromiseCapability)()}},{key:"_shouldDirtyMatch",value:function(e,t){if(t.query!==this._state.query)return!0;switch(e){case"findagain":var n=this._selected.pageIdx+1,i=this._linkService;return n>=1&&n<=i.pagesCount&&n!==i.page&&!i.isPageVisible(n);case"findhighlightallchange":return!1}return!0}},{key:"_prepareMatches",value:function(e,t,n){function i(t){var n=e[t],i=e[t+1];if(t<e.length-1&&n.match===i.match)return n.skipped=!0,!0;for(var a=t-1;a>=0;a--){var r=e[a];if(!r.skipped){if(r.match+r.matchLength<n.match)break;if(r.match+r.matchLength>=n.match+n.matchLength)return n.skipped=!0,!0}}return!1}e.sort(function(e,t){return e.match===t.match?e.matchLength-t.matchLength:e.match-t.match});for(var a=0,r=e.length;a<r;a++)i(a)||(t.push(e[a].match),n.push(e[a].matchLength))}},{key:"_isEntireWord",value:function(e,t,n){if(t>0){var i=e.charCodeAt(t),r=e.charCodeAt(t-1);if((0,a.getCharacterType)(i)===(0,a.getCharacterType)(r))return!1}var o=t+n-1;if(o<e.length-1){var s=e.charCodeAt(o),l=e.charCodeAt(o+1);if((0,a.getCharacterType)(s)===(0,a.getCharacterType)(l))return!1}return!0}},{key:"_calculatePhraseMatch",value:function(e,t,n,i){for(var a=[],r=e.length,o=-r;-1!==(o=n.indexOf(e,o+r));)i&&!this._isEntireWord(n,o,r)||a.push(o);this._pageMatches[t]=a}},{key:"_calculateWordMatch",value:function(e,t,n,i){for(var a=[],r=e.match(/\S+/g),o=0,s=r.length;o<s;o++)for(var l=r[o],c=l.length,u=-c;-1!==(u=n.indexOf(l,u+c));)i&&!this._isEntireWord(n,u,c)||a.push({match:u,matchLength:c,skipped:!1});this._pageMatchesLength[t]=[],this._pageMatches[t]=[],this._prepareMatches(a,this._pageMatches[t],this._pageMatchesLength[t])}},{key:"_calculateMatch",value:function(e){var t=this._pageContents[e],n=this._query,i=this._state,a=i.caseSensitive,r=i.entireWord,o=i.phraseSearch;if(0!==n.length){a||(t=t.toLowerCase(),n=n.toLowerCase()),o?this._calculatePhraseMatch(n,e,t,r):this._calculateWordMatch(n,e,t,r),this._state.highlightAll&&this._updatePage(e),this._resumePageIdx===e&&(this._resumePageIdx=null,this._nextPageMatch());var s=this._pageMatches[e].length;s>0&&(this._matchesCountTotal+=s,this._updateUIResultsCount())}}},{key:"_extractText",value:function(){var e=this;if(!(this._extractTextPromises.length>0))for(var t=Promise.resolve(),n=function(n){var a=(0,i.createPromiseCapability)();e._extractTextPromises[n]=a.promise,t=t.then(function(){return e._pdfDocument.getPage(n+1).then(function(e){return e.getTextContent({normalizeWhitespace:!0})}).then(function(t){for(var i=t.items,r=[],o=0,s=i.length;o<s;o++)r.push(i[o].str);e._pageContents[n]=h(r.join("")),a.resolve(n)},function(t){console.error("Unable to get text content for page ".concat(n+1),t),e._pageContents[n]="",a.resolve(n)})})},a=0,r=this._linkService.pagesCount;a<r;a++)n(a)}},{key:"_updatePage",value:function(e){this._scrollMatches&&this._selected.pageIdx===e&&(this._linkService.page=e+1),this._eventBus.dispatch("updatetextlayermatches",{source:this,pageIndex:e})}},{key:"_updateAllPages",value:function(){this._eventBus.dispatch("updatetextlayermatches",{source:this,pageIndex:-1})}},{key:"_nextMatch",value:function(){var e=this,t=this._state.findPrevious,n=this._linkService.page-1,i=this._linkService.pagesCount;if(this._highlightMatches=!0,this._dirtyMatch){this._dirtyMatch=!1,this._selected.pageIdx=this._selected.matchIdx=-1,this._offset.pageIdx=n,this._offset.matchIdx=null,this._offset.wrapped=!1,this._resumePageIdx=null,this._pageMatches.length=0,this._pageMatchesLength.length=0,this._matchesCountTotal=0,this._updateAllPages();for(var a=0;a<i;a++)!0!==this._pendingFindMatches[a]&&(this._pendingFindMatches[a]=!0,this._extractTextPromises[a].then(function(t){delete e._pendingFindMatches[t],e._calculateMatch(t)}))}if(""!==this._query){if(!this._resumePageIdx){var r=this._offset;if(this._pagesToSearch=i,null!==r.matchIdx){var s=this._pageMatches[r.pageIdx].length;if(!t&&r.matchIdx+1<s||t&&r.matchIdx>0)return r.matchIdx=t?r.matchIdx-1:r.matchIdx+1,void this._updateMatch(!0);this._advanceOffsetPage(t)}this._nextPageMatch()}}else this._updateUIState(o.FOUND)}},{key:"_matchesReady",value:function(e){var t=this._offset,n=e.length,i=this._state.findPrevious;return n?(t.matchIdx=i?n-1:0,this._updateMatch(!0),!0):(this._advanceOffsetPage(i),!!(t.wrapped&&(t.matchIdx=null,this._pagesToSearch<0))&&(this._updateMatch(!1),!0))}},{key:"_nextPageMatch",value:function(){null!==this._resumePageIdx&&console.error("There can only be one pending page.");var e=null;do{var t=this._offset.pageIdx;if(!(e=this._pageMatches[t])){this._resumePageIdx=t;break}}while(!this._matchesReady(e))}},{key:"_advanceOffsetPage",value:function(e){var t=this._offset,n=this._linkService.pagesCount;t.pageIdx=e?t.pageIdx-1:t.pageIdx+1,t.matchIdx=null,this._pagesToSearch--,(t.pageIdx>=n||t.pageIdx<0)&&(t.pageIdx=e?n-1:0,t.wrapped=!0)}},{key:"_updateMatch",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=o.NOT_FOUND,n=this._offset.wrapped;if(this._offset.wrapped=!1,e){var i=this._selected.pageIdx;this._selected.pageIdx=this._offset.pageIdx,this._selected.matchIdx=this._offset.matchIdx,t=n?o.WRAPPED:o.FOUND,-1!==i&&i!==this._selected.pageIdx&&this._updatePage(i)}this._updateUIState(t,this._state.findPrevious),-1!==this._selected.pageIdx&&(this._scrollMatches=!0,this._updatePage(this._selected.pageIdx))}},{key:"_onFindBarClose",value:function(e){var t=this,n=this._pdfDocument;this._firstPageCapability.promise.then(function(){!t._pdfDocument||n&&t._pdfDocument!==n||(t._findTimeout&&(clearTimeout(t._findTimeout),t._findTimeout=null),t._resumePageIdx&&(t._resumePageIdx=null,t._dirtyMatch=!0),t._updateUIState(o.FOUND),t._highlightMatches=!1,t._updateAllPages())})}},{key:"_requestMatchesCount",value:function(){var e=this._selected,t=e.pageIdx,n=e.matchIdx,i=0,a=this._matchesCountTotal;if(-1!==n){for(var r=0;r<t;r++)i+=this._pageMatches[r]&&this._pageMatches[r].length||0;i+=n+1}return(i<1||i>a)&&(i=a=0),{current:i,total:a}}},{key:"_updateUIResultsCount",value:function(){this._eventBus.dispatch("updatefindmatchescount",{source:this,matchesCount:this._requestMatchesCount()})}},{key:"_updateUIState",value:function(e,t){this._eventBus.dispatch("updatefindcontrolstate",{source:this,state:e,previous:t,matchesCount:this._requestMatchesCount()})}},{key:"highlightMatches",get:function(){return this._highlightMatches}},{key:"pageMatches",get:function(){return this._pageMatches}},{key:"pageMatchesLength",get:function(){return this._pageMatchesLength}},{key:"selected",get:function(){return this._selected}},{key:"state",get:function(){return this._state}},{key:"_query",get:function(){return this._state.query!==this._rawQuery&&(this._rawQuery=this._state.query,this._normalizedQuery=h(this._state.query)),this._normalizedQuery}}]),e}();t.PDFFindController=d},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.getCharacterType=function(e){if(function(e){return e<11904}(e))return function(e){return 0===(65408&e)}(e)?function(e){return 32===e||9===e||13===e||10===e}(e)?i.SPACE:function(e){return e>=97&&e<=122||e>=65&&e<=90}(e)||function(e){return e>=48&&e<=57}(e)||95===e?i.ALPHA_LETTER:i.PUNCT:function(e){return 3584===(65408&e)}(e)?i.THAI_LETTER:160===e?i.SPACE:i.ALPHA_LETTER;if(function(e){return e>=13312&&e<=40959||e>=63744&&e<=64255}(e))return i.HAN_LETTER;if(function(e){return e>=12448&&e<=12543}(e))return i.KATAKANA_LETTER;if(function(e){return e>=12352&&e<=12447}(e))return i.HIRAGANA_LETTER;if(function(e){return e>=65376&&e<=65439}(e))return i.HALFWIDTH_KATAKANA_LETTER;return i.ALPHA_LETTER},t.CharacterType=void 0;var i={SPACE:0,ALPHA_LETTER:1,PUNCT:2,HAN_LETTER:3,KATAKANA_LETTER:4,HIRAGANA_LETTER:5,HALFWIDTH_KATAKANA_LETTER:6,THAI_LETTER:7};t.CharacterType=i},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.isDestHashesEqual=o,t.isDestArraysEqual=c,t.PDFHistory=void 0;var i=n(2);function a(){return document.location.hash}var r=function(){function e(t){var n=this,i=t.linkService,a=t.eventBus;Object(s.a)(this,e),this.linkService=i,this.eventBus=a,this._initialized=!1,this._fingerprint="",this.reset(),this._boundEvents=null,this._isViewerInPresentationMode=!1,this.eventBus._on("presentationmodechanged",function(e){n._isViewerInPresentationMode=e.active||e.switchInProgress}),this.eventBus._on("pagesinit",function(){n._isPagesLoaded=!1;n.eventBus._on("pagesloaded",function e(t){n.eventBus._off("pagesloaded",e),n._isPagesLoaded=!!t.pagesCount})})}return Object(l.a)(e,[{key:"initialize",value:function(e){var t=e.fingerprint,n=e.resetHistory,i=void 0!==n&&n,r=e.updateUrl,o=void 0!==r&&r;if(t&&"string"===typeof t){this._initialized&&this.reset();var s=""!==this._fingerprint&&this._fingerprint!==t;this._fingerprint=t,this._updateUrl=!0===o,this._initialized=!0,this._bindEvents();var l=window.history.state;if(this._popStateInProgress=!1,this._blockHashChange=0,this._currentHash=a(),this._numPositionUpdates=0,this._uid=this._maxUid=0,this._destination=null,this._position=null,!this._isValidState(l,!0)||i){var c=this._parseCurrentHash(!0),u=c.hash,h=c.page,d=c.rotation;return!u||s||i?void this._pushOrReplaceState(null,!0):void this._pushOrReplaceState({hash:u,page:h,rotation:d},!0)}var p=l.destination;this._updateInternalState(p,l.uid,!0),this._uid>this._maxUid&&(this._maxUid=this._uid),void 0!==p.rotation&&(this._initialRotation=p.rotation),p.dest?(this._initialBookmark=JSON.stringify(p.dest),this._destination.page=null):p.hash?this._initialBookmark=p.hash:p.page&&(this._initialBookmark="page=".concat(p.page))}else console.error('PDFHistory.initialize: The "fingerprint" must be a non-empty string.')}},{key:"reset",value:function(){this._initialized&&(this._pageHide(),this._initialized=!1,this._unbindEvents()),this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),this._initialBookmark=null,this._initialRotation=null}},{key:"push",value:function(e){var t=this,n=e.namedDest,i=void 0===n?null:n,a=e.explicitDest,r=e.pageNumber;if(this._initialized)if(i&&"string"!==typeof i)console.error("PDFHistory.push: "+'"'.concat(i,'" is not a valid namedDest parameter.'));else if(Array.isArray(a))if(Number.isInteger(r)&&r>0&&r<=this.linkService.pagesCount||null===r&&!this._destination){var s=i||JSON.stringify(a);if(s){var l=!1;if(this._destination&&(o(this._destination.hash,s)||c(this._destination.dest,a))){if(this._destination.page)return;l=!0}this._popStateInProgress&&!l||(this._pushOrReplaceState({dest:a,hash:s,page:r,rotation:this.linkService.rotation},l),this._popStateInProgress||(this._popStateInProgress=!0,Promise.resolve().then(function(){t._popStateInProgress=!1})))}}else console.error("PDFHistory.push: "+'"'.concat(r,'" is not a valid pageNumber parameter.'));else console.error("PDFHistory.push: "+'"'.concat(a,'" is not a valid explicitDest parameter.'))}},{key:"pushCurrentPosition",value:function(){this._initialized&&!this._popStateInProgress&&this._tryPushCurrentPosition()}},{key:"back",value:function(){if(this._initialized&&!this._popStateInProgress){var e=window.history.state;this._isValidState(e)&&e.uid>0&&window.history.back()}}},{key:"forward",value:function(){if(this._initialized&&!this._popStateInProgress){var e=window.history.state;this._isValidState(e)&&e.uid<this._maxUid&&window.history.forward()}}},{key:"_pushOrReplaceState",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this._destination,i={fingerprint:this._fingerprint,uid:n?this._uid:this._uid+1,destination:e};if(this._updateInternalState(e,i.uid),this._updateUrl&&e&&e.hash){var a=document.location.href.split("#")[0];a.startsWith("file://")||(t="".concat(a,"#").concat(e.hash))}n?window.history.replaceState(i,"",t):(this._maxUid=this._uid,window.history.pushState(i,"",t))}},{key:"_tryPushCurrentPosition",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this._position){var t=this._position;if(e&&((t=Object.assign(Object.create(null),this._position)).temporary=!0),this._destination){if(this._destination.temporary)this._pushOrReplaceState(t,!0);else if(this._destination.hash!==t.hash&&(this._destination.page||!(this._numPositionUpdates<=50))){var n=!1;if(this._destination.page>=t.first&&this._destination.page<=t.page){if(this._destination.dest||!this._destination.first)return;n=!0}this._pushOrReplaceState(t,n)}}else this._pushOrReplaceState(t)}}},{key:"_isValidState",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e)return!1;if(e.fingerprint!==this._fingerprint){if(!t)return!1;if("string"!==typeof e.fingerprint||e.fingerprint.length!==this._fingerprint.length)return!1;var n=performance.getEntriesByType("navigation"),i=Object(Xe.a)(n,1)[0];if(!i||"reload"!==i.type)return!1}return!(!Number.isInteger(e.uid)||e.uid<0)&&(null!==e.destination&&"object"===typeof e.destination)}},{key:"_updateInternalState",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),n&&e&&e.temporary&&delete e.temporary,this._destination=e,this._uid=t,this._numPositionUpdates=0}},{key:"_parseCurrentHash",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=unescape(a()).substring(1),n=(0,i.parseQueryString)(t),r=n.nameddest||"",o=0|n.page;return Number.isInteger(o)&&o>0&&o<=this.linkService.pagesCount&&!(e&&r.length>0)||(o=null),{hash:t,page:o,rotation:this.linkService.rotation}}},{key:"_updateViewarea",value:function(e){var t=this,n=e.location;this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),this._position={hash:this._isViewerInPresentationMode?"page=".concat(n.pageNumber):n.pdfOpenParams.substring(1),page:this.linkService.page,first:n.pageNumber,rotation:n.rotation},this._popStateInProgress||(this._isPagesLoaded&&this._destination&&!this._destination.page&&this._numPositionUpdates++,this._updateViewareaTimeout=setTimeout(function(){t._popStateInProgress||t._tryPushCurrentPosition(!0),t._updateViewareaTimeout=null},1e3))}},{key:"_popState",value:function(e){var t=this,n=e.state,r=a(),o=this._currentHash!==r;if(this._currentHash=r,n){if(this._isValidState(n)){this._popStateInProgress=!0,o&&(this._blockHashChange++,(0,i.waitOnEventOrTimeout)({target:window,name:"hashchange",delay:1e3}).then(function(){t._blockHashChange--}));var s=n.destination;this._updateInternalState(s,n.uid,!0),this._uid>this._maxUid&&(this._maxUid=this._uid),(0,i.isValidRotation)(s.rotation)&&(this.linkService.rotation=s.rotation),s.dest?this.linkService.navigateTo(s.dest):s.hash?this.linkService.setHash(s.hash):s.page&&(this.linkService.page=s.page),Promise.resolve().then(function(){t._popStateInProgress=!1})}}else{this._uid++;var l=this._parseCurrentHash(),c=l.hash,u=l.page,h=l.rotation;this._pushOrReplaceState({hash:c,page:u,rotation:h},!0)}}},{key:"_pageHide",value:function(){this._destination&&!this._destination.temporary||this._tryPushCurrentPosition()}},{key:"_bindEvents",value:function(){this._boundEvents||(this._boundEvents={updateViewarea:this._updateViewarea.bind(this),popState:this._popState.bind(this),pageHide:this._pageHide.bind(this)},this.eventBus._on("updateviewarea",this._boundEvents.updateViewarea),window.addEventListener("popstate",this._boundEvents.popState),window.addEventListener("pagehide",this._boundEvents.pageHide))}},{key:"_unbindEvents",value:function(){this._boundEvents&&(this.eventBus._off("updateviewarea",this._boundEvents.updateViewarea),window.removeEventListener("popstate",this._boundEvents.popState),window.removeEventListener("pagehide",this._boundEvents.pageHide),this._boundEvents=null)}},{key:"popStateInProgress",get:function(){return this._initialized&&(this._popStateInProgress||this._blockHashChange>0)}},{key:"initialBookmark",get:function(){return this._initialized?this._initialBookmark:null}},{key:"initialRotation",get:function(){return this._initialized?this._initialRotation:null}}]),e}();function o(e,t){return"string"===typeof e&&"string"===typeof t&&(e===t||(0,i.parseQueryString)(e).nameddest===t)}function c(e,t){function n(e,t){if(typeof e!==typeof t)return!1;if(Array.isArray(e)||Array.isArray(t))return!1;if(null!==e&&"object"===typeof e&&null!==t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(var i in e)if(!n(e[i],t[i]))return!1;return!0}return e===t||Number.isNaN(e)&&Number.isNaN(t)}if(!Array.isArray(e)||!Array.isArray(t))return!1;if(e.length!==t.length)return!1;for(var i=0,a=e.length;i<a;i++)if(!n(e[i],t[i]))return!1;return!0}t.PDFHistory=r},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SimpleLinkService=t.PDFLinkService=void 0;var i=n(2),a=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.eventBus,i=t.externalLinkTarget,a=void 0===i?null:i,r=t.externalLinkRel,o=void 0===r?null:r,l=t.externalLinkEnabled,c=void 0===l||l,u=t.ignoreDestinationZoom,h=void 0!==u&&u;Object(s.a)(this,e),this.eventBus=n,this.externalLinkTarget=a,this.externalLinkRel=o,this.externalLinkEnabled=c,this._ignoreDestinationZoom=h,this.baseUrl=null,this.pdfDocument=null,this.pdfViewer=null,this.pdfHistory=null,this._pagesRefCache=null}return Object(l.a)(e,[{key:"setDocument",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.baseUrl=t,this.pdfDocument=e,this._pagesRefCache=Object.create(null)}},{key:"setViewer",value:function(e){this.pdfViewer=e}},{key:"setHistory",value:function(e){this.pdfHistory=e}},{key:"navigateTo",value:function(e){var t=this;new Promise(function(n,i){"string"!==typeof e?n({namedDest:"",explicitDest:e}):t.pdfDocument.getDestination(e).then(function(t){n({namedDest:e,explicitDest:t})})}).then(function(n){Array.isArray(n.explicitDest)?function n(i){var a,r=i.namedDest,o=i.explicitDest,s=o[0];if(s instanceof Object){if(null===(a=t._cachedPageNumber(s)))return void t.pdfDocument.getPageIndex(s).then(function(e){t.cachePageRef(e+1,s),n({namedDest:r,explicitDest:o})}).catch(function(){console.error('PDFLinkService.navigateTo: "'.concat(s,'" is not ')+'a valid page reference, for dest="'.concat(e,'".'))})}else{if(!Number.isInteger(s))return void console.error('PDFLinkService.navigateTo: "'.concat(s,'" is not ')+'a valid destination reference, for dest="'.concat(e,'".'));a=s+1}!a||a<1||a>t.pagesCount?console.error('PDFLinkService.navigateTo: "'.concat(a,'" is not ')+'a valid page number, for dest="'.concat(e,'".')):(t.pdfHistory&&(t.pdfHistory.pushCurrentPosition(),t.pdfHistory.push({namedDest:r,explicitDest:o,pageNumber:a})),t.pdfViewer.scrollPageIntoView({pageNumber:a,destArray:o,ignoreDestinationZoom:t._ignoreDestinationZoom}))}(n):console.error('PDFLinkService.navigateTo: "'.concat(n.explicitDest,'" is')+' not a valid destination array, for dest="'.concat(e,'".'))})}},{key:"getDestinationHash",value:function(e){if("string"===typeof e)return this.getAnchorUrl("#"+escape(e));if(Array.isArray(e)){var t=JSON.stringify(e);return this.getAnchorUrl("#"+escape(t))}return this.getAnchorUrl("")}},{key:"getAnchorUrl",value:function(e){return(this.baseUrl||"")+e}},{key:"setHash",value:function(e){var t,n;if(e.includes("=")){var a=(0,i.parseQueryString)(e);if("search"in a&&this.eventBus.dispatch("findfromurlhash",{source:this,query:a.search.replace(/"/g,""),phraseSearch:"true"===a.phrase}),"page"in a&&(t=0|a.page||1),"zoom"in a){var r=a.zoom.split(","),o=r[0],s=parseFloat(o);o.includes("Fit")?"Fit"===o||"FitB"===o?n=[null,{name:o}]:"FitH"===o||"FitBH"===o||"FitV"===o||"FitBV"===o?n=[null,{name:o},r.length>1?0|r[1]:null]:"FitR"===o?5!==r.length?console.error('PDFLinkService.setHash: Not enough parameters for "FitR".'):n=[null,{name:o},0|r[1],0|r[2],0|r[3],0|r[4]]:console.error('PDFLinkService.setHash: "'.concat(o,'" is not ')+"a valid zoom value."):n=[null,{name:"XYZ"},r.length>1?0|r[1]:null,r.length>2?0|r[2]:null,s?s/100:o]}n?this.pdfViewer.scrollPageIntoView({pageNumber:t||this.page,destArray:n,allowNegativeOffset:!0}):t&&(this.page=t),"pagemode"in a&&this.eventBus.dispatch("pagemode",{source:this,mode:a.pagemode}),"nameddest"in a&&this.navigateTo(a.nameddest)}else{n=unescape(e);try{n=JSON.parse(n),Array.isArray(n)||(n=n.toString())}catch(l){}if("string"===typeof n||function(e){if(!Array.isArray(e))return!1;var t=e.length;if(t<2)return!1;var n=e[0];if(("object"!==typeof n||!Number.isInteger(n.num)||!Number.isInteger(n.gen))&&!(Number.isInteger(n)&&n>=0))return!1;var i=e[1];if("object"!==typeof i||"string"!==typeof i.name)return!1;var a=!0;switch(i.name){case"XYZ":if(5!==t)return!1;break;case"Fit":case"FitB":return 2===t;case"FitH":case"FitBH":case"FitV":case"FitBV":if(3!==t)return!1;break;case"FitR":if(6!==t)return!1;a=!1;break;default:return!1}for(var r=2;r<t;r++){var o=e[r];if(!("number"===typeof o||a&&null===o))return!1}return!0}(n))return void this.navigateTo(n);console.error('PDFLinkService.setHash: "'.concat(unescape(e),'" is not ')+"a valid destination.")}}},{key:"executeNamedAction",value:function(e){switch(e){case"GoBack":this.pdfHistory&&this.pdfHistory.back();break;case"GoForward":this.pdfHistory&&this.pdfHistory.forward();break;case"NextPage":this.page<this.pagesCount&&this.page++;break;case"PrevPage":this.page>1&&this.page--;break;case"LastPage":this.page=this.pagesCount;break;case"FirstPage":this.page=1}this.eventBus.dispatch("namedaction",{source:this,action:e})}},{key:"cachePageRef",value:function(e,t){if(t){var n=0===t.gen?"".concat(t.num,"R"):"".concat(t.num,"R").concat(t.gen);this._pagesRefCache[n]=e}}},{key:"_cachedPageNumber",value:function(e){var t=0===e.gen?"".concat(e.num,"R"):"".concat(e.num,"R").concat(e.gen);return this._pagesRefCache&&this._pagesRefCache[t]||null}},{key:"isPageVisible",value:function(e){return this.pdfViewer.isPageVisible(e)}},{key:"pagesCount",get:function(){return this.pdfDocument?this.pdfDocument.numPages:0}},{key:"page",get:function(){return this.pdfViewer.currentPageNumber},set:function(e){this.pdfViewer.currentPageNumber=e}},{key:"rotation",get:function(){return this.pdfViewer.pagesRotation},set:function(e){this.pdfViewer.pagesRotation=e}}]),e}();t.PDFLinkService=a;var r=function(){function e(){Object(s.a)(this,e),this.externalLinkTarget=null,this.externalLinkRel=null,this.externalLinkEnabled=!0,this._ignoreDestinationZoom=!1}return Object(l.a)(e,[{key:"navigateTo",value:function(e){}},{key:"getDestinationHash",value:function(e){return"#"}},{key:"getAnchorUrl",value:function(e){return"#"}},{key:"setHash",value:function(e){}},{key:"executeNamedAction",value:function(e){}},{key:"cachePageRef",value:function(e,t){}},{key:"isPageVisible",value:function(e){return!0}},{key:"pagesCount",get:function(){return 0}},{key:"page",get:function(){return 0},set:function(e){}},{key:"rotation",get:function(){return 0},set:function(e){}}]),e}();t.SimpleLinkService=r},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.PDFOutlineViewer=void 0;var i=n(5),a=function(){function e(t){var n=t.container,i=t.linkService,a=t.eventBus;Object(s.a)(this,e),this.container=n,this.linkService=i,this.eventBus=a,this.reset(),a._on("toggleoutlinetree",this.toggleOutlineTree.bind(this))}return Object(l.a)(e,[{key:"reset",value:function(){this.outline=null,this.lastToggleIsShow=!0,this.container.textContent="",this.container.classList.remove("outlineWithDeepNesting")}},{key:"_dispatchEvent",value:function(e){this.eventBus.dispatch("outlineloaded",{source:this,outlineCount:e})}},{key:"_bindLink",value:function(e,t){var n=t.url,a=t.newWindow,r=t.dest,o=this.linkService;n?(0,i.addLinkAttributes)(e,{url:n,target:a?i.LinkTarget.BLANK:o.externalLinkTarget,rel:o.externalLinkRel,enabled:o.externalLinkEnabled}):(e.href=o.getDestinationHash(r),e.onclick=function(){return r&&o.navigateTo(r),!1})}},{key:"_setStyles",value:function(e,t){var n=t.bold,i=t.italic;n&&(e.style.fontWeight="bold"),i&&(e.style.fontStyle="italic")}},{key:"_addToggleButton",value:function(e,t){var n=this,i=t.count,a=t.items,r=document.createElement("div");r.className="outlineItemToggler",i<0&&Math.abs(i)===a.length&&r.classList.add("outlineItemsHidden"),r.onclick=function(t){if(t.stopPropagation(),r.classList.toggle("outlineItemsHidden"),t.shiftKey){var i=!r.classList.contains("outlineItemsHidden");n._toggleOutlineItem(e,i)}},e.insertBefore(r,e.firstChild)}},{key:"_toggleOutlineItem",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.lastToggleIsShow=t;var n,i=Qe(e.querySelectorAll(".outlineItemToggler"));try{for(i.s();!(n=i.n()).done;){n.value.classList.toggle("outlineItemsHidden",!t)}}catch(a){i.e(a)}finally{i.f()}}},{key:"toggleOutlineTree",value:function(){this.outline&&this._toggleOutlineItem(this.container,!this.lastToggleIsShow)}},{key:"render",value:function(e){var t=e.outline,n=0;if(this.outline&&this.reset(),this.outline=t||null,t){for(var a=document.createDocumentFragment(),r=[{parent:a,items:this.outline}],o=!1;r.length>0;){var s,l=r.shift(),c=Qe(l.items);try{for(c.s();!(s=c.n()).done;){var u=s.value,h=document.createElement("div");h.className="outlineItem";var d=document.createElement("a");if(this._bindLink(d,u),this._setStyles(d,u),d.textContent=(0,i.removeNullCharacters)(u.title)||"\u2013",h.appendChild(d),u.items.length>0){o=!0,this._addToggleButton(h,u);var p=document.createElement("div");p.className="outlineItems",h.appendChild(p),r.push({parent:p,items:u.items})}l.parent.appendChild(h),n++}}catch(f){c.e(f)}finally{c.f()}}o&&(this.container.classList.add("outlineWithDeepNesting"),this.lastToggleIsShow=0===a.querySelectorAll(".outlineItemsHidden").length),this.container.appendChild(a),this._dispatchEvent(n)}else this._dispatchEvent(n)}}]),e}();t.PDFOutlineViewer=a},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.PDFPresentationMode=void 0;var i=n(2),a=Math.PI/6,r=function(){function e(t){var n=this,i=t.container,a=t.pdfViewer,r=t.eventBus,o=t.contextMenuItems,l=void 0===o?null:o;Object(s.a)(this,e),this.container=i,this.pdfViewer=a,this.eventBus=r,this.active=!1,this.args=null,this.contextMenuOpen=!1,this.mouseScrollTimeStamp=0,this.mouseScrollDelta=0,this.touchSwipeState=null,l&&(l.contextFirstPage.addEventListener("click",function(){n.contextMenuOpen=!1,n.eventBus.dispatch("firstpage",{source:n})}),l.contextLastPage.addEventListener("click",function(){n.contextMenuOpen=!1,n.eventBus.dispatch("lastpage",{source:n})}),l.contextPageRotateCw.addEventListener("click",function(){n.contextMenuOpen=!1,n.eventBus.dispatch("rotatecw",{source:n})}),l.contextPageRotateCcw.addEventListener("click",function(){n.contextMenuOpen=!1,n.eventBus.dispatch("rotateccw",{source:n})}))}return Object(l.a)(e,[{key:"request",value:function(){if(this.switchInProgress||this.active||!this.pdfViewer.pagesCount)return!1;if(this._addFullscreenChangeListeners(),this._setSwitchInProgress(),this._notifyStateChange(),this.container.requestFullscreen)this.container.requestFullscreen();else if(this.container.mozRequestFullScreen)this.container.mozRequestFullScreen();else if(this.container.webkitRequestFullscreen)this.container.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT);else{if(!this.container.msRequestFullscreen)return!1;this.container.msRequestFullscreen()}return this.args={page:this.pdfViewer.currentPageNumber,previousScale:this.pdfViewer.currentScaleValue},!0}},{key:"_mouseWheel",value:function(e){if(this.active){e.preventDefault();var t=(0,i.normalizeWheelEventDelta)(e),n=(new Date).getTime(),a=this.mouseScrollTimeStamp;if(!(n>a&&n-a<50)&&((this.mouseScrollDelta>0&&t<0||this.mouseScrollDelta<0&&t>0)&&this._resetMouseScrollState(),this.mouseScrollDelta+=t,Math.abs(this.mouseScrollDelta)>=.1)){var r=this.mouseScrollDelta;this._resetMouseScrollState(),(r>0?this._goToPreviousPage():this._goToNextPage())&&(this.mouseScrollTimeStamp=n)}}}},{key:"_goToPreviousPage",value:function(){var e=this.pdfViewer.currentPageNumber;return!(e<=1)&&(this.pdfViewer.currentPageNumber=e-1,!0)}},{key:"_goToNextPage",value:function(){var e=this.pdfViewer.currentPageNumber;return!(e>=this.pdfViewer.pagesCount)&&(this.pdfViewer.currentPageNumber=e+1,!0)}},{key:"_notifyStateChange",value:function(){this.eventBus.dispatch("presentationmodechanged",{source:this,active:this.active,switchInProgress:!!this.switchInProgress})}},{key:"_setSwitchInProgress",value:function(){var e=this;this.switchInProgress&&clearTimeout(this.switchInProgress),this.switchInProgress=setTimeout(function(){e._removeFullscreenChangeListeners(),delete e.switchInProgress,e._notifyStateChange()},1500)}},{key:"_resetSwitchInProgress",value:function(){this.switchInProgress&&(clearTimeout(this.switchInProgress),delete this.switchInProgress)}},{key:"_enter",value:function(){var e=this;this.active=!0,this._resetSwitchInProgress(),this._notifyStateChange(),this.container.classList.add("pdfPresentationMode"),setTimeout(function(){e.pdfViewer.currentPageNumber=e.args.page,e.pdfViewer.currentScaleValue="page-fit"},0),this._addWindowListeners(),this._showControls(),this.contextMenuOpen=!1,this.container.setAttribute("contextmenu","viewerContextMenu"),window.getSelection().removeAllRanges()}},{key:"_exit",value:function(){var e=this,t=this.pdfViewer.currentPageNumber;this.container.classList.remove("pdfPresentationMode"),setTimeout(function(){e.active=!1,e._removeFullscreenChangeListeners(),e._notifyStateChange(),e.pdfViewer.currentScaleValue=e.args.previousScale,e.pdfViewer.currentPageNumber=t,e.args=null},0),this._removeWindowListeners(),this._hideControls(),this._resetMouseScrollState(),this.container.removeAttribute("contextmenu"),this.contextMenuOpen=!1}},{key:"_mouseDown",value:function(e){if(this.contextMenuOpen)return this.contextMenuOpen=!1,void e.preventDefault();0===e.button&&(e.target.href&&e.target.classList.contains("internalLink")||(e.preventDefault(),e.shiftKey?this._goToPreviousPage():this._goToNextPage()))}},{key:"_contextMenu",value:function(){this.contextMenuOpen=!0}},{key:"_showControls",value:function(){var e=this;this.controlsTimeout?clearTimeout(this.controlsTimeout):this.container.classList.add("pdfPresentationModeControls"),this.controlsTimeout=setTimeout(function(){e.container.classList.remove("pdfPresentationModeControls"),delete e.controlsTimeout},3e3)}},{key:"_hideControls",value:function(){this.controlsTimeout&&(clearTimeout(this.controlsTimeout),this.container.classList.remove("pdfPresentationModeControls"),delete this.controlsTimeout)}},{key:"_resetMouseScrollState",value:function(){this.mouseScrollTimeStamp=0,this.mouseScrollDelta=0}},{key:"_touchSwipe",value:function(e){if(this.active)if(e.touches.length>1)this.touchSwipeState=null;else switch(e.type){case"touchstart":this.touchSwipeState={startX:e.touches[0].pageX,startY:e.touches[0].pageY,endX:e.touches[0].pageX,endY:e.touches[0].pageY};break;case"touchmove":if(null===this.touchSwipeState)return;this.touchSwipeState.endX=e.touches[0].pageX,this.touchSwipeState.endY=e.touches[0].pageY,e.preventDefault();break;case"touchend":if(null===this.touchSwipeState)return;var t=0,n=this.touchSwipeState.endX-this.touchSwipeState.startX,i=this.touchSwipeState.endY-this.touchSwipeState.startY,r=Math.abs(Math.atan2(i,n));Math.abs(n)>50&&(r<=a||r>=Math.PI-a)?t=n:Math.abs(i)>50&&Math.abs(r-Math.PI/2)<=a&&(t=i),t>0?this._goToPreviousPage():t<0&&this._goToNextPage()}}},{key:"_addWindowListeners",value:function(){this.showControlsBind=this._showControls.bind(this),this.mouseDownBind=this._mouseDown.bind(this),this.mouseWheelBind=this._mouseWheel.bind(this),this.resetMouseScrollStateBind=this._resetMouseScrollState.bind(this),this.contextMenuBind=this._contextMenu.bind(this),this.touchSwipeBind=this._touchSwipe.bind(this),window.addEventListener("mousemove",this.showControlsBind),window.addEventListener("mousedown",this.mouseDownBind),window.addEventListener("wheel",this.mouseWheelBind,{passive:!1}),window.addEventListener("keydown",this.resetMouseScrollStateBind),window.addEventListener("contextmenu",this.contextMenuBind),window.addEventListener("touchstart",this.touchSwipeBind),window.addEventListener("touchmove",this.touchSwipeBind),window.addEventListener("touchend",this.touchSwipeBind)}},{key:"_removeWindowListeners",value:function(){window.removeEventListener("mousemove",this.showControlsBind),window.removeEventListener("mousedown",this.mouseDownBind),window.removeEventListener("wheel",this.mouseWheelBind,{passive:!1}),window.removeEventListener("keydown",this.resetMouseScrollStateBind),window.removeEventListener("contextmenu",this.contextMenuBind),window.removeEventListener("touchstart",this.touchSwipeBind),window.removeEventListener("touchmove",this.touchSwipeBind),window.removeEventListener("touchend",this.touchSwipeBind),delete this.showControlsBind,delete this.mouseDownBind,delete this.mouseWheelBind,delete this.resetMouseScrollStateBind,delete this.contextMenuBind,delete this.touchSwipeBind}},{key:"_fullscreenChange",value:function(){this.isFullscreen?this._enter():this._exit()}},{key:"_addFullscreenChangeListeners",value:function(){this.fullscreenChangeBind=this._fullscreenChange.bind(this),window.addEventListener("fullscreenchange",this.fullscreenChangeBind),window.addEventListener("mozfullscreenchange",this.fullscreenChangeBind),window.addEventListener("webkitfullscreenchange",this.fullscreenChangeBind),window.addEventListener("MSFullscreenChange",this.fullscreenChangeBind)}},{key:"_removeFullscreenChangeListeners",value:function(){window.removeEventListener("fullscreenchange",this.fullscreenChangeBind),window.removeEventListener("mozfullscreenchange",this.fullscreenChangeBind),window.removeEventListener("webkitfullscreenchange",this.fullscreenChangeBind),window.removeEventListener("MSFullscreenChange",this.fullscreenChangeBind),delete this.fullscreenChangeBind}},{key:"isFullscreen",get:function(){return!!(document.fullscreenElement||document.mozFullScreen||document.webkitIsFullScreen||document.msFullscreenElement)}}]),e}();t.PDFPresentationMode=r},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.PDFSidebarResizer=void 0;var i=n(2),a="--sidebar-width",r=200,o=function(){function e(t,n){var o=this,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i.NullL10n;Object(s.a)(this,e),this.enabled=!1,this.isRTL=!1,this.sidebarOpen=!1,this.doc=document.documentElement,this._width=null,this._outerContainerWidth=null,this._boundEvents=Object.create(null),this.outerContainer=t.outerContainer,this.resizer=t.resizer,this.eventBus=n,this.l10n=l,"undefined"!==typeof CSS&&"function"===typeof CSS.supports&&CSS.supports(a,"calc(-1 * ".concat(r,"px)"))?(this.enabled=!0,this.resizer.classList.remove("hidden"),this.l10n.getDirection().then(function(e){o.isRTL="rtl"===e}),this._addEventListeners()):console.warn("PDFSidebarResizer: The browser does not support resizing of the sidebar.")}return Object(l.a)(e,[{key:"_updateWidth",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!this.enabled)return!1;var t=(0,i.clamp)(e,r,Math.floor(this.outerContainerWidth/2));return t!==this._width&&(this._width=t,this.doc.style.setProperty(a,"".concat(t,"px")),!0)}},{key:"_mouseMove",value:function(e){var t=e.clientX;this.isRTL&&(t=this.outerContainerWidth-t),this._updateWidth(t)}},{key:"_mouseUp",value:function(e){this.outerContainer.classList.remove("sidebarResizing"),this.eventBus.dispatch("resize",{source:this});var t=this._boundEvents;window.removeEventListener("mousemove",t.mouseMove),window.removeEventListener("mouseup",t.mouseUp)}},{key:"_addEventListeners",value:function(){var e=this;if(this.enabled){var t=this._boundEvents;t.mouseMove=this._mouseMove.bind(this),t.mouseUp=this._mouseUp.bind(this),this.resizer.addEventListener("mousedown",function(n){0===n.button&&(e.outerContainer.classList.add("sidebarResizing"),window.addEventListener("mousemove",t.mouseMove),window.addEventListener("mouseup",t.mouseUp))}),this.eventBus._on("sidebarviewchanged",function(t){e.sidebarOpen=!(!t||!t.view)}),this.eventBus._on("resize",function(t){if(t&&t.source===window&&(e._outerContainerWidth=null,e._width))if(e.sidebarOpen){e.outerContainer.classList.add("sidebarResizing");var n=e._updateWidth(e._width);Promise.resolve().then(function(){e.outerContainer.classList.remove("sidebarResizing"),n&&e.eventBus.dispatch("resize",{source:e})})}else e._updateWidth(e._width)})}}},{key:"outerContainerWidth",get:function(){return this._outerContainerWidth||(this._outerContainerWidth=this.outerContainer.clientWidth),this._outerContainerWidth}}]),e}();t.PDFSidebarResizer=o},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.PDFThumbnailViewer=void 0;var i=n(2),a=n(23),r=function(){function e(t){var n=t.container,a=t.linkService,r=t.renderingQueue,o=t.l10n,l=void 0===o?i.NullL10n:o;Object(s.a)(this,e),this.container=n,this.linkService=a,this.renderingQueue=r,this.l10n=l,this.scroll=(0,i.watchScroll)(this.container,this._scrollUpdated.bind(this)),this._resetView()}return Object(l.a)(e,[{key:"_scrollUpdated",value:function(){this.renderingQueue.renderHighestPriority()}},{key:"getThumbnail",value:function(e){return this._thumbnails[e]}},{key:"_getVisibleThumbs",value:function(){return(0,i.getVisibleElements)(this.container,this._thumbnails)}},{key:"scrollThumbnailIntoView",value:function(e){if(this.pdfDocument){var t=this._thumbnails[e-1];if(t){if(e!==this._currentPageNumber)this._thumbnails[this._currentPageNumber-1].div.classList.remove("selected"),t.div.classList.add("selected");var n=this._getVisibleThumbs(),a=n.views.length;if(a>0){var r=n.first.id,o=a>1?n.last.id:r,s=!1;e<=r||e>=o?s=!0:n.views.some(function(t){return t.id===e&&(s=t.percent<100,!0)}),s&&(0,i.scrollIntoView)(t.div,{top:-19})}this._currentPageNumber=e}else console.error('scrollThumbnailIntoView: Invalid "pageNumber" parameter.')}}},{key:"cleanup",value:function(){a.PDFThumbnailView.cleanup()}},{key:"_resetView",value:function(){this._thumbnails=[],this._currentPageNumber=1,this._pageLabels=null,this._pagesRotation=0,this._pagesRequests=new WeakMap,this.container.textContent=""}},{key:"setDocument",value:function(e){var t=this;this.pdfDocument&&(this._cancelRendering(),this._resetView()),this.pdfDocument=e,e&&e.getPage(1).then(function(n){for(var i=e.numPages,r=n.getViewport({scale:1}),o=1;o<=i;++o){var s=new a.PDFThumbnailView({container:t.container,id:o,defaultViewport:r.clone(),linkService:t.linkService,renderingQueue:t.renderingQueue,disableCanvasToImageConversion:!1,l10n:t.l10n});t._thumbnails.push(s)}var l=t._thumbnails[0];l&&l.setPdfPage(n),t._thumbnails[t._currentPageNumber-1].div.classList.add("selected")}).catch(function(e){console.error("Unable to initialize thumbnail viewer",e)})}},{key:"_cancelRendering",value:function(){for(var e=0,t=this._thumbnails.length;e<t;e++)this._thumbnails[e]&&this._thumbnails[e].cancelRendering()}},{key:"setPageLabels",value:function(e){if(this.pdfDocument){e?Array.isArray(e)&&this.pdfDocument.numPages===e.length?this._pageLabels=e:(this._pageLabels=null,console.error("PDFThumbnailViewer_setPageLabels: Invalid page labels.")):this._pageLabels=null;for(var t=0,n=this._thumbnails.length;t<n;t++){var i=this._pageLabels&&this._pageLabels[t];this._thumbnails[t].setPageLabel(i)}}}},{key:"_ensurePdfPageLoaded",value:function(e){var t=this;if(e.pdfPage)return Promise.resolve(e.pdfPage);if(this._pagesRequests.has(e))return this._pagesRequests.get(e);var n=this.pdfDocument.getPage(e.id).then(function(n){return e.pdfPage||e.setPdfPage(n),t._pagesRequests.delete(e),n}).catch(function(n){console.error("Unable to get page for thumb view",n),t._pagesRequests.delete(e)});return this._pagesRequests.set(e,n),n}},{key:"forceRendering",value:function(){var e=this,t=this._getVisibleThumbs(),n=this.renderingQueue.getHighestPriority(t,this._thumbnails,this.scroll.down);return!!n&&(this._ensurePdfPageLoaded(n).then(function(){e.renderingQueue.renderView(n)}),!0)}},{key:"pagesRotation",get:function(){return this._pagesRotation},set:function(e){if(!(0,i.isValidRotation)(e))throw new Error("Invalid thumbnails rotation angle.");if(this.pdfDocument&&this._pagesRotation!==e){this._pagesRotation=e;for(var t=0,n=this._thumbnails.length;t<n;t++)this._thumbnails[t].update(e)}}}]),e}();t.PDFThumbnailViewer=r},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.PDFThumbnailView=void 0;var i=n(5),a=n(2),r=n(8),o=1,c=98,u=function(){var e=null;return{getCanvas:function(t,n){var i=e;i||(i=document.createElement("canvas"),e=i),i.width=t,i.height=n,i.mozOpaque=!0;var a=i.getContext("2d",{alpha:!1});return a.save(),a.fillStyle="rgb(255, 255, 255)",a.fillRect(0,0,t,n),a.restore(),i},destroyCanvas:function(){var t=e;t&&(t.width=0,t.height=0),e=null}}}(),h=function(){function e(t){var n=t.container,i=t.id,l=t.defaultViewport,u=t.linkService,h=t.renderingQueue,d=t.disableCanvasToImageConversion,p=void 0!==d&&d,f=t.l10n,v=void 0===f?a.NullL10n:f;Object(s.a)(this,e),this.id=i,this.renderingId="thumbnail"+i,this.pageLabel=null,this.pdfPage=null,this.rotation=0,this.viewport=l,this.pdfPageRotate=l.rotation,this.linkService=u,this.renderingQueue=h,this.renderTask=null,this.renderingState=r.RenderingStates.INITIAL,this.resume=null,this.disableCanvasToImageConversion=p,this.pageWidth=this.viewport.width,this.pageHeight=this.viewport.height,this.pageRatio=this.pageWidth/this.pageHeight,this.canvasWidth=c,this.canvasHeight=this.canvasWidth/this.pageRatio|0,this.scale=this.canvasWidth/this.pageWidth,this.l10n=v;var g=document.createElement("a");g.href=u.getAnchorUrl("#page="+i),this._thumbPageTitle.then(function(e){g.title=e}),g.onclick=function(){return u.page=i,!1},this.anchor=g;var m=document.createElement("div");m.className="thumbnail",m.setAttribute("data-page-number",this.id),this.div=m;var y=document.createElement("div");y.className="thumbnailSelectionRing";var b=2*o;y.style.width=this.canvasWidth+b+"px",y.style.height=this.canvasHeight+b+"px",this.ring=y,m.appendChild(y),g.appendChild(m),n.appendChild(g)}return Object(l.a)(e,[{key:"setPdfPage",value:function(e){this.pdfPage=e,this.pdfPageRotate=e.rotate;var t=(this.rotation+this.pdfPageRotate)%360;this.viewport=e.getViewport({scale:1,rotation:t}),this.reset()}},{key:"reset",value:function(){this.cancelRendering(),this.renderingState=r.RenderingStates.INITIAL,this.pageWidth=this.viewport.width,this.pageHeight=this.viewport.height,this.pageRatio=this.pageWidth/this.pageHeight,this.canvasHeight=this.canvasWidth/this.pageRatio|0,this.scale=this.canvasWidth/this.pageWidth,this.div.removeAttribute("data-loaded");for(var e=this.ring,t=e.childNodes,n=t.length-1;n>=0;n--)e.removeChild(t[n]);var i=2*o;e.style.width=this.canvasWidth+i+"px",e.style.height=this.canvasHeight+i+"px",this.canvas&&(this.canvas.width=0,this.canvas.height=0,delete this.canvas),this.image&&(this.image.removeAttribute("src"),delete this.image)}},{key:"update",value:function(e){"undefined"!==typeof e&&(this.rotation=e);var t=(this.rotation+this.pdfPageRotate)%360;this.viewport=this.viewport.clone({scale:1,rotation:t}),this.reset()}},{key:"cancelRendering",value:function(){this.renderTask&&(this.renderTask.cancel(),this.renderTask=null),this.resume=null}},{key:"_getPageDrawContext",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=document.createElement("canvas");this.canvas=t,t.mozOpaque=!0;var n=t.getContext("2d",{alpha:!1}),i=(0,a.getOutputScale)(n);return t.width=this.canvasWidth*i.sx|0,t.height=this.canvasHeight*i.sy|0,t.style.width=this.canvasWidth+"px",t.style.height=this.canvasHeight+"px",!e&&i.scaled&&n.scale(i.sx,i.sy),n}},{key:"_convertCanvasToImage",value:function(){var e=this;if(this.canvas&&this.renderingState===r.RenderingStates.FINISHED){if(this.disableCanvasToImageConversion)return this.canvas.className="thumbnailImage",this._thumbPageCanvas.then(function(t){e.canvas.setAttribute("aria-label",t)}),this.div.setAttribute("data-loaded",!0),void this.ring.appendChild(this.canvas);var t=document.createElement("img");t.className="thumbnailImage",this._thumbPageCanvas.then(function(e){t.setAttribute("aria-label",e)}),t.style.width=this.canvasWidth+"px",t.style.height=this.canvasHeight+"px",t.src=this.canvas.toDataURL(),this.image=t,this.div.setAttribute("data-loaded",!0),this.ring.appendChild(t),this.canvas.width=0,this.canvas.height=0,delete this.canvas}}},{key:"draw",value:function(){var e=this;if(this.renderingState!==r.RenderingStates.INITIAL)return console.error("Must be in new state before drawing"),Promise.resolve(void 0);var t=this.pdfPage;if(!t)return this.renderingState=r.RenderingStates.FINISHED,Promise.reject(new Error("pdfPage is not loaded"));this.renderingState=r.RenderingStates.RUNNING;var n=(0,i.createPromiseCapability)(),a=function(t){s===e.renderTask&&(e.renderTask=null),t instanceof i.RenderingCancelledException?n.resolve(void 0):(e.renderingState=r.RenderingStates.FINISHED,e._convertCanvasToImage(),t?n.reject(t):n.resolve(void 0))},o={canvasContext:this._getPageDrawContext(),viewport:this.viewport.clone({scale:this.scale})},s=this.renderTask=t.render(o);return s.onContinue=function(t){if(!e.renderingQueue.isHighestPriority(e))return e.renderingState=r.RenderingStates.PAUSED,void(e.resume=function(){e.renderingState=r.RenderingStates.RUNNING,t()});t()},s.promise.then(function(){a(null)},function(e){a(e)}),n.promise}},{key:"setImage",value:function(e){if(this.renderingState===r.RenderingStates.INITIAL){var t=e.canvas;if(t){this.pdfPage||this.setPdfPage(e.pdfPage),this.renderingState=r.RenderingStates.FINISHED;var n=this._getPageDrawContext(!0),i=n.canvas;if(t.width<=2*i.width)return n.drawImage(t,0,0,t.width,t.height,0,0,i.width,i.height),void this._convertCanvasToImage();for(var a=i.width<<3,o=i.height<<3,s=u.getCanvas(a,o),l=s.getContext("2d");a>t.width||o>t.height;)a>>=1,o>>=1;for(l.drawImage(t,0,0,t.width,t.height,0,0,a,o);a>2*i.width;)l.drawImage(s,0,0,a,o,0,0,a>>1,o>>1),a>>=1,o>>=1;n.drawImage(s,0,0,a,o,0,0,i.width,i.height),this._convertCanvasToImage()}}}},{key:"setPageLabel",value:function(e){var t=this;this.pageLabel="string"===typeof e?e:null,this._thumbPageTitle.then(function(e){t.anchor.title=e}),this.renderingState===r.RenderingStates.FINISHED&&this._thumbPageCanvas.then(function(e){t.image?t.image.setAttribute("aria-label",e):t.disableCanvasToImageConversion&&t.canvas&&t.canvas.setAttribute("aria-label",e)})}},{key:"_thumbPageTitle",get:function(){return this.l10n.get("thumb_page_title",{page:null!==this.pageLabel?this.pageLabel:this.id},"Page {{page}}")}},{key:"_thumbPageCanvas",get:function(){return this.l10n.get("thumb_page_canvas",{page:null!==this.pageLabel?this.pageLabel:this.id},"Thumbnail of Page {{page}}")}}],[{key:"cleanup",value:function(){u.destroyCanvas()}}]),e}();t.PDFThumbnailView=h},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.PDFViewer=void 0;var i=n(25),a=n(5),r=function(e){function t(){return Object(s.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"_scrollIntoView",value:function(e){var n=e.pageDiv,i=e.pageSpot,a=void 0===i?null:i,r=e.pageNumber,o=void 0===r?null:r;if(!a&&!this.isInPresentationMode){var s=n.offsetLeft+n.clientLeft,l=s+n.clientWidth,c=this.container,h=c.scrollLeft,d=c.clientWidth;(this._isScrollModeHorizontal||s<h||l>h+d)&&(a={left:0,top:0})}Object(te.a)(Object(u.a)(t.prototype),"_scrollIntoView",this).call(this,{pageDiv:n,pageSpot:a,pageNumber:o})}},{key:"_getVisiblePages",value:function(){return this.isInPresentationMode?this._getCurrentVisiblePage():Object(te.a)(Object(u.a)(t.prototype),"_getVisiblePages",this).call(this)}},{key:"_updateHelper",value:function(e){if(!this.isInPresentationMode){var t,n=this._currentPageNumber,i=!1,a=Qe(e);try{for(a.s();!(t=a.n()).done;){var r=t.value;if(r.percent<100)break;if(r.id===n){i=!0;break}}}catch(o){a.e(o)}finally{a.f()}i||(n=e[0].id),this._setCurrentPageNumber(n)}}},{key:"_viewerElement",get:function(){return(0,a.shadow)(this,"_viewerElement",this.viewer)}}]),t}(i.BaseViewer);t.PDFViewer=r},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.BaseViewer=void 0;var i=n(2),a=n(8),r=n(26),o=n(5),c=n(27),u=n(18),h=n(28);function d(e){var t=[];this.push=function(n){var i=t.indexOf(n);i>=0&&t.splice(i,1),t.push(n),t.length>e&&t.shift().destroy()},this.resize=function(n,a){if(e=n,a){for(var r=new Set,o=0,s=a.length;o<s;++o)r.add(a[o].id);(0,i.moveToEndOfArray)(t,function(e){return r.has(e.id)})}for(;t.length>e;)t.shift().destroy()}}var p=function(){function e(t){var n=this;if(Object(s.a)(this,e),this.constructor===e)throw new Error("Cannot initialize BaseViewer.");this._name=this.constructor.name,this.container=t.container,this.viewer=t.viewer||t.container.firstElementChild,this.eventBus=t.eventBus,this.linkService=t.linkService||new u.SimpleLinkService,this.downloadManager=t.downloadManager||null,this.findController=t.findController||null,this.removePageBorders=t.removePageBorders||!1,this.textLayerMode=Number.isInteger(t.textLayerMode)?t.textLayerMode:i.TextLayerMode.ENABLE,this.imageResourcesPath=t.imageResourcesPath||"",this.renderInteractiveForms=t.renderInteractiveForms||!1,this.enablePrintAutoRotate=t.enablePrintAutoRotate||!1,this.renderer=t.renderer||i.RendererType.CANVAS,this.enableWebGL=t.enableWebGL||!1,this.useOnlyCssZoom=t.useOnlyCssZoom||!1,this.maxCanvasPixels=t.maxCanvasPixels,this.l10n=t.l10n||i.NullL10n,this.defaultRenderingQueue=!t.renderingQueue,this.defaultRenderingQueue?(this.renderingQueue=new a.PDFRenderingQueue,this.renderingQueue.setViewer(this)):this.renderingQueue=t.renderingQueue,this.scroll=(0,i.watchScroll)(this.container,this._scrollUpdate.bind(this)),this.presentationModeState=i.PresentationModeState.UNKNOWN,this._onBeforeDraw=this._onAfterDraw=null,this._resetView(),this.removePageBorders&&this.viewer.classList.add("removePageBorders"),Promise.resolve().then(function(){n.eventBus.dispatch("baseviewerinit",{source:n})})}return Object(l.a)(e,[{key:"getPageView",value:function(e){return this._pages[e]}},{key:"_setCurrentPageNumber",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this._currentPageNumber===e?(t&&this._resetCurrentPageView(),!0):0<e&&e<=this.pagesCount&&(this._currentPageNumber=e,this.eventBus.dispatch("pagechanging",{source:this,pageNumber:e,pageLabel:this._pageLabels&&this._pageLabels[e-1]}),t&&this._resetCurrentPageView(),!0)}},{key:"_onePageRenderedOrForceFetch",value:function(){return this.container.offsetParent&&0!==this._getVisiblePages().views.length?this._onePageRenderedCapability.promise:Promise.resolve()}},{key:"setDocument",value:function(e){var t=this;if(this.pdfDocument&&(this._cancelRendering(),this._resetView(),this.findController&&this.findController.setDocument(null)),this.pdfDocument=e,e){var n=e.numPages,a=e.getPage(1);this._pagesCapability.promise.then(function(){t.eventBus.dispatch("pagesloaded",{source:t,pagesCount:n})}),this._onBeforeDraw=function(e){var n=t._pages[e.pageNumber-1];n&&t._buffer.push(n)},this.eventBus._on("pagerender",this._onBeforeDraw),this._onAfterDraw=function(e){e.cssTransform||t._onePageRenderedCapability.settled||(t._onePageRenderedCapability.resolve(),t.eventBus._off("pagerendered",t._onAfterDraw),t._onAfterDraw=null)},this.eventBus._on("pagerendered",this._onAfterDraw),a.then(function(a){t._firstPageCapability.resolve(a);for(var r=t.currentScale,o=a.getViewport({scale:r*i.CSS_UNITS}),s=t.textLayerMode!==i.TextLayerMode.DISABLE?t:null,l=1;l<=n;++l){var u=new c.PDFPageView({container:t._viewerElement,eventBus:t.eventBus,id:l,scale:r,defaultViewport:o.clone(),renderingQueue:t.renderingQueue,textLayerFactory:s,textLayerMode:t.textLayerMode,annotationLayerFactory:t,imageResourcesPath:t.imageResourcesPath,renderInteractiveForms:t.renderInteractiveForms,renderer:t.renderer,enableWebGL:t.enableWebGL,useOnlyCssZoom:t.useOnlyCssZoom,maxCanvasPixels:t.maxCanvasPixels,l10n:t.l10n});t._pages.push(u)}var h=t._pages[0];h&&(h.setPdfPage(a),t.linkService.cachePageRef(1,a.ref)),t._spreadMode!==i.SpreadMode.NONE&&t._updateSpreadMode(),t._onePageRenderedOrForceFetch().then(function(){if(t.findController&&t.findController.setDocument(e),e.loadingParams.disableAutoFetch||n>7500)t._pagesCapability.resolve();else{var i=n-1;if(i<=0)t._pagesCapability.resolve();else for(var a=function(n){e.getPage(n).then(function(e){var a=t._pages[n-1];a.pdfPage||a.setPdfPage(e),t.linkService.cachePageRef(n,e.ref),0===--i&&t._pagesCapability.resolve()},function(e){console.error("Unable to get page ".concat(n," to initialize viewer"),e),0===--i&&t._pagesCapability.resolve()})},r=2;r<=n;++r)a(r)}}),t.eventBus.dispatch("pagesinit",{source:t}),t.defaultRenderingQueue&&t.update()}).catch(function(e){console.error("Unable to initialize viewer",e)})}}},{key:"setPageLabels",value:function(e){if(this.pdfDocument){e?Array.isArray(e)&&this.pdfDocument.numPages===e.length?this._pageLabels=e:(this._pageLabels=null,console.error("".concat(this._name,".setPageLabels: Invalid page labels."))):this._pageLabels=null;for(var t=0,n=this._pages.length;t<n;t++){var i=this._pages[t],a=this._pageLabels&&this._pageLabels[t];i.setPageLabel(a)}}}},{key:"_resetView",value:function(){this._pages=[],this._currentPageNumber=1,this._currentScale=i.UNKNOWN_SCALE,this._currentScaleValue=null,this._pageLabels=null,this._buffer=new d(10),this._location=null,this._pagesRotation=0,this._pagesRequests=new WeakMap,this._firstPageCapability=(0,o.createPromiseCapability)(),this._onePageRenderedCapability=(0,o.createPromiseCapability)(),this._pagesCapability=(0,o.createPromiseCapability)(),this._scrollMode=i.ScrollMode.VERTICAL,this._spreadMode=i.SpreadMode.NONE,this._onBeforeDraw&&(this.eventBus._off("pagerender",this._onBeforeDraw),this._onBeforeDraw=null),this._onAfterDraw&&(this.eventBus._off("pagerendered",this._onAfterDraw),this._onAfterDraw=null),this.viewer.textContent="",this._updateScrollMode()}},{key:"_scrollUpdate",value:function(){0!==this.pagesCount&&this.update()}},{key:"_scrollIntoView",value:function(e){var t=e.pageDiv,n=e.pageSpot,a=void 0===n?null:n;e.pageNumber;(0,i.scrollIntoView)(t,a)}},{key:"_setScaleUpdatePages",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(this._currentScaleValue=t.toString(),function(e,t){return t===e||Math.abs(t-e)<1e-15}(this._currentScale,e))i&&this.eventBus.dispatch("scalechanging",{source:this,scale:e,presetValue:t});else{for(var a=0,r=this._pages.length;a<r;a++)this._pages[a].update(e);if(this._currentScale=e,!n){var o,s=this._currentPageNumber;!this._location||this.isInPresentationMode||this.isChangingPresentationMode||(s=this._location.pageNumber,o=[null,{name:"XYZ"},this._location.left,this._location.top,null]),this.scrollPageIntoView({pageNumber:s,destArray:o,allowNegativeOffset:!0})}this.eventBus.dispatch("scalechanging",{source:this,scale:e,presetValue:i?t:void 0}),this.defaultRenderingQueue&&this.update()}}},{key:"_setScale",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=parseFloat(e);if(n>0)this._setScaleUpdatePages(n,e,t,!1);else{var a=this._pages[this._currentPageNumber-1];if(!a)return;var r=this.isInPresentationMode||this.removePageBorders,o=r?0:i.SCROLLBAR_PADDING,s=r?0:i.VERTICAL_PADDING;if(!r&&this._isScrollModeHorizontal){var l=[s,o];o=l[0],s=l[1]}var c=(this.container.clientWidth-o)/a.width*a.scale,u=(this.container.clientHeight-s)/a.height*a.scale;switch(e){case"page-actual":n=1;break;case"page-width":n=c;break;case"page-height":n=u;break;case"page-fit":n=Math.min(c,u);break;case"auto":var h=(0,i.isPortraitOrientation)(a)?c:Math.min(u,c);n=Math.min(i.MAX_AUTO_SCALE,h);break;default:return void console.error("".concat(this._name,'._setScale: "').concat(e,'" is an unknown zoom value.'))}this._setScaleUpdatePages(n,e,t,!0)}}},{key:"_resetCurrentPageView",value:function(){this.isInPresentationMode&&this._setScale(this._currentScaleValue,!0);var e=this._pages[this._currentPageNumber-1];this._scrollIntoView({pageDiv:e.div})}},{key:"scrollPageIntoView",value:function(e){var t=e.pageNumber,n=e.destArray,a=void 0===n?null:n,r=e.allowNegativeOffset,o=void 0!==r&&r,s=e.ignoreDestinationZoom,l=void 0!==s&&s;if(this.pdfDocument){var c=Number.isInteger(t)&&this._pages[t-1];if(c)if(!this.isInPresentationMode&&a){var u,h,d=0,p=0,f=0,v=0,g=c.rotation%180!==0,m=(g?c.height:c.width)/c.scale/i.CSS_UNITS,y=(g?c.width:c.height)/c.scale/i.CSS_UNITS,b=0;switch(a[1].name){case"XYZ":d=a[2],p=a[3],b=a[4],d=null!==d?d:0,p=null!==p?p:y;break;case"Fit":case"FitB":b="page-fit";break;case"FitH":case"FitBH":b="page-width",null===(p=a[2])&&this._location&&(d=this._location.left,p=this._location.top);break;case"FitV":case"FitBV":d=a[2],f=m,v=y,b="page-height";break;case"FitR":d=a[2],p=a[3],f=a[4]-d,v=a[5]-p;var w=this.removePageBorders?0:i.SCROLLBAR_PADDING,_=this.removePageBorders?0:i.VERTICAL_PADDING;u=(this.container.clientWidth-w)/f/i.CSS_UNITS,h=(this.container.clientHeight-_)/v/i.CSS_UNITS,b=Math.min(Math.abs(u),Math.abs(h));break;default:return void console.error("".concat(this._name,".scrollPageIntoView: ")+'"'.concat(a[1].name,'" is not a valid destination type.'))}if(l||(b&&b!==this._currentScale?this.currentScaleValue=b:this._currentScale===i.UNKNOWN_SCALE&&(this.currentScaleValue=i.DEFAULT_SCALE_VALUE)),"page-fit"!==b||a[4]){var S=[c.viewport.convertToViewportPoint(d,p),c.viewport.convertToViewportPoint(d+f,p+v)],k=Math.min(S[0][0],S[1][0]),x=Math.min(S[0][1],S[1][1]);o||(k=Math.max(k,0),x=Math.max(x,0)),this._scrollIntoView({pageDiv:c.div,pageSpot:{left:k,top:x},pageNumber:t})}else this._scrollIntoView({pageDiv:c.div,pageNumber:t})}else this._setCurrentPageNumber(t,!0);else console.error("".concat(this._name,".scrollPageIntoView: ")+'"'.concat(t,'" is not a valid pageNumber parameter.'))}}},{key:"_updateLocation",value:function(e){var t=this._currentScale,n=this._currentScaleValue,i=parseFloat(n)===t?Math.round(1e4*t)/100:n,a=e.id,r="#page="+a;r+="&zoom="+i;var o=this._pages[a-1],s=this.container,l=o.getPagePoint(s.scrollLeft-e.x,s.scrollTop-e.y),c=Math.round(l[0]),u=Math.round(l[1]);r+=","+c+","+u,this._location={pageNumber:a,scale:i,top:u,left:c,rotation:this._pagesRotation,pdfOpenParams:r}}},{key:"_updateHelper",value:function(e){throw new Error("Not implemented: _updateHelper")}},{key:"update",value:function(){var e=this._getVisiblePages(),t=e.views,n=t.length;if(0!==n){var i=Math.max(10,2*n+1);this._buffer.resize(i,t),this.renderingQueue.renderHighestPriority(e),this._updateHelper(t),this._updateLocation(e.first),this.eventBus.dispatch("updateviewarea",{source:this,location:this._location})}}},{key:"containsElement",value:function(e){return this.container.contains(e)}},{key:"focus",value:function(){this.container.focus()}},{key:"_getCurrentVisiblePage",value:function(){if(!this.pagesCount)return{views:[]};var e=this._pages[this._currentPageNumber-1],t=e.div,n={id:e.id,x:t.offsetLeft+t.clientLeft,y:t.offsetTop+t.clientTop,view:e};return{first:n,last:n,views:[n]}}},{key:"_getVisiblePages",value:function(){return(0,i.getVisibleElements)(this.container,this._pages,!0,this._isScrollModeHorizontal)}},{key:"isPageVisible",value:function(e){return!!this.pdfDocument&&(e<1||e>this.pagesCount?(console.error("".concat(this._name,'.isPageVisible: "').concat(e,'" is out of bounds.')),!1):this._getVisiblePages().views.some(function(t){return t.id===e}))}},{key:"cleanup",value:function(){for(var e=0,t=this._pages.length;e<t;e++)this._pages[e]&&this._pages[e].renderingState!==a.RenderingStates.FINISHED&&this._pages[e].reset()}},{key:"_cancelRendering",value:function(){for(var e=0,t=this._pages.length;e<t;e++)this._pages[e]&&this._pages[e].cancelRendering()}},{key:"_ensurePdfPageLoaded",value:function(e){var t=this;if(e.pdfPage)return Promise.resolve(e.pdfPage);if(this._pagesRequests.has(e))return this._pagesRequests.get(e);var n=this.pdfDocument.getPage(e.id).then(function(n){return e.pdfPage||e.setPdfPage(n),t._pagesRequests.delete(e),n}).catch(function(n){console.error("Unable to get page for page view",n),t._pagesRequests.delete(e)});return this._pagesRequests.set(e,n),n}},{key:"forceRendering",value:function(e){var t=this,n=e||this._getVisiblePages(),i=this._isScrollModeHorizontal?this.scroll.right:this.scroll.down,a=this.renderingQueue.getHighestPriority(n,this._pages,i);return!!a&&(this._ensurePdfPageLoaded(a).then(function(){t.renderingQueue.renderView(a)}),!0)}},{key:"createTextLayerBuilder",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4?arguments[4]:void 0;return new h.TextLayerBuilder({textLayerDiv:e,eventBus:a,pageIndex:t,viewport:n,findController:this.isInPresentationMode?null:this.findController,enhanceTextSelection:!this.isInPresentationMode&&i})}},{key:"createAnnotationLayerBuilder",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:i.NullL10n;return new r.AnnotationLayerBuilder({pageDiv:e,pdfPage:t,imageResourcesPath:n,renderInteractiveForms:a,linkService:this.linkService,downloadManager:this.downloadManager,l10n:o})}},{key:"getPagesOverview",value:function(){var e=this._pages.map(function(e){var t=e.pdfPage.getViewport({scale:1});return{width:t.width,height:t.height,rotation:t.rotation}});if(!this.enablePrintAutoRotate)return e;var t=(0,i.isPortraitOrientation)(e[0]);return e.map(function(e){return t===(0,i.isPortraitOrientation)(e)?e:{width:e.height,height:e.width,rotation:(e.rotation+90)%360}})}},{key:"_updateScrollMode",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this._scrollMode,n=this.viewer;n.classList.toggle("scrollHorizontal",t===i.ScrollMode.HORIZONTAL),n.classList.toggle("scrollWrapped",t===i.ScrollMode.WRAPPED),this.pdfDocument&&e&&(this._currentScaleValue&&isNaN(this._currentScaleValue)&&this._setScale(this._currentScaleValue,!0),this._setCurrentPageNumber(e,!0),this.update())}},{key:"_updateSpreadMode",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(this.pdfDocument){var t=this.viewer,n=this._pages;if(t.textContent="",this._spreadMode===i.SpreadMode.NONE)for(var a=0,r=n.length;a<r;++a)t.appendChild(n[a].div);else for(var o=this._spreadMode-1,s=null,l=0,c=n.length;l<c;++l)null===s?((s=document.createElement("div")).className="spread",t.appendChild(s)):l%2===o&&(s=s.cloneNode(!1),t.appendChild(s)),s.appendChild(n[l].div);e&&(this._setCurrentPageNumber(e,!0),this.update())}}},{key:"pagesCount",get:function(){return this._pages.length}},{key:"pageViewsReady",get:function(){return!!this._pagesCapability.settled&&this._pages.every(function(e){return e&&e.pdfPage})}},{key:"currentPageNumber",get:function(){return this._currentPageNumber},set:function(e){if(!Number.isInteger(e))throw new Error("Invalid page number.");this.pdfDocument&&(this._setCurrentPageNumber(e,!0)||console.error("".concat(this._name,'.currentPageNumber: "').concat(e,'" is not a valid page.')))}},{key:"currentPageLabel",get:function(){return this._pageLabels&&this._pageLabels[this._currentPageNumber-1]},set:function(e){if(this.pdfDocument){var t=0|e;if(this._pageLabels){var n=this._pageLabels.indexOf(e);n>=0&&(t=n+1)}this._setCurrentPageNumber(t,!0)||console.error("".concat(this._name,'.currentPageLabel: "').concat(e,'" is not a valid page.'))}}},{key:"currentScale",get:function(){return this._currentScale!==i.UNKNOWN_SCALE?this._currentScale:i.DEFAULT_SCALE},set:function(e){if(isNaN(e))throw new Error("Invalid numeric scale.");this.pdfDocument&&this._setScale(e,!1)}},{key:"currentScaleValue",get:function(){return this._currentScaleValue},set:function(e){this.pdfDocument&&this._setScale(e,!1)}},{key:"pagesRotation",get:function(){return this._pagesRotation},set:function(e){if(!(0,i.isValidRotation)(e))throw new Error("Invalid pages rotation angle.");if(this.pdfDocument&&this._pagesRotation!==e){this._pagesRotation=e;for(var t=this._currentPageNumber,n=0,a=this._pages.length;n<a;n++){var r=this._pages[n];r.update(r.scale,e)}this._currentScaleValue&&this._setScale(this._currentScaleValue,!0),this.eventBus.dispatch("rotationchanging",{source:this,pagesRotation:e,pageNumber:t}),this.defaultRenderingQueue&&this.update()}}},{key:"firstPagePromise",get:function(){return this.pdfDocument?this._firstPageCapability.promise:null}},{key:"onePageRendered",get:function(){return this.pdfDocument?this._onePageRenderedCapability.promise:null}},{key:"pagesPromise",get:function(){return this.pdfDocument?this._pagesCapability.promise:null}},{key:"_viewerElement",get:function(){throw new Error("Not implemented: _viewerElement")}},{key:"_isScrollModeHorizontal",get:function(){return!this.isInPresentationMode&&this._scrollMode===i.ScrollMode.HORIZONTAL}},{key:"isInPresentationMode",get:function(){return this.presentationModeState===i.PresentationModeState.FULLSCREEN}},{key:"isChangingPresentationMode",get:function(){return this.presentationModeState===i.PresentationModeState.CHANGING}},{key:"isHorizontalScrollbarEnabled",get:function(){return!this.isInPresentationMode&&this.container.scrollWidth>this.container.clientWidth}},{key:"isVerticalScrollbarEnabled",get:function(){return!this.isInPresentationMode&&this.container.scrollHeight>this.container.clientHeight}},{key:"hasEqualPageSizes",get:function(){for(var e=this._pages[0],t=1,n=this._pages.length;t<n;++t){var i=this._pages[t];if(i.width!==e.width||i.height!==e.height)return!1}return!0}},{key:"scrollMode",get:function(){return this._scrollMode},set:function(e){if(this._scrollMode!==e){if(!(0,i.isValidScrollMode)(e))throw new Error("Invalid scroll mode: ".concat(e));this._scrollMode=e,this.eventBus.dispatch("scrollmodechanged",{source:this,mode:e}),this._updateScrollMode(this._currentPageNumber)}}},{key:"spreadMode",get:function(){return this._spreadMode},set:function(e){if(this._spreadMode!==e){if(!(0,i.isValidSpreadMode)(e))throw new Error("Invalid spread mode: ".concat(e));this._spreadMode=e,this.eventBus.dispatch("spreadmodechanged",{source:this,mode:e}),this._updateSpreadMode(this._currentPageNumber)}}}]),e}();t.BaseViewer=p},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.DefaultAnnotationLayerFactory=t.AnnotationLayerBuilder=void 0;var i=n(5),a=n(2),r=n(18),o=function(){function e(t){var n=t.pageDiv,i=t.pdfPage,r=t.linkService,o=t.downloadManager,l=t.imageResourcesPath,c=void 0===l?"":l,u=t.renderInteractiveForms,h=void 0!==u&&u,d=t.l10n,p=void 0===d?a.NullL10n:d;Object(s.a)(this,e),this.pageDiv=n,this.pdfPage=i,this.linkService=r,this.downloadManager=o,this.imageResourcesPath=c,this.renderInteractiveForms=h,this.l10n=p,this.div=null,this._cancelled=!1}return Object(l.a)(e,[{key:"render",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"display";this.pdfPage.getAnnotations({intent:n}).then(function(n){if(!t._cancelled){var a={viewport:e.clone({dontFlip:!0}),div:t.div,annotations:n,page:t.pdfPage,imageResourcesPath:t.imageResourcesPath,renderInteractiveForms:t.renderInteractiveForms,linkService:t.linkService,downloadManager:t.downloadManager};if(t.div)i.AnnotationLayer.update(a);else{if(0===n.length)return;t.div=document.createElement("div"),t.div.className="annotationLayer",t.pageDiv.appendChild(t.div),a.div=t.div,i.AnnotationLayer.render(a),t.l10n.translate(t.div)}}})}},{key:"cancel",value:function(){this._cancelled=!0}},{key:"hide",value:function(){this.div&&this.div.setAttribute("hidden","true")}}]),e}();t.AnnotationLayerBuilder=o;var c=function(){function e(){Object(s.a)(this,e)}return Object(l.a)(e,[{key:"createAnnotationLayerBuilder",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:a.NullL10n;return new o({pageDiv:e,pdfPage:t,imageResourcesPath:n,renderInteractiveForms:i,linkService:new r.SimpleLinkService,l10n:s})}}]),e}();t.DefaultAnnotationLayerFactory=c},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.PDFPageView=void 0;var i=n(2),a=n(5),r=n(8),o=n(4).viewerCompatibilityParams.maxCanvasPixels||16777216,c=function(){function e(t){Object(s.a)(this,e);var n=t.container,a=t.defaultViewport;this.id=t.id,this.renderingId="page"+this.id,this.pdfPage=null,this.pageLabel=null,this.rotation=0,this.scale=t.scale||i.DEFAULT_SCALE,this.viewport=a,this.pdfPageRotate=a.rotation,this.hasRestrictedScaling=!1,this.textLayerMode=Number.isInteger(t.textLayerMode)?t.textLayerMode:i.TextLayerMode.ENABLE,this.imageResourcesPath=t.imageResourcesPath||"",this.renderInteractiveForms=t.renderInteractiveForms||!1,this.useOnlyCssZoom=t.useOnlyCssZoom||!1,this.maxCanvasPixels=t.maxCanvasPixels||o,this.eventBus=t.eventBus,this.renderingQueue=t.renderingQueue,this.textLayerFactory=t.textLayerFactory,this.annotationLayerFactory=t.annotationLayerFactory,this.renderer=t.renderer||i.RendererType.CANVAS,this.enableWebGL=t.enableWebGL||!1,this.l10n=t.l10n||i.NullL10n,this.paintTask=null,this.paintedViewportMap=new WeakMap,this.renderingState=r.RenderingStates.INITIAL,this.resume=null,this.error=null,this.annotationLayer=null,this.textLayer=null,this.zoomLayer=null;var l=document.createElement("div");l.className="page",l.style.width=Math.floor(this.viewport.width)+"px",l.style.height=Math.floor(this.viewport.height)+"px",l.setAttribute("data-page-number",this.id),this.div=l,n.appendChild(l)}return Object(l.a)(e,[{key:"setPdfPage",value:function(e){this.pdfPage=e,this.pdfPageRotate=e.rotate;var t=(this.rotation+this.pdfPageRotate)%360;this.viewport=e.getViewport({scale:this.scale*i.CSS_UNITS,rotation:t}),this.stats=e.stats,this.reset()}},{key:"destroy",value:function(){this.reset(),this.pdfPage&&this.pdfPage.cleanup()}},{key:"_resetZoomLayer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.zoomLayer){var t=this.zoomLayer.firstChild;this.paintedViewportMap.delete(t),t.width=0,t.height=0,e&&this.zoomLayer.remove(),this.zoomLayer=null}}},{key:"reset",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.cancelRendering(t),this.renderingState=r.RenderingStates.INITIAL;var n=this.div;n.style.width=Math.floor(this.viewport.width)+"px",n.style.height=Math.floor(this.viewport.height)+"px";for(var i=n.childNodes,a=e&&this.zoomLayer||null,o=t&&this.annotationLayer&&this.annotationLayer.div||null,s=i.length-1;s>=0;s--){var l=i[s];a!==l&&o!==l&&n.removeChild(l)}n.removeAttribute("data-loaded"),o?this.annotationLayer.hide():this.annotationLayer&&(this.annotationLayer.cancel(),this.annotationLayer=null),a||(this.canvas&&(this.paintedViewportMap.delete(this.canvas),this.canvas.width=0,this.canvas.height=0,delete this.canvas),this._resetZoomLayer()),this.svg&&(this.paintedViewportMap.delete(this.svg),delete this.svg),this.loadingIconDiv=document.createElement("div"),this.loadingIconDiv.className="loadingIcon",n.appendChild(this.loadingIconDiv)}},{key:"update",value:function(e,t){this.scale=e||this.scale,"undefined"!==typeof t&&(this.rotation=t);var n=(this.rotation+this.pdfPageRotate)%360;if(this.viewport=this.viewport.clone({scale:this.scale*i.CSS_UNITS,rotation:n}),this.svg)return this.cssTransform(this.svg,!0),void this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:!0,timestamp:performance.now()});var a=!1;if(this.canvas&&this.maxCanvasPixels>0){var r=this.outputScale;(Math.floor(this.viewport.width)*r.sx|0)*(Math.floor(this.viewport.height)*r.sy|0)>this.maxCanvasPixels&&(a=!0)}if(this.canvas){if(this.useOnlyCssZoom||this.hasRestrictedScaling&&a)return this.cssTransform(this.canvas,!0),void this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:!0,timestamp:performance.now()});this.zoomLayer||this.canvas.hasAttribute("hidden")||(this.zoomLayer=this.canvas.parentNode,this.zoomLayer.style.position="absolute")}this.zoomLayer&&this.cssTransform(this.zoomLayer.firstChild),this.reset(!0,!0)}},{key:"cancelRendering",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.paintTask&&(this.paintTask.cancel(),this.paintTask=null),this.resume=null,this.textLayer&&(this.textLayer.cancel(),this.textLayer=null),!e&&this.annotationLayer&&(this.annotationLayer.cancel(),this.annotationLayer=null)}},{key:"cssTransform",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.viewport.width,i=this.viewport.height,a=this.div;e.style.width=e.parentNode.style.width=a.style.width=Math.floor(n)+"px",e.style.height=e.parentNode.style.height=a.style.height=Math.floor(i)+"px";var r=this.viewport.rotation-this.paintedViewportMap.get(e).rotation,o=Math.abs(r),s=1,l=1;90!==o&&270!==o||(s=i/n,l=n/i);var c="rotate("+r+"deg) scale("+s+","+l+")";if(e.style.transform=c,this.textLayer){var u=this.textLayer.viewport,h=this.viewport.rotation-u.rotation,d=Math.abs(h),p=n/u.width;90!==d&&270!==d||(p=n/u.height);var f,v,g=this.textLayer.textLayerDiv;switch(d){case 0:f=v=0;break;case 90:f=0,v="-"+g.style.height;break;case 180:f="-"+g.style.width,v="-"+g.style.height;break;case 270:f="-"+g.style.width,v=0;break;default:console.error("Bad rotation value.")}g.style.transform="rotate("+d+"deg) scale("+p+", "+p+") translate("+f+", "+v+")",g.style.transformOrigin="0% 0%"}t&&this.annotationLayer&&this.annotationLayer.render(this.viewport,"display")}},{key:"getPagePoint",value:function(e,t){return this.viewport.convertToPdfPoint(e,t)}},{key:"draw",value:function(){var e=this;this.renderingState!==r.RenderingStates.INITIAL&&(console.error("Must be in new state before drawing"),this.reset());var t=this.div,n=this.pdfPage;if(!n)return this.renderingState=r.RenderingStates.FINISHED,this.loadingIconDiv&&(t.removeChild(this.loadingIconDiv),delete this.loadingIconDiv),Promise.reject(new Error("pdfPage is not loaded"));this.renderingState=r.RenderingStates.RUNNING;var o=document.createElement("div");o.style.width=t.style.width,o.style.height=t.style.height,o.classList.add("canvasWrapper"),this.annotationLayer&&this.annotationLayer.div?t.insertBefore(o,this.annotationLayer.div):t.appendChild(o);var s=null;if(this.textLayerMode!==i.TextLayerMode.DISABLE&&this.textLayerFactory){var l=document.createElement("div");l.className="textLayer",l.style.width=o.style.width,l.style.height=o.style.height,this.annotationLayer&&this.annotationLayer.div?t.insertBefore(l,this.annotationLayer.div):t.appendChild(l),s=this.textLayerFactory.createTextLayerBuilder(l,this.id-1,this.viewport,this.textLayerMode===i.TextLayerMode.ENABLE_ENHANCE,this.eventBus)}this.textLayer=s;var c=null;this.renderingQueue&&(c=function(t){if(!e.renderingQueue.isHighestPriority(e))return e.renderingState=r.RenderingStates.PAUSED,void(e.resume=function(){e.renderingState=r.RenderingStates.RUNNING,t()});t()});var u=function(){var i=Object(qe.a)(Je().mark(function i(o){return Je().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(h===e.paintTask&&(e.paintTask=null),!(o instanceof a.RenderingCancelledException)){i.next=4;break}return e.error=null,i.abrupt("return");case 4:if(e.renderingState=r.RenderingStates.FINISHED,e.loadingIconDiv&&(t.removeChild(e.loadingIconDiv),delete e.loadingIconDiv),e._resetZoomLayer(!0),e.error=o,e.stats=n.stats,e.eventBus.dispatch("pagerendered",{source:e,pageNumber:e.id,cssTransform:!1,timestamp:performance.now()}),!o){i.next=12;break}throw o;case 12:case"end":return i.stop()}},i)}));return function(e){return i.apply(this,arguments)}}(),h=this.renderer===i.RendererType.SVG?this.paintOnSvg(o):this.paintOnCanvas(o);h.onRenderContinue=c,this.paintTask=h;var d=h.promise.then(function(){return u(null).then(function(){if(s){var e=n.streamTextContent({normalizeWhitespace:!0});s.setTextContentStream(e),s.render()}})},function(e){return u(e)});return this.annotationLayerFactory&&(this.annotationLayer||(this.annotationLayer=this.annotationLayerFactory.createAnnotationLayerBuilder(t,n,this.imageResourcesPath,this.renderInteractiveForms,this.l10n)),this.annotationLayer.render(this.viewport,"display")),t.setAttribute("data-loaded",!0),this.eventBus.dispatch("pagerender",{source:this,pageNumber:this.id}),d}},{key:"paintOnCanvas",value:function(e){var t=(0,a.createPromiseCapability)(),n={promise:t.promise,onRenderContinue:function(e){e()},cancel:function(){b.cancel()}},r=this.viewport,o=document.createElement("canvas");this.l10n.get("page_canvas",{page:this.id},"Page {{page}}").then(function(e){o.setAttribute("aria-label",e)}),o.setAttribute("hidden","hidden");var s=!0,l=function(){s&&(o.removeAttribute("hidden"),s=!1)};e.appendChild(o),this.canvas=o,o.mozOpaque=!0;var c=o.getContext("2d",{alpha:!1}),u=(0,i.getOutputScale)(c);if(this.outputScale=u,this.useOnlyCssZoom){var h=r.clone({scale:i.CSS_UNITS});u.sx*=h.width/r.width,u.sy*=h.height/r.height,u.scaled=!0}if(this.maxCanvasPixels>0){var d=r.width*r.height,p=Math.sqrt(this.maxCanvasPixels/d);u.sx>p||u.sy>p?(u.sx=p,u.sy=p,u.scaled=!0,this.hasRestrictedScaling=!0):this.hasRestrictedScaling=!1}var f=(0,i.approximateFraction)(u.sx),v=(0,i.approximateFraction)(u.sy);o.width=(0,i.roundToDivide)(r.width*u.sx,f[0]),o.height=(0,i.roundToDivide)(r.height*u.sy,v[0]),o.style.width=(0,i.roundToDivide)(r.width,f[1])+"px",o.style.height=(0,i.roundToDivide)(r.height,v[1])+"px",this.paintedViewportMap.set(o,r);var g=u.scaled?[u.sx,0,0,u.sy,0,0]:null,m=new Ze(c),y={canvasContext:c,transform:g,viewport:this.viewport,enableWebGL:this.enableWebGL,renderInteractiveForms:this.renderInteractiveForms,canvasFactory:m},b=this.pdfPage.render(y),w=this.pdfPage._pageIndex;return b.onContinue=function(e){l(),void 0===PDFViewerApplication.pageShapeCommands&&(PDFViewerApplication.pageShapeCommands={}),PDFViewerApplication.pageShapeCommands[w]=m.getCommands(),PDFViewerApplication.onPageReloaded&&PDFViewerApplication.onPageReloaded(w),n.onRenderContinue?n.onRenderContinue(e):e()},b.promise.then(function(){l(),t.resolve(void 0)},function(e){l(),t.reject(e)}),n}},{key:"paintOnSvg",value:function(e){var t=this,n=!1,o=function(){if(n)throw new a.RenderingCancelledException("Rendering cancelled, page ".concat(t.id),"svg")},s=this.pdfPage,l=this.viewport.clone({scale:i.CSS_UNITS});return{promise:s.getOperatorList().then(function(n){return o(),new a.SVGGraphics(s.commonObjs,s.objs).getSVG(n,l).then(function(n){o(),t.svg=n,t.paintedViewportMap.set(n,l),n.style.width=e.style.width,n.style.height=e.style.height,t.renderingState=r.RenderingStates.FINISHED,e.appendChild(n)})}),onRenderContinue:function(e){e()},cancel:function(){n=!0}}}},{key:"setPageLabel",value:function(e){this.pageLabel="string"===typeof e?e:null,null!==this.pageLabel?this.div.setAttribute("data-page-label",this.pageLabel):this.div.removeAttribute("data-page-label")}},{key:"width",get:function(){return this.viewport.width}},{key:"height",get:function(){return this.viewport.height}}]),e}();t.PDFPageView=c},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.DefaultTextLayerFactory=t.TextLayerBuilder=void 0;var i=n(5),a=function(){function e(t){var n=t.textLayerDiv,i=t.eventBus,a=t.pageIndex,r=t.viewport,o=t.findController,l=void 0===o?null:o,c=t.enhanceTextSelection,u=void 0!==c&&c;Object(s.a)(this,e),this.textLayerDiv=n,this.eventBus=i,this.textContent=null,this.textContentItemsStr=[],this.textContentStream=null,this.renderingDone=!1,this.pageIdx=a,this.pageNumber=this.pageIdx+1,this.matches=[],this.viewport=r,this.textDivs=[],this.findController=l,this.textLayerRenderTask=null,this.enhanceTextSelection=u,this._onUpdateTextLayerMatches=null,this._bindMouse()}return Object(l.a)(e,[{key:"_finishRendering",value:function(){if(this.renderingDone=!0,!this.enhanceTextSelection){var e=document.createElement("div");e.className="endOfContent",this.textLayerDiv.appendChild(e)}this.eventBus.dispatch("textlayerrendered",{source:this,pageNumber:this.pageNumber,numTextDivs:this.textDivs.length})}},{key:"render",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if((this.textContent||this.textContentStream)&&!this.renderingDone){this.cancel(),this.textDivs=[];var n=document.createDocumentFragment();this.textLayerRenderTask=(0,i.renderTextLayer)({textContent:this.textContent,textContentStream:this.textContentStream,container:n,viewport:this.viewport,textDivs:this.textDivs,textContentItemsStr:this.textContentItemsStr,timeout:t,enhanceTextSelection:this.enhanceTextSelection}),this.textLayerRenderTask.promise.then(function(){e.textLayerDiv.appendChild(n),e._finishRendering(),e._updateMatches()},function(e){}),this._onUpdateTextLayerMatches||(this._onUpdateTextLayerMatches=function(t){t.pageIndex!==e.pageIdx&&-1!==t.pageIndex||e._updateMatches()},this.eventBus._on("updatetextlayermatches",this._onUpdateTextLayerMatches))}}},{key:"cancel",value:function(){this.textLayerRenderTask&&(this.textLayerRenderTask.cancel(),this.textLayerRenderTask=null),this._onUpdateTextLayerMatches&&(this.eventBus._off("updatetextlayermatches",this._onUpdateTextLayerMatches),this._onUpdateTextLayerMatches=null)}},{key:"setTextContentStream",value:function(e){this.cancel(),this.textContentStream=e}},{key:"setTextContent",value:function(e){this.cancel(),this.textContent=e}},{key:"_convertMatches",value:function(e,t){if(!e)return[];for(var n=this.findController,i=this.textContentItemsStr,a=0,r=0,o=i.length-1,s=n.state.query.length,l=[],c=0,u=e.length;c<u;c++){for(var h=e[c];a!==o&&h>=r+i[a].length;)r+=i[a].length,a++;a===i.length&&console.error("Could not find a matching mapping");var d={begin:{divIdx:a,offset:h-r}};for(h+=t?t[c]:s;a!==o&&h>r+i[a].length;)r+=i[a].length,a++;d.end={divIdx:a,offset:h-r},l.push(d)}return l}},{key:"_renderMatches",value:function(e){if(0!==e.length){var t=this.findController,n=this.pageIdx,i=this.textContentItemsStr,a=this.textDivs,r=n===t.selected.pageIdx,o=t.selected.matchIdx,s=null,l={divIdx:-1,offset:void 0},c=o,u=c+1;if(t.state.highlightAll)c=0,u=e.length;else if(!r)return;for(var h=c;h<u;h++){var d=e[h],p=d.begin,f=d.end,v=r&&h===o,g=v?" selected":"";if(v&&t.scrollMatchIntoView({element:a[p.divIdx],pageIndex:n,matchIndex:o}),s&&p.divIdx===s.divIdx?w(s.divIdx,s.offset,p.offset):(null!==s&&w(s.divIdx,s.offset,l.offset),b(p)),p.divIdx===f.divIdx)w(p.divIdx,p.offset,f.offset,"highlight"+g);else{w(p.divIdx,p.offset,l.offset,"highlight begin"+g);for(var m=p.divIdx+1,y=f.divIdx;m<y;m++)a[m].className="highlight middle"+g;b(f,"highlight end"+g)}s=f}s&&w(s.divIdx,s.offset,l.offset)}function b(e,t){var n=e.divIdx;a[n].textContent="",w(n,0,e.offset,t)}function w(e,t,n,r){var o=a[e],s=i[e].substring(t,n),l=document.createTextNode(s);if(r){var c=document.createElement("span");return c.className=r,c.appendChild(l),void o.appendChild(c)}o.appendChild(l)}}},{key:"_updateMatches",value:function(){if(this.renderingDone){for(var e=this.findController,t=this.matches,n=this.pageIdx,i=this.textContentItemsStr,a=this.textDivs,r=-1,o=0,s=t.length;o<s;o++){for(var l=t[o],c=Math.max(r,l.begin.divIdx),u=l.end.divIdx;c<=u;c++){var h=a[c];h.textContent=i[c],h.className=""}r=l.end.divIdx+1}if(e&&e.highlightMatches){var d=e.pageMatches[n]||null,p=e.pageMatchesLength[n]||null;this.matches=this._convertMatches(d,p),this._renderMatches(this.matches)}}}},{key:"_bindMouse",value:function(){var e=this,t=this.textLayerDiv,n=null;t.addEventListener("mousedown",function(i){if(e.enhanceTextSelection&&e.textLayerRenderTask)return e.textLayerRenderTask.expandTextDivs(!0),void(n&&(clearTimeout(n),n=null));var a=t.querySelector(".endOfContent");if(a){var r=i.target!==t;if(r=r&&"none"!==window.getComputedStyle(a).getPropertyValue("-moz-user-select")){var o=t.getBoundingClientRect(),s=Math.max(0,(i.pageY-o.top)/o.height);a.style.top=(100*s).toFixed(2)+"%"}a.classList.add("active")}}),t.addEventListener("mouseup",function(){if(e.enhanceTextSelection&&e.textLayerRenderTask)n=setTimeout(function(){e.textLayerRenderTask&&e.textLayerRenderTask.expandTextDivs(!1),n=null},300);else{var i=t.querySelector(".endOfContent");i&&(i.style.top="",i.classList.remove("active"))}})}}]),e}();t.TextLayerBuilder=a;var r=function(){function e(){Object(s.a)(this,e)}return Object(l.a)(e,[{key:"createTextLayerBuilder",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4?arguments[4]:void 0;return new a({textLayerDiv:e,pageIndex:t,viewport:n,enhanceTextSelection:i,eventBus:r})}}]),e}();t.DefaultTextLayerFactory=r},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SecondaryToolbar=void 0;var i=n(2),a=n(6),r=n(30),o=function(){function e(t,n,o){var l=this;Object(s.a)(this,e),this.toolbar=t.toolbar,this.toggleButton=t.toggleButton,this.toolbarButtonContainer=t.toolbarButtonContainer,this.buttons=[{element:t.presentationModeButton,eventName:"presentationmode",close:!0},{element:t.openFileButton,eventName:"openfile",close:!0},{element:t.printButton,eventName:"print",close:!0},{element:t.downloadButton,eventName:"download",close:!0},{element:t.viewBookmarkButton,eventName:null,close:!0},{element:t.firstPageButton,eventName:"firstpage",close:!0},{element:t.lastPageButton,eventName:"lastpage",close:!0},{element:t.pageRotateCwButton,eventName:"rotatecw",close:!1},{element:t.pageRotateCcwButton,eventName:"rotateccw",close:!1},{element:t.cursorSelectToolButton,eventName:"switchcursortool",eventDetails:{tool:a.CursorTool.SELECT},close:!0},{element:t.cursorHandToolButton,eventName:"switchcursortool",eventDetails:{tool:a.CursorTool.HAND},close:!0},{element:t.scrollVerticalButton,eventName:"switchscrollmode",eventDetails:{mode:i.ScrollMode.VERTICAL},close:!0},{element:t.scrollHorizontalButton,eventName:"switchscrollmode",eventDetails:{mode:i.ScrollMode.HORIZONTAL},close:!0},{element:t.scrollWrappedButton,eventName:"switchscrollmode",eventDetails:{mode:i.ScrollMode.WRAPPED},close:!0},{element:t.spreadNoneButton,eventName:"switchspreadmode",eventDetails:{mode:i.SpreadMode.NONE},close:!0},{element:t.spreadOddButton,eventName:"switchspreadmode",eventDetails:{mode:i.SpreadMode.ODD},close:!0},{element:t.spreadEvenButton,eventName:"switchspreadmode",eventDetails:{mode:i.SpreadMode.EVEN},close:!0},{element:t.documentPropertiesButton,eventName:"documentproperties",close:!0}],this.items={firstPage:t.firstPageButton,lastPage:t.lastPageButton,pageRotateCw:t.pageRotateCwButton,pageRotateCcw:t.pageRotateCcwButton},this.mainContainer=n,this.eventBus=o,this.opened=!1,this.containerHeight=null,this.previousContainerHeight=null,this.reset(),this._bindClickListeners(),this._bindCursorToolsListener(t),this._bindScrollModeListener(t),this._bindSpreadModeListener(t),this.eventBus._on("resize",this._setMaxHeight.bind(this)),this.eventBus._on("baseviewerinit",function(e){e.source instanceof r.PDFSinglePageViewer?l.toolbarButtonContainer.classList.add("hiddenScrollModeButtons","hiddenSpreadModeButtons"):l.toolbarButtonContainer.classList.remove("hiddenScrollModeButtons","hiddenSpreadModeButtons")})}return Object(l.a)(e,[{key:"setPageNumber",value:function(e){this.pageNumber=e,this._updateUIState()}},{key:"setPagesCount",value:function(e){this.pagesCount=e,this._updateUIState()}},{key:"reset",value:function(){this.pageNumber=0,this.pagesCount=0,this._updateUIState(),this.eventBus.dispatch("secondarytoolbarreset",{source:this})}},{key:"_updateUIState",value:function(){this.items.firstPage.disabled=this.pageNumber<=1,this.items.lastPage.disabled=this.pageNumber>=this.pagesCount,this.items.pageRotateCw.disabled=0===this.pagesCount,this.items.pageRotateCcw.disabled=0===this.pagesCount}},{key:"_bindClickListeners",value:function(){var e=this;this.toggleButton.addEventListener("click",this.toggle.bind(this));var t,n=Qe(this.buttons);try{var i=function(){var n=t.value,i=n.element,a=n.eventName,r=n.close,o=n.eventDetails;i.addEventListener("click",function(t){if(null!==a){var n={source:e};for(var i in o)n[i]=o[i];e.eventBus.dispatch(a,n)}r&&e.close()})};for(n.s();!(t=n.n()).done;)i()}catch(a){n.e(a)}finally{n.f()}}},{key:"_bindCursorToolsListener",value:function(e){this.eventBus._on("cursortoolchanged",function(t){var n=t.tool;e.cursorSelectToolButton.classList.toggle("toggled",n===a.CursorTool.SELECT),e.cursorHandToolButton.classList.toggle("toggled",n===a.CursorTool.HAND)})}},{key:"_bindScrollModeListener",value:function(e){var t=this;function n(t){var n=t.mode;e.scrollVerticalButton.classList.toggle("toggled",n===i.ScrollMode.VERTICAL),e.scrollHorizontalButton.classList.toggle("toggled",n===i.ScrollMode.HORIZONTAL),e.scrollWrappedButton.classList.toggle("toggled",n===i.ScrollMode.WRAPPED);var a=n===i.ScrollMode.HORIZONTAL;e.spreadNoneButton.disabled=a,e.spreadOddButton.disabled=a,e.spreadEvenButton.disabled=a}this.eventBus._on("scrollmodechanged",n),this.eventBus._on("secondarytoolbarreset",function(e){e.source===t&&n({mode:i.ScrollMode.VERTICAL})})}},{key:"_bindSpreadModeListener",value:function(e){var t=this;function n(t){var n=t.mode;e.spreadNoneButton.classList.toggle("toggled",n===i.SpreadMode.NONE),e.spreadOddButton.classList.toggle("toggled",n===i.SpreadMode.ODD),e.spreadEvenButton.classList.toggle("toggled",n===i.SpreadMode.EVEN)}this.eventBus._on("spreadmodechanged",n),this.eventBus._on("secondarytoolbarreset",function(e){e.source===t&&n({mode:i.SpreadMode.NONE})})}},{key:"open",value:function(){this.opened||(this.opened=!0,this._setMaxHeight(),this.toggleButton.classList.add("toggled"),this.toolbar.classList.remove("hidden"))}},{key:"close",value:function(){this.opened&&(this.opened=!1,this.toolbar.classList.add("hidden"),this.toggleButton.classList.remove("toggled"))}},{key:"toggle",value:function(){this.opened?this.close():this.open()}},{key:"_setMaxHeight",value:function(){this.opened&&(this.containerHeight=this.mainContainer.clientHeight,this.containerHeight!==this.previousContainerHeight&&(this.toolbarButtonContainer.style.maxHeight="".concat(this.containerHeight-i.SCROLLBAR_PADDING,"px"),this.previousContainerHeight=this.containerHeight))}},{key:"isOpen",get:function(){return this.opened}}]),e}();t.SecondaryToolbar=o},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.PDFSinglePageViewer=void 0;var i=n(25),a=n(5),r=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).eventBus._on("pagesinit",function(e){n._ensurePageViewVisible()}),n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"_resetView",value:function(){Object(te.a)(Object(u.a)(t.prototype),"_resetView",this).call(this),this._previousPageNumber=1,this._shadowViewer=document.createDocumentFragment(),this._updateScrollDown=null}},{key:"_ensurePageViewVisible",value:function(){var e=this._pages[this._currentPageNumber-1],t=this._pages[this._previousPageNumber-1],n=this.viewer.childNodes;switch(n.length){case 0:this.viewer.appendChild(e.div);break;case 1:if(n[0]!==t.div)throw new Error("_ensurePageViewVisible: Unexpected previously visible page.");if(e===t)break;this._shadowViewer.appendChild(t.div),this.viewer.appendChild(e.div),this.container.scrollTop=0;break;default:throw new Error("_ensurePageViewVisible: Only one page should be visible at a time.")}this._previousPageNumber=this._currentPageNumber}},{key:"_scrollUpdate",value:function(){this._updateScrollDown&&this._updateScrollDown(),Object(te.a)(Object(u.a)(t.prototype),"_scrollUpdate",this).call(this)}},{key:"_scrollIntoView",value:function(e){var n=this,i=e.pageDiv,a=e.pageSpot,r=void 0===a?null:a,o=e.pageNumber,s=void 0===o?null:o;s&&this._setCurrentPageNumber(s);var l=this._currentPageNumber>=this._previousPageNumber;this._ensurePageViewVisible(),this.update(),Object(te.a)(Object(u.a)(t.prototype),"_scrollIntoView",this).call(this,{pageDiv:i,pageSpot:r,pageNumber:s}),this._updateScrollDown=function(){n.scroll.down=l,n._updateScrollDown=null}}},{key:"_getVisiblePages",value:function(){return this._getCurrentVisiblePage()}},{key:"_updateHelper",value:function(e){}},{key:"_updateScrollMode",value:function(){}},{key:"_updateSpreadMode",value:function(){}},{key:"_viewerElement",get:function(){return(0,a.shadow)(this,"_viewerElement",this._shadowViewer)}},{key:"_isScrollModeHorizontal",get:function(){return(0,a.shadow)(this,"_isScrollModeHorizontal",!1)}}]),t}(i.BaseViewer);t.PDFSinglePageViewer=r},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Toolbar=void 0;var i=n(2),a=function(){function e(t,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i.NullL10n;Object(s.a)(this,e),this.toolbar=t.container,this.eventBus=n,this.l10n=a,this.buttons=[{element:t.previous,eventName:"previouspage"},{element:t.next,eventName:"nextpage"},{element:t.zoomIn,eventName:"zoomin"},{element:t.zoomOut,eventName:"zoomout"},{element:t.openFile,eventName:"openfile"},{element:t.print,eventName:"print"},{element:t.presentationModeButton,eventName:"presentationmode"},{element:t.download,eventName:"download"},{element:t.viewBookmark,eventName:null}],this.items={numPages:t.numPages,pageNumber:t.pageNumber,scaleSelectContainer:t.scaleSelectContainer,scaleSelect:t.scaleSelect,customScaleOption:t.customScaleOption,previous:t.previous,next:t.next,zoomIn:t.zoomIn,zoomOut:t.zoomOut},this._wasLocalized=!1,this.reset(),this._bindListeners()}return Object(l.a)(e,[{key:"setPageNumber",value:function(e,t){this.pageNumber=e,this.pageLabel=t,this._updateUIState(!1)}},{key:"setPagesCount",value:function(e,t){this.pagesCount=e,this.hasPageLabels=t,this._updateUIState(!0)}},{key:"setPageScale",value:function(e,t){this.pageScaleValue=(e||t).toString(),this.pageScale=t,this._updateUIState(!1)}},{key:"reset",value:function(){this.pageNumber=0,this.pageLabel=null,this.hasPageLabels=!1,this.pagesCount=0,this.pageScaleValue=i.DEFAULT_SCALE_VALUE,this.pageScale=i.DEFAULT_SCALE,this._updateUIState(!0),this.updateLoadingIndicatorState()}},{key:"_bindListeners",value:function(){var e,t=this,n=this.items,a=n.pageNumber,r=n.scaleSelect,o=this,s=Qe(this.buttons);try{var l=function(){var n=e.value,i=n.element,a=n.eventName;i.addEventListener("click",function(e){null!==a&&t.eventBus.dispatch(a,{source:t})})};for(s.s();!(e=s.n()).done;)l()}catch(c){s.e(c)}finally{s.f()}a.addEventListener("click",function(){this.select()}),a.addEventListener("change",function(){o.eventBus.dispatch("pagenumberchanged",{source:o,value:this.value})}),r.addEventListener("change",function(){"custom"!==this.value&&o.eventBus.dispatch("scalechanged",{source:o,value:this.value})}),r.oncontextmenu=i.noContextMenuHandler,this.eventBus._on("localized",function(){t._wasLocalized=!0,t._adjustScaleWidth(),t._updateUIState(!0)})}},{key:"_updateUIState",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this._wasLocalized){var t=this.pageNumber,n=this.pagesCount,a=this.pageScaleValue,r=this.pageScale,o=this.items;e&&(this.hasPageLabels?o.pageNumber.type="text":(o.pageNumber.type="number",this.l10n.get("of_pages",{pagesCount:n},"of {{pagesCount}}").then(function(e){o.numPages.textContent=e})),o.pageNumber.max=n),this.hasPageLabels?(o.pageNumber.value=this.pageLabel,this.l10n.get("page_of_pages",{pageNumber:t,pagesCount:n},"({{pageNumber}} of {{pagesCount}})").then(function(e){o.numPages.textContent=e})):o.pageNumber.value=t,o.previous.disabled=t<=1,o.next.disabled=t>=n,o.zoomOut.disabled=r<=i.MIN_SCALE,o.zoomIn.disabled=r>=i.MAX_SCALE;var s=Math.round(1e4*r)/100;this.l10n.get("page_scale_percent",{scale:s},"{{scale}}%").then(function(e){var t,n=!1,i=Qe(o.scaleSelect.options);try{for(i.s();!(t=i.n()).done;){var r=t.value;r.value===a?(r.selected=!0,n=!0):r.selected=!1}}catch(s){i.e(s)}finally{i.f()}n||(o.customScaleOption.textContent=e,o.customScaleOption.selected=!0)})}}},{key:"updateLoadingIndicatorState",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.items.pageNumber.classList.toggle("visiblePageIsLoading",e)}},{key:"_adjustScaleWidth",value:function(){var e=Object(qe.a)(Je().mark(function e(){var t,n,a,r,o,s,l,c,u,h,d,p,f,v;return Je().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.items,n=this.l10n,a=Promise.all([n.get("page_scale_auto",null,"Automatic Zoom"),n.get("page_scale_actual",null,"Actual Size"),n.get("page_scale_fit",null,"Page Fit"),n.get("page_scale_width",null,"Page Width")]),(r=document.createElement("canvas")).mozOpaque=!0,o=r.getContext("2d",{alpha:!1}),e.next=7,i.animationStarted;case 7:return s=getComputedStyle(t.scaleSelect),l=s.fontSize,c=s.fontFamily,o.font="".concat(l," ").concat(c),u=0,e.t0=Qe,e.next=13,a;case 13:e.t1=e.sent,h=(0,e.t0)(e.t1);try{for(h.s();!(d=h.n()).done;)p=d.value,f=o.measureText(p),(v=f.width)>u&&(u=v)}catch(g){h.e(g)}finally{h.f()}22,(u+=33)>140&&(t.scaleSelect.style.width="".concat(u+22,"px"),t.scaleSelectContainer.style.width="".concat(u,"px")),r.width=0,r.height=0,r=o=null;case 22:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}]),e}();t.Toolbar=a},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ViewHistory=void 0;var i=20,a=function(){function e(t){var n=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i;Object(s.a)(this,e),this.fingerprint=t,this.cacheSize=a,this._initializedPromise=this._readFromStorage().then(function(e){var t=JSON.parse(e||"{}"),i=-1;if(Array.isArray(t.files)){for(;t.files.length>=n.cacheSize;)t.files.shift();for(var a=0,r=t.files.length;a<r;a++){if(t.files[a].fingerprint===n.fingerprint){i=a;break}}}else t.files=[];-1===i&&(i=t.files.push({fingerprint:n.fingerprint})-1),n.file=t.files[i],n.database=t})}return Object(l.a)(e,[{key:"_writeToStorage",value:function(){var e=Object(qe.a)(Je().mark(function e(){var t;return Je().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=JSON.stringify(this.database),localStorage.setItem("pdfjs.history",t);case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"_readFromStorage",value:function(){var e=Object(qe.a)(Je().mark(function e(){return Je().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",localStorage.getItem("pdfjs.history"));case 1:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()},{key:"set",value:function(){var e=Object(qe.a)(Je().mark(function e(t,n){return Je().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._initializedPromise;case 2:return this.file[t]=n,e.abrupt("return",this._writeToStorage());case 4:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"setMultiple",value:function(){var e=Object(qe.a)(Je().mark(function e(t){var n;return Je().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._initializedPromise;case 2:for(n in t)this.file[n]=t[n];return e.abrupt("return",this._writeToStorage());case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"get",value:function(){var e=Object(qe.a)(Je().mark(function e(t,n){var i;return Je().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._initializedPromise;case 2:return i=this.file[t],e.abrupt("return",void 0!==i?i:n);case 4:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"getMultiple",value:function(){var e=Object(qe.a)(Je().mark(function e(t){var n,i,a;return Je().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._initializedPromise;case 2:for(i in n=Object.create(null),t)a=this.file[i],n[i]=void 0!==a?a:t[i];return e.abrupt("return",n);case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}]),e}();t.ViewHistory=a},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.GenericCom=void 0;var i=n(1),a=n(34),r=n(35),o=n(36);t.GenericCom={};var d=function(e){function t(){return Object(s.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"_writeToStorage",value:function(){var e=Object(qe.a)(Je().mark(function e(t){return Je().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:localStorage.setItem("pdfjs.preferences",JSON.stringify(t));case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},{key:"_readFromStorage",value:function(){var e=Object(qe.a)(Je().mark(function e(t){return Je().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",JSON.parse(localStorage.getItem("pdfjs.preferences")));case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()}]),t}(a.BasePreferences),p=function(e){function t(){return Object(s.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,null,[{key:"createDownloadManager",value:function(e){return new r.DownloadManager(e)}},{key:"createPreferences",value:function(){return new d}},{key:"createL10n",value:function(e){var t=e.locale,n=void 0===t?"en-US":t;return new o.GenericL10n(n)}}]),t}(i.DefaultExternalServices);i.PDFViewerApplication.externalServices=p},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.BasePreferences=void 0;n(3);var i=null;var a=function(){function e(){var t=this;if(Object(s.a)(this,e),this.constructor===e)throw new Error("Cannot initialize BasePreferences.");this.prefs=null,this._initializedPromise=(i||(i=Promise.resolve({cursorToolOnLoad:0,defaultZoomValue:"",disablePageLabels:!1,enablePermissions:!1,enablePrintAutoRotate:!1,enableWebGL:!1,externalLinkTarget:0,historyUpdateUrl:!1,ignoreDestinationZoom:!1,pdfBugEnabled:!1,renderer:"canvas",renderInteractiveForms:!1,sidebarViewOnLoad:-1,scrollModeOnLoad:-1,spreadModeOnLoad:-1,textLayerMode:1,useOnlyCssZoom:!1,viewOnLoad:0,disableAutoFetch:!1,disableFontFace:!1,disableRange:!1,disableStream:!1})),i).then(function(e){return Object.defineProperty(t,"defaults",{value:Object.freeze(e),writable:!1,enumerable:!0,configurable:!1}),t.prefs=Object.assign(Object.create(null),e),t._readFromStorage(e)}).then(function(e){if(e)for(var n in e){var i=t.defaults[n],a=e[n];void 0!==i&&typeof a===typeof i&&(t.prefs[n]=a)}})}return Object(l.a)(e,[{key:"_writeToStorage",value:function(){var e=Object(qe.a)(Je().mark(function e(t){return Je().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("Not implemented: _writeToStorage");case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},{key:"_readFromStorage",value:function(){var e=Object(qe.a)(Je().mark(function e(t){return Je().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("Not implemented: _readFromStorage");case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},{key:"reset",value:function(){var e=Object(qe.a)(Je().mark(function e(){return Je().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._initializedPromise;case 2:return this.prefs=Object.assign(Object.create(null),this.defaults),e.abrupt("return",this._writeToStorage(this.defaults));case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"set",value:function(){var e=Object(qe.a)(Je().mark(function e(t,n){var i,a,r;return Je().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._initializedPromise;case 2:if(void 0!==(i=this.defaults[t])){e.next=7;break}throw new Error('Set preference: "'.concat(t,'" is undefined.'));case 7:if(void 0!==n){e.next=9;break}throw new Error("Set preference: no value is specified.");case 9:if((a=typeof n)===(r=typeof i)){e.next=19;break}if("number"!==a||"string"!==r){e.next=16;break}n=n.toString(),e.next=17;break;case 16:throw new Error('Set preference: "'.concat(n,'" is a ').concat(a,", ")+"expected a ".concat(r,"."));case 17:e.next=21;break;case 19:if("number"!==a||Number.isInteger(n)){e.next=21;break}throw new Error('Set preference: "'.concat(n,'" must be an integer.'));case 21:return this.prefs[t]=n,e.abrupt("return",this._writeToStorage(this.prefs));case 23:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"get",value:function(){var e=Object(qe.a)(Je().mark(function e(t){var n,i;return Je().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._initializedPromise;case 2:if(void 0!==(n=this.defaults[t])){e.next=7;break}throw new Error('Get preference: "'.concat(t,'" is undefined.'));case 7:if(void 0===(i=this.prefs[t])){e.next=10;break}return e.abrupt("return",i);case 10:return e.abrupt("return",n);case 11:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"getAll",value:function(){var e=Object(qe.a)(Je().mark(function e(){return Je().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._initializedPromise;case 2:return e.abrupt("return",Object.assign(Object.create(null),this.defaults,this.prefs));case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}]),e}();t.BasePreferences=a},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.DownloadManager=void 0;var i=n(5),a=n(4).viewerCompatibilityParams.disableCreateObjectURL||!1;function r(e,t){var n=document.createElement("a");if(!n.click)throw new Error('DownloadManager: "a.click()" is not supported.');n.href=e,n.target="_parent","download"in n&&(n.download=t),(document.body||document.documentElement).appendChild(n),n.click(),n.remove()}var o=function(){function e(t){var n=t.disableCreateObjectURL,i=void 0===n?a:n;Object(s.a)(this,e),this.disableCreateObjectURL=i}return Object(l.a)(e,[{key:"downloadUrl",value:function(e,t){(0,i.createValidAbsoluteUrl)(e,"http://example.com")&&r(e+"#pdfjs.action=download",t)}},{key:"downloadData",value:function(e,t,n){navigator.msSaveBlob?navigator.msSaveBlob(new Blob([e],{type:n}),t):r((0,i.createObjectURL)(e,n,this.disableCreateObjectURL),t)}},{key:"download",value:function(e,t,n){navigator.msSaveBlob?navigator.msSaveBlob(e,n)||this.downloadUrl(t,n):this.disableCreateObjectURL?this.downloadUrl(t,n):r(URL.createObjectURL(e),n)}}]),e}();t.DownloadManager=o},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.GenericL10n=void 0,n(37);var i=document.webL10n,a=function(){function e(t){Object(s.a)(this,e),this._lang=t,this._ready=new Promise(function(e,n){i.setLanguage(t,function(){e(i)})})}return Object(l.a)(e,[{key:"getLanguage",value:function(){var e=Object(qe.a)(Je().mark(function e(){var t;return Je().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._ready;case 2:return t=e.sent,e.abrupt("return",t.getLanguage());case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getDirection",value:function(){var e=Object(qe.a)(Je().mark(function e(){var t;return Je().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._ready;case 2:return t=e.sent,e.abrupt("return",t.getDirection());case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"get",value:function(){var e=Object(qe.a)(Je().mark(function e(t,n,i){var a;return Je().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._ready;case 2:return a=e.sent,e.abrupt("return",a.get(t,n,i));case 4:case"end":return e.stop()}},e,this)}));return function(t,n,i){return e.apply(this,arguments)}}()},{key:"translate",value:function(){var e=Object(qe.a)(Je().mark(function e(t){var n;return Je().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._ready;case 2:return n=e.sent,e.abrupt("return",n.translate(t));case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}]),e}();t.GenericL10n=a},function(e,t,n){document.webL10n=function(e,t,n){var i={},a="",r="textContent",o="",s={},l="loading",c=!0;function u(e,t,n){t=t||function(e){},n=n||function(){};var i=new XMLHttpRequest;i.open("GET",e,c),i.overrideMimeType&&i.overrideMimeType("text/plain; charset=utf-8"),i.onreadystatechange=function(){4==i.readyState&&(200==i.status||0===i.status?t(i.responseText):n())},i.onerror=n,i.ontimeout=n;try{i.send(null)}catch(a){n()}}function h(e,t,n,o){var s=e.replace(/[^\/]*$/,"")||"./";u(e,function(e){a+=e,function(e,n){var i={},a=/^\s*|\s*$/,r=/^\s*#|^\s*$/,o=/^\s*\[(.*)\]\s*$/,l=/^\s*@import\s+url\((.*)\)\s*$/i,c=/^([^=\s]*)\s*=\s*(.+)$/;function h(e,n,u){var h=e.replace(a,"").split(/[\r\n]+/),p="*",f=t.split("-",1)[0],v=!1,g="";!function e(){for(;;){if(!h.length)return void u();var a=h.shift();if(!r.test(a)){if(n){if(g=o.exec(a)){p=g[1].toLowerCase(),v="*"!==p&&p!==t&&p!==f;continue}if(v)continue;if(g=l.exec(a))return void d(s+g[1],e)}var m=a.match(c);m&&3==m.length&&(i[m[1]]=(y=m[2]).lastIndexOf("\\")<0?y:y.replace(/\\\\/g,"\\").replace(/\\n/g,"\n").replace(/\\r/g,"\r").replace(/\\t/g,"\t").replace(/\\b/g,"\b").replace(/\\f/g,"\f").replace(/\\{/g,"{").replace(/\\}/g,"}").replace(/\\"/g,'"').replace(/\\'/g,"'"))}}var y}()}function d(e,t){u(e,function(e){h(e,!1,t)},function(){console.warn(e+" not found."),t()})}h(e,!0,function(){n(i)})}(e,function(e){for(var t in e){var a,o,s=t.lastIndexOf(".");s>0?(a=t.substring(0,s),o=t.substring(s+1)):(a=t,o=r),i[a]||(i[a]={}),i[a][o]=e[t]}n&&n()})},o)}function d(e,n){e&&(e=e.toLowerCase()),n=n||function(){},i={},a="",o="",o=e;var r=t.querySelectorAll('link[type="application/l10n"]'),s=r.length;if(0!==s){var c,u=0;c=function(){++u>=s&&(n(),l="complete")};for(var d=0;d<s;d++){new g(r[d]).load(e,c)}}else{var p=function(){var e=t.querySelector('script[type="application/l10n"]');return e?JSON.parse(e.innerHTML):null}();if(p&&p.locales&&p.default_locale){if(console.log("using the embedded JSON directory, early way out"),!(i=p.locales[e])){var f=p.default_locale.toLowerCase();for(var v in p.locales){if((v=v.toLowerCase())===e){i=p.locales[e];break}v===f&&(i=p.locales[f])}}n()}else console.log("no resource to load, early way out");l="complete"}function g(e){var t=e.href;this.load=function(e,n){h(t,e,n,function(){console.warn(t+" not found."),console.warn('"'+e+'" resource not found'),o="",n()})}}}function p(e,t,n){var a=i[e];if(!a){if(console.warn("#"+e+" is undefined."),!n)return null;a=n}var r={};for(var o in a){var s=a[o];s=v(s=f(s,t,e,o),t,e),r[o]=s}return r}function f(e,t,n,a){var r=/\{\[\s*([a-zA-Z]+)\(([a-zA-Z]+)\)\s*\]\}/.exec(e);if(!r||!r.length)return e;var o,l=r[1],c=r[2];(t&&c in t?o=t[c]:c in i&&(o=i[c]),l in s)&&(e=(0,s[l])(e,o,n,a));return e}function v(e,t,n){return e.replace(/\{\{\s*(.+?)\s*\}\}/g,function(e,a){return t&&a in t?t[a]:a in i?i[a]:(console.log("argument {{"+a+"}} for #"+n+" is undefined."),e)})}function g(e){var n=function(e){if(!e)return{};var t=e.getAttribute("data-l10n-id"),n=e.getAttribute("data-l10n-args"),i={};if(n)try{i=JSON.parse(n)}catch(a){console.warn("could not parse arguments for #"+t)}return{id:t,args:i}}(e);if(n.id){var i=p(n.id,n.args);if(i){if(i[r]){if(0===function(e){if(e.children)return e.children.length;if("undefined"!==typeof e.childElementCount)return e.childElementCount;for(var t=0,n=0;n<e.childNodes.length;n++)t+=1===e.nodeType?1:0;return t}(e))e[r]=i[r];else{for(var a=e.childNodes,o=!1,s=0,l=a.length;s<l;s++)3===a[s].nodeType&&/\S/.test(a[s].nodeValue)&&(o?a[s].nodeValue="":(a[s].nodeValue=i[r],o=!0));if(!o){var c=t.createTextNode(i[r]);e.insertBefore(c,e.firstChild)}}delete i[r]}for(var u in i)e[u]=i[u]}else console.warn("#"+n.id+" is undefined.")}}return s.plural=function(e,t,n,a){var l=parseFloat(t);if(isNaN(l))return e;if(a!=r)return e;s._pluralRules||(s._pluralRules=function(e){function t(e,t){return-1!==t.indexOf(e)}function n(e,t,n){return t<=e&&e<=n}var i={0:function(e){return"other"},1:function(e){return n(e%100,3,10)?"few":0===e?"zero":n(e%100,11,99)?"many":2==e?"two":1==e?"one":"other"},2:function(e){return 0!==e&&e%10===0?"many":2==e?"two":1==e?"one":"other"},3:function(e){return 1==e?"one":"other"},4:function(e){return n(e,0,1)?"one":"other"},5:function(e){return n(e,0,2)&&2!=e?"one":"other"},6:function(e){return 0===e?"zero":e%10==1&&e%100!=11?"one":"other"},7:function(e){return 2==e?"two":1==e?"one":"other"},8:function(e){return n(e,3,6)?"few":n(e,7,10)?"many":2==e?"two":1==e?"one":"other"},9:function(e){return 0===e||1!=e&&n(e%100,1,19)?"few":1==e?"one":"other"},10:function(e){return n(e%10,2,9)&&!n(e%100,11,19)?"few":e%10!=1||n(e%100,11,19)?"other":"one"},11:function(e){return n(e%10,2,4)&&!n(e%100,12,14)?"few":e%10===0||n(e%10,5,9)||n(e%100,11,14)?"many":e%10==1&&e%100!=11?"one":"other"},12:function(e){return n(e,2,4)?"few":1==e?"one":"other"},13:function(e){return n(e%10,2,4)&&!n(e%100,12,14)?"few":1!=e&&n(e%10,0,1)||n(e%10,5,9)||n(e%100,12,14)?"many":1==e?"one":"other"},14:function(e){return n(e%100,3,4)?"few":e%100==2?"two":e%100==1?"one":"other"},15:function(e){return 0===e||n(e%100,2,10)?"few":n(e%100,11,19)?"many":1==e?"one":"other"},16:function(e){return e%10==1&&11!=e?"one":"other"},17:function(e){return 3==e?"few":0===e?"zero":6==e?"many":2==e?"two":1==e?"one":"other"},18:function(e){return 0===e?"zero":n(e,0,2)&&0!==e&&2!=e?"one":"other"},19:function(e){return n(e,2,10)?"few":n(e,0,1)?"one":"other"},20:function(e){return!n(e%10,3,4)&&e%10!=9||n(e%100,10,19)||n(e%100,70,79)||n(e%100,90,99)?e%1e6===0&&0!==e?"many":e%10!=2||t(e%100,[12,72,92])?e%10!=1||t(e%100,[11,71,91])?"other":"one":"two":"few"},21:function(e){return 0===e?"zero":1==e?"one":"other"},22:function(e){return n(e,0,1)||n(e,11,99)?"one":"other"},23:function(e){return n(e%10,1,2)||e%20===0?"one":"other"},24:function(e){return n(e,3,10)||n(e,13,19)?"few":t(e,[2,12])?"two":t(e,[1,11])?"one":"other"}},a={af:3,ak:4,am:4,ar:1,asa:3,az:0,be:11,bem:3,bez:3,bg:3,bh:4,bm:0,bn:3,bo:0,br:20,brx:3,bs:11,ca:3,cgg:3,chr:3,cs:12,cy:17,da:3,de:3,dv:3,dz:0,ee:3,el:3,en:3,eo:3,es:3,et:3,eu:3,fa:0,ff:5,fi:3,fil:4,fo:3,fr:5,fur:3,fy:3,ga:8,gd:24,gl:3,gsw:3,gu:3,guw:4,gv:23,ha:3,haw:3,he:2,hi:4,hr:11,hu:0,id:0,ig:0,ii:0,is:3,it:3,iu:7,ja:0,jmc:3,jv:0,ka:0,kab:5,kaj:3,kcg:3,kde:0,kea:0,kk:3,kl:3,km:0,kn:0,ko:0,ksb:3,ksh:21,ku:3,kw:7,lag:18,lb:3,lg:3,ln:4,lo:0,lt:10,lv:6,mas:3,mg:4,mk:16,ml:3,mn:3,mo:9,mr:3,ms:0,mt:15,my:0,nah:3,naq:7,nb:3,nd:3,ne:3,nl:3,nn:3,no:3,nr:3,nso:4,ny:3,nyn:3,om:3,or:3,pa:3,pap:3,pl:13,ps:3,pt:3,rm:3,ro:9,rof:3,ru:11,rwk:3,sah:0,saq:3,se:7,seh:3,ses:0,sg:0,sh:11,shi:19,sk:12,sl:14,sma:7,smi:7,smj:7,smn:7,sms:7,sn:3,so:3,sq:3,sr:11,ss:3,ssy:3,st:3,sv:3,sw:3,syr:3,ta:3,te:3,teo:3,th:0,ti:4,tig:3,tk:3,tl:4,tn:3,to:0,tr:0,ts:3,tzm:22,uk:11,ur:3,ve:3,vi:0,vun:3,wa:4,wae:3,wo:0,xh:3,xog:3,yo:0,zh:0,zu:3}[e.replace(/-.*$/,"")];return a in i?i[a]:(console.warn("plural form unknown for ["+e+"]"),function(){return"other"})}(o));var c="["+s._pluralRules(l)+"]";return 0===l&&n+"[zero]"in i?e=i[n+"[zero]"][a]:1==l&&n+"[one]"in i?e=i[n+"[one]"][a]:2==l&&n+"[two]"in i?e=i[n+"[two]"][a]:n+c in i?e=i[n+c][a]:n+"[other]"in i&&(e=i[n+"[other]"][a]),e},{get:function(e,t,n){var i,a=e.lastIndexOf("."),o=r;a>0&&(o=e.substring(a+1),e=e.substring(0,a)),n&&((i={})[o]=n);var s=p(e,t,i);return s&&o in s?s[o]:"{{"+e+"}}"},getData:function(){return i},getText:function(){return a},getLanguage:function(){return o},setLanguage:function(e,t){d(e,function(){t&&t()})},getDirection:function(){var e=o.split("-",1)[0];return["ar","he","fa","ps","ur"].indexOf(e)>=0?"rtl":"ltr"},translate:function(e){for(var n=function(e){return e?e.querySelectorAll("*[data-l10n-id]"):[]}(e=e||t.documentElement),i=n.length,a=0;a<i;a++)g(n[a]);g(e)},getReadyState:function(){return l},ready:function(n){n&&("complete"==l||"interactive"==l?e.setTimeout(function(){n()}):t.addEventListener&&t.addEventListener("localized",function e(){t.removeEventListener("localized",e),n()}))}}}(window,document)},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.PDFPrintService=l;var i=n(2),a=n(1),r=n(3),o=null,s=null;function l(e,t,n,a){this.pdfDocument=e,this.pagesOverview=t,this.printContainer=n,this.l10n=a||i.NullL10n,this.disableCreateObjectURL=r.AppOptions.get("disableCreateObjectURL"),this.currentPage=-1,this.scratchCanvas=document.createElement("canvas")}l.prototype={layout:function(){this.throwIfInactive();var e=document.querySelector("body");e.setAttribute("data-pdfjsprinting",!0),this.pagesOverview.every(function(e){return e.width===this.pagesOverview[0].width&&e.height===this.pagesOverview[0].height},this)||console.warn("Not all pages have the same size. The printed result may be incorrect!"),this.pageStyleSheet=document.createElement("style");var t=this.pagesOverview[0];this.pageStyleSheet.textContent="@supports ((size:A4) and (size:1pt 1pt)) {@page { size: "+t.width+"pt "+t.height+"pt;}}",e.appendChild(this.pageStyleSheet)},destroy:function(){o===this&&(this.printContainer.textContent="",document.querySelector("body").removeAttribute("data-pdfjsprinting"),this.pageStyleSheet&&(this.pageStyleSheet.remove(),this.pageStyleSheet=null),this.scratchCanvas.width=this.scratchCanvas.height=0,this.scratchCanvas=null,o=null,v().then(function(){"printServiceOverlay"===s.active&&s.close("printServiceOverlay")}))},renderPages:function(){var e=this,t=this.pagesOverview.length;return new Promise(function n(a,s){if(e.throwIfInactive(),++e.currentPage>=t)return p(t,t,e.l10n),void a();var l=e.currentPage;p(l,t,e.l10n),function(e,t,n,a){var s=o.scratchCanvas,l=(r.AppOptions.get("printResolution")||150)/72;s.width=Math.floor(a.width*l),s.height=Math.floor(a.height*l);var c=Math.floor(a.width*i.CSS_UNITS)+"px",u=Math.floor(a.height*i.CSS_UNITS)+"px",h=s.getContext("2d");return h.save(),h.fillStyle="rgb(255, 255, 255)",h.fillRect(0,0,s.width,s.height),h.restore(),t.getPage(n).then(function(e){var t={canvasContext:h,transform:[l,0,0,l,0,0],viewport:e.getViewport({scale:1,rotation:a.rotation}),intent:"print"};return e.render(t).promise}).then(function(){return{width:c,height:u}})}(0,e.pdfDocument,l+1,e.pagesOverview[l]).then(e.useRenderedPage.bind(e)).then(function(){n(a,s)},s)})},useRenderedPage:function(e){this.throwIfInactive();var t=document.createElement("img");t.style.width=e.width,t.style.height=e.height;var n=this.scratchCanvas;"toBlob"in n&&!this.disableCreateObjectURL?n.toBlob(function(e){t.src=URL.createObjectURL(e)}):t.src=n.toDataURL();var i=document.createElement("div");return i.appendChild(t),this.printContainer.appendChild(i),new Promise(function(e,n){t.onload=e,t.onerror=n})},performPrint:function(){var e=this;return this.throwIfInactive(),new Promise(function(t){setTimeout(function(){e.active?(u.call(window),setTimeout(t,20)):t()},0)})},get active(){return this===o},throwIfInactive:function(){if(!this.active)throw new Error("This print request was cancelled or completed.")}};var c,u=window.print;function h(e){var t=document.createEvent("CustomEvent");t.initCustomEvent(e,!1,!1,"custom"),window.dispatchEvent(t)}function d(){o&&(o.destroy(),h("afterprint"))}function p(e,t,n){var i=document.getElementById("printServiceOverlay"),a=Math.round(100*e/t),r=i.querySelector("progress"),o=i.querySelector(".relative-progress");r.value=a,n.get("print_progress_percent",{progress:a},a+"%").then(function(e){o.textContent=e})}if(window.print=function(){if(o)console.warn("Ignored window.print() because of a pending print job.");else{v().then(function(){o&&s.open("printServiceOverlay")});try{h("beforeprint")}finally{if(!o)return console.error("Expected print service to be initialized."),void v().then(function(){"printServiceOverlay"===s.active&&s.close("printServiceOverlay")});var e=o;o.renderPages().then(function(){return e.performPrint()}).catch(function(){}).then(function(){e.active&&d()})}}},window.addEventListener("keydown",function(e){80!==e.keyCode||!e.ctrlKey&&!e.metaKey||e.altKey||e.shiftKey&&!window.chrome&&!window.opera||(window.print(),e.preventDefault(),e.stopImmediatePropagation?e.stopImmediatePropagation():e.stopPropagation())},!0),"onbeforeprint"in window){var f=function(e){"custom"!==e.detail&&e.stopImmediatePropagation&&e.stopImmediatePropagation()};window.addEventListener("beforeprint",f),window.addEventListener("afterprint",f)}function v(){if(!c){if(!(s=a.PDFViewerApplication.overlayManager))throw new Error("The overlay manager has not yet been initialized.");c=s.register("printServiceOverlay",document.getElementById("printServiceOverlay"),d,!0),document.getElementById("printCancel").onclick=d}return c}a.PDFPrintServiceFactory.instance={supportsPrinting:!0,createPrintService:function(e,t,n,i){if(o)throw new Error("The print service is created and active.");return o=new l(e,t,n,i)}}}])}n(106);var tt=new(function(){function e(){Object(s.a)(this,e)}return Object(l.a)(e,[{key:"getDPI",value:function(){return window.devicePixelRatio?window.devicePixelRatio:1}},{key:"getPageViewerRect",value:function(e){var t=window.PDFViewerApplication;if(t.pdfViewer.getPageView(e)){var n=t.pdfViewer.getPageView(e).div;return new j(n.offsetLeft+9,n.offsetTop+9,n.offsetWidth,n.offsetHeight)}return new j(0,0,0,0)}},{key:"shapeToViewerCoord",value:function(e,t,n,i,a){var r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,o=r||this.getPageViewerRect(e);return new j(t/tt.getDPI()+o.x,n/tt.getDPI()+o.y,i/tt.getDPI(),a/tt.getDPI())}},{key:"viewerToShapeCoord",value:function(e,t,n,i,a){var r=this.getPageViewerRect(e);return new j((t-r.x)*tt.getDPI(),(n-r.y)*tt.getDPI(),i*tt.getDPI(),a*tt.getDPI())}}]),e}()),nt=function(e){var t=e.children,n=e.onShapesSelected,r=Object(i.useState)(!1),o=Object(Xe.a)(r,2),s=o[0],l=o[1],c=Object(i.useState)({x:0,y:0,page:0,onText:!1}),u=Object(Xe.a)(c,2),h=u[0],d=u[1],p=Object(i.useState)({x:0,y:0}),f=Object(Xe.a)(p,2),v=f[0],g=f[1];function m(e){for(var t=e.target;null!==t;){if("page"===t.className)return t;t=t.parentElement}return null}return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{onMouseDown:function(e){if("BUTTON"!==e.target.tagName&&1===e.buttons){var t=m(e);if(null!==t){l(!0);var n=tt.getPageViewerRect(t.dataset.pageNumber-1),i=e.clientY-t.getBoundingClientRect().top-9+n.y,a=e.clientX-t.getBoundingClientRect().left-9+n.x,r={x:a,y:i,page:t.dataset.pageNumber-1,onText:"SPAN"===e.target.tagName};g({x:a,y:i}),d(r)}}},onMouseUp:function(e){if(0===e.button){l(!1);var t=function(){var e=h.page,t=(new j(Math.min(h.x,v.x),Math.min(h.y,v.y),Math.abs(v.x-h.x),Math.abs(v.y-h.y)),tt.viewerToShapeCoord(e,Math.min(h.x,v.x),Math.min(h.y,v.y),Math.abs(v.x-h.x),Math.abs(v.y-h.y))),n=[];if(window.PDFViewerApplication.pageShapeCommands&&window.PDFViewerApplication.pageShapeCommands[e])for(var i=window.PDFViewerApplication.pageShapeCommands[e],a=0;a<i.length;++a)if(i[a].isContained(t)){var r=i[a];n.push(r)}return{shapes:n,rect:t}}();n(t.shapes,t.rect)}},onMouseMove:function(e){if(m(e),1===e.buttons&&s){var t=tt.getPageViewerRect(h.page),n=window.PDFViewerApplication.pdfViewer.getPageView(h.page).div,i=e.clientY-n.getBoundingClientRect().top-9+t.y,a=e.clientX-n.getBoundingClientRect().left-9+t.x;g({x:a,y:i})}}},s&&a.a.createElement("div",{id:"rectangularSelection",style:{pointerEvents:"none",background:"#D7E1EC50",left:Math.min(h.x,v.x),top:Math.min(h.y,v.y),border:"dashed 2px #8E959C",width:Math.abs(h.x-v.x),height:Math.abs(h.y-v.y),position:"absolute",zIndex:9999}}),t))},it=n(10),at=n(49),rt=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={showLoadingPopup:!0},n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){void 0===window.pdfViewerLoaded&&(window.pdfViewerLoaded=et,et())}},{key:"onFileLoaded",value:function(e){var t=e.target.files[0],n=window.PDFViewerApplication;if(t.name.endsWith(".svg")){var i=new FileReader;i.onload=function(){var e=document.getElementById("svg-container");e.innerHTML=this.result;var t=e.firstElementChild;t.getBoundingClientRect();var i=t.width.baseVal.value,a=t.height.baseVal.value,r=new it.jsPDF(i>a?"l":"p","pt",[i,a]);Object(at.a)(t,r,{width:i,height:a}).then(function(e){n.open(e.output("datauristring"))})},i.readAsText(t)}else{n.setTitleUsingUrl(t.name);var a=new FileReader;a.onload=function(e){var t=e.target.result;n.open(new Uint8Array(t))},a.readAsArrayBuffer(t)}console.log(t)}},{key:"render",value:function(){var e=this;return a.a.createElement(a.a.Fragment,null,a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{id:"outerContainer"},a.a.createElement("div",{id:"sidebarContainer"},a.a.createElement("div",{id:"toolbarSidebar"},a.a.createElement("div",{className:"splitToolbarButton toggled"},a.a.createElement("button",{id:"viewThumbnail",className:"toolbarButton toggled",title:"Show Thumbnails",tabIndex:2,"data-l10n-id":"thumbs"},a.a.createElement("span",{"data-l10n-id":"thumbs_label"},"Thumbnails")),a.a.createElement("button",{id:"viewOutline",className:"toolbarButton",title:"Show Document Outline (double-click to expand/collapse all items)",tabIndex:3,"data-l10n-id":"document_outline"},a.a.createElement("span",{"data-l10n-id":"document_outline_label"},"Document Outline")),a.a.createElement("button",{id:"viewAttachments",className:"toolbarButton",title:"Show Attachments",tabIndex:4,"data-l10n-id":"attachments"},a.a.createElement("span",{"data-l10n-id":"attachments_label"},"Attachments")))),a.a.createElement("div",{id:"sidebarContent"},a.a.createElement("div",{id:"thumbnailView"}),a.a.createElement("div",{id:"outlineView",className:"hidden"}),a.a.createElement("div",{id:"attachmentsView",className:"hidden"})),a.a.createElement("div",{id:"sidebarResizer",className:"hidden"}))," ",a.a.createElement("div",{id:"mainContainer"},a.a.createElement("div",{className:"findbar hidden doorHanger",id:"findbar"},a.a.createElement("div",{id:"findbarInputContainer"},a.a.createElement("input",{id:"findInput",className:"toolbarField",title:"Find",placeholder:"Find in document\u2026",tabIndex:91,"data-l10n-id":"find_input"}),a.a.createElement("div",{className:"splitToolbarButton"},a.a.createElement("button",{id:"findPrevious",className:"toolbarButton findPrevious",title:"Find the previous occurrence of the phrase",tabIndex:92,"data-l10n-id":"find_previous"},a.a.createElement("span",{"data-l10n-id":"find_previous_label"},"Previous")),a.a.createElement("div",{className:"splitToolbarButtonSeparator"}),a.a.createElement("button",{id:"findNext",className:"toolbarButton findNext",title:"Find the next occurrence of the phrase",tabIndex:93,"data-l10n-id":"find_next"},a.a.createElement("span",{"data-l10n-id":"find_next_label"},"Next")))),a.a.createElement("div",{id:"findbarOptionsOneContainer"},a.a.createElement("input",{type:"checkbox",id:"findHighlightAll",className:"toolbarField",tabIndex:94}),a.a.createElement("label",{htmlFor:"findHighlightAll",className:"toolbarLabel","data-l10n-id":"find_highlight"},"Highlight all"),a.a.createElement("input",{type:"checkbox",id:"findMatchCase",className:"toolbarField",tabIndex:95}),a.a.createElement("label",{htmlFor:"findMatchCase",className:"toolbarLabel","data-l10n-id":"find_match_case_label"},"Match case")),a.a.createElement("div",{id:"findbarOptionsTwoContainer"},a.a.createElement("input",{type:"checkbox",id:"findEntireWord",className:"toolbarField",tabIndex:96}),a.a.createElement("label",{htmlFor:"findEntireWord",className:"toolbarLabel","data-l10n-id":"find_entire_word_label"},"Whole words"),a.a.createElement("span",{id:"findResultsCount",className:"toolbarLabel hidden"})),a.a.createElement("div",{id:"findbarMessageContainer"},a.a.createElement("span",{id:"findMsg",className:"toolbarLabel"})))," ",a.a.createElement("div",{id:"secondaryToolbar",className:"secondaryToolbar hidden doorHangerRight"},a.a.createElement("div",{id:"secondaryToolbarButtonContainer"},a.a.createElement("button",{id:"secondaryPresentationMode",className:"secondaryToolbarButton presentationMode visibleLargeView",title:"Switch to Presentation Mode",tabIndex:51,"data-l10n-id":"presentation_mode"},a.a.createElement("span",{"data-l10n-id":"presentation_mode_label"},"Presentation Mode")),a.a.createElement("button",{id:"secondaryOpenFile",className:"secondaryToolbarButton openFile visibleLargeView",title:"Open File",tabIndex:52,"data-l10n-id":"open_file"},a.a.createElement("span",{"data-l10n-id":"open_file_label"},"Open")),a.a.createElement("button",{id:"secondaryPrint",className:"secondaryToolbarButton print visibleMediumView",title:"Print",tabIndex:53,"data-l10n-id":"print"},a.a.createElement("span",{"data-l10n-id":"print_label"},"Print")),a.a.createElement("button",{id:"secondaryDownload",className:"secondaryToolbarButton download visibleMediumView",title:"Download",tabIndex:54,"data-l10n-id":"download"},a.a.createElement("span",{"data-l10n-id":"download_label"},"Download")),a.a.createElement("a",{href:"#",id:"secondaryViewBookmark",className:"secondaryToolbarButton bookmark visibleSmallView",title:"Current view (copy or open in new window)",tabIndex:55,"data-l10n-id":"bookmark"},a.a.createElement("span",{"data-l10n-id":"bookmark_label"},"Current View")),a.a.createElement("div",{className:"horizontalToolbarSeparator visibleLargeView"}),a.a.createElement("button",{id:"firstPage",className:"secondaryToolbarButton firstPage",title:"Go to First Page",tabIndex:56,"data-l10n-id":"first_page"},a.a.createElement("span",{"data-l10n-id":"first_page_label"},"Go to First Page")),a.a.createElement("button",{id:"lastPage",className:"secondaryToolbarButton lastPage",title:"Go to Last Page",tabIndex:57,"data-l10n-id":"last_page"},a.a.createElement("span",{"data-l10n-id":"last_page_label"},"Go to Last Page")),a.a.createElement("div",{className:"horizontalToolbarSeparator"}),a.a.createElement("button",{id:"pageRotateCw",className:"secondaryToolbarButton rotateCw",title:"Rotate Clockwise",tabIndex:58,"data-l10n-id":"page_rotate_cw"},a.a.createElement("span",{"data-l10n-id":"page_rotate_cw_label"},"Rotate Clockwise")),a.a.createElement("button",{id:"pageRotateCcw",className:"secondaryToolbarButton rotateCcw",title:"Rotate Counterclockwise",tabIndex:59,"data-l10n-id":"page_rotate_ccw"},a.a.createElement("span",{"data-l10n-id":"page_rotate_ccw_label"},"Rotate Counterclockwise")),a.a.createElement("div",{className:"horizontalToolbarSeparator"}),a.a.createElement("button",{id:"cursorSelectTool",className:"secondaryToolbarButton selectTool toggled",title:"Enable Text Selection Tool",tabIndex:60,"data-l10n-id":"cursor_text_select_tool"},a.a.createElement("span",{"data-l10n-id":"cursor_text_select_tool_label"},"Text Selection Tool")),a.a.createElement("button",{id:"cursorHandTool",className:"secondaryToolbarButton handTool",title:"Enable Hand Tool",tabIndex:61,"data-l10n-id":"cursor_hand_tool"},a.a.createElement("span",{"data-l10n-id":"cursor_hand_tool_label"},"Hand Tool")),a.a.createElement("div",{className:"horizontalToolbarSeparator"}),a.a.createElement("button",{id:"scrollVertical",className:"secondaryToolbarButton scrollModeButtons scrollVertical toggled",title:"Use Vertical Scrolling",tabIndex:62,"data-l10n-id":"scroll_vertical"},a.a.createElement("span",{"data-l10n-id":"scroll_vertical_label"},"Vertical Scrolling")),a.a.createElement("button",{id:"scrollHorizontal",className:"secondaryToolbarButton scrollModeButtons scrollHorizontal",title:"Use Horizontal Scrolling",tabIndex:63,"data-l10n-id":"scroll_horizontal"},a.a.createElement("span",{"data-l10n-id":"scroll_horizontal_label"},"Horizontal Scrolling")),a.a.createElement("button",{id:"scrollWrapped",className:"secondaryToolbarButton scrollModeButtons scrollWrapped",title:"Use Wrapped Scrolling",tabIndex:64,"data-l10n-id":"scroll_wrapped"},a.a.createElement("span",{"data-l10n-id":"scroll_wrapped_label"},"Wrapped Scrolling")),a.a.createElement("div",{className:"horizontalToolbarSeparator scrollModeButtons"}),a.a.createElement("button",{id:"spreadNone",className:"secondaryToolbarButton spreadModeButtons spreadNone toggled",title:"Do not join page spreads",tabIndex:65,"data-l10n-id":"spread_none"},a.a.createElement("span",{"data-l10n-id":"spread_none_label"},"No Spreads")),a.a.createElement("button",{id:"spreadOdd",className:"secondaryToolbarButton spreadModeButtons spreadOdd",title:"Join page spreads starting with odd-numbered pages",tabIndex:66,"data-l10n-id":"spread_odd"},a.a.createElement("span",{"data-l10n-id":"spread_odd_label"},"Odd Spreads")),a.a.createElement("button",{id:"spreadEven",className:"secondaryToolbarButton spreadModeButtons spreadEven",title:"Join page spreads starting with even-numbered pages",tabIndex:67,"data-l10n-id":"spread_even"},a.a.createElement("span",{"data-l10n-id":"spread_even_label"},"Even Spreads")),a.a.createElement("div",{className:"horizontalToolbarSeparator spreadModeButtons"}),a.a.createElement("button",{id:"documentProperties",className:"secondaryToolbarButton documentProperties",title:"Document Properties\u2026",tabIndex:68,"data-l10n-id":"document_properties"},a.a.createElement("span",{"data-l10n-id":"document_properties_label"},"Document Properties\u2026"))))," ",a.a.createElement("div",{className:"toolbar"},a.a.createElement("div",{id:"toolbarContainer"},a.a.createElement("div",{id:"toolbarViewer"},a.a.createElement("div",{id:"toolbarViewerLeft"},a.a.createElement("button",{id:"sidebarToggle",className:"toolbarButton",title:"Toggle Sidebar",tabIndex:11,"data-l10n-id":"toggle_sidebar"},a.a.createElement("span",{"data-l10n-id":"toggle_sidebar_label"},"Toggle Sidebar")),a.a.createElement("div",{className:"toolbarButtonSpacer"}),a.a.createElement("button",{id:"viewFind",className:"toolbarButton",title:"Find in Document",tabIndex:12,"data-l10n-id":"findbar"},a.a.createElement("span",{"data-l10n-id":"findbar_label"},"Find")),a.a.createElement("div",{className:"splitToolbarButton hiddenSmallView"},a.a.createElement("button",{className:"toolbarButton pageUp",title:"Previous Page",id:"previous",tabIndex:13,"data-l10n-id":"previous"},a.a.createElement("span",{"data-l10n-id":"previous_label"},"Previous")),a.a.createElement("div",{className:"splitToolbarButtonSeparator"}),a.a.createElement("button",{className:"toolbarButton pageDown",title:"Next Page",id:"next",tabIndex:14,"data-l10n-id":"next"},a.a.createElement("span",{"data-l10n-id":"next_label"},"Next"))),a.a.createElement("input",{type:"number",id:"pageNumber",className:"toolbarField pageNumber",title:"Page",defaultValue:1,size:4,min:1,tabIndex:15,"data-l10n-id":"page",autoComplete:"off"}),a.a.createElement("span",{id:"numPages",className:"toolbarLabel"})),a.a.createElement("div",{id:"toolbarViewerRight"},a.a.createElement("button",{id:"presentationMode",className:"toolbarButton presentationMode hiddenLargeView",title:"Switch to Presentation Mode",tabIndex:31,"data-l10n-id":"presentation_mode"},a.a.createElement("span",{"data-l10n-id":"presentation_mode_label"},"Presentation Mode")),a.a.createElement("button",{id:"openFile",className:"toolbarButton openFile hiddenLargeView",title:"Open File",tabIndex:32,"data-l10n-id":"open_file"},a.a.createElement("span",{"data-l10n-id":"open_file_label"},"Open")),a.a.createElement("button",{id:"print",className:"toolbarButton print hiddenMediumView",title:"Print",tabIndex:33,"data-l10n-id":"print"},a.a.createElement("span",{"data-l10n-id":"print_label"},"Print")),a.a.createElement("button",{id:"download",className:"toolbarButton download hiddenMediumView",title:"Download",tabIndex:34,"data-l10n-id":"download"},a.a.createElement("span",{"data-l10n-id":"download_label"},"Download")),a.a.createElement("a",{href:"#",id:"viewBookmark",className:"toolbarButton bookmark hiddenSmallView",title:"Current view (copy or open in new window)",tabIndex:35,"data-l10n-id":"bookmark"},a.a.createElement("span",{"data-l10n-id":"bookmark_label"},"Current View")),a.a.createElement("div",{className:"verticalToolbarSeparator hiddenSmallView"}),a.a.createElement("button",{id:"secondaryToolbarToggle",className:"toolbarButton",title:"Tools",tabIndex:36,"data-l10n-id":"tools"},a.a.createElement("span",{"data-l10n-id":"tools_label"},"Tools"))),a.a.createElement("div",{id:"toolbarViewerMiddle"},a.a.createElement("div",{className:"splitToolbarButton"},a.a.createElement("button",{id:"zoomOut",className:"toolbarButton zoomOut",title:"Zoom Out",tabIndex:21,"data-l10n-id":"zoom_out"},a.a.createElement("span",{"data-l10n-id":"zoom_out_label"},"Zoom Out")),a.a.createElement("div",{className:"splitToolbarButtonSeparator"}),a.a.createElement("button",{id:"zoomIn",className:"toolbarButton zoomIn",title:"Zoom In",tabIndex:22,"data-l10n-id":"zoom_in"},a.a.createElement("span",{"data-l10n-id":"zoom_in_label"},"Zoom In"))),a.a.createElement("span",{id:"scaleSelectContainer",className:"dropdownToolbarButton"},a.a.createElement("select",{id:"scaleSelect",title:"Zoom",tabIndex:23,defaultValue:"pageAutoOption","data-l10n-id":"zoom"},a.a.createElement("option",{id:"pageAutoOption",title:"",value:"auto","data-l10n-id":"page_scale_auto"},"Automatic Zoom"),a.a.createElement("option",{id:"pageActualOption",title:"",value:"page-actual","data-l10n-id":"page_scale_actual"},"Actual Size"),a.a.createElement("option",{id:"pageFitOption",title:"",value:"page-fit","data-l10n-id":"page_scale_fit"},"Page Fit"),a.a.createElement("option",{id:"pageWidthOption",title:"",value:"page-width","data-l10n-id":"page_scale_width"},"Page Width"),a.a.createElement("option",{id:"customScaleOption",title:"",value:"custom",disabled:!0,hidden:!0}),a.a.createElement("option",{title:"",value:"0.5","data-l10n-id":"page_scale_percent","data-l10n-args":'{ "scale": 50 }'},"50%"),a.a.createElement("option",{title:"",value:"0.75","data-l10n-id":"page_scale_percent","data-l10n-args":'{ "scale": 75 }'},"75%"),a.a.createElement("option",{title:"",value:1,"data-l10n-id":"page_scale_percent","data-l10n-args":'{ "scale": 100 }'},"100%"),a.a.createElement("option",{title:"",value:"1.25","data-l10n-id":"page_scale_percent","data-l10n-args":'{ "scale": 125 }'},"125%"),a.a.createElement("option",{title:"",value:"1.5","data-l10n-id":"page_scale_percent","data-l10n-args":'{ "scale": 150 }'},"150%"),a.a.createElement("option",{title:"",value:2,"data-l10n-id":"page_scale_percent","data-l10n-args":'{ "scale": 200 }'},"200%"),a.a.createElement("option",{title:"",value:3,"data-l10n-id":"page_scale_percent","data-l10n-args":'{ "scale": 300 }'},"300%"),a.a.createElement("option",{title:"",value:4,"data-l10n-id":"page_scale_percent","data-l10n-args":'{ "scale": 400 }'},"400%"))))),a.a.createElement("div",{id:"loadingBar"},a.a.createElement("div",{className:"progress"},a.a.createElement("div",{className:"glimmer"}))))),a.a.createElement("menu",{type:"context",id:"viewerContextMenu"},a.a.createElement("div",{id:"contextFirstPage","aria-label":"First Page","data-l10n-id":"first_page"}),a.a.createElement("div",{id:"contextLastPage","aria-label":"Last Page","data-l10n-id":"last_page"}),a.a.createElement("div",{id:"contextPageRotateCw","aria-label":"Rotate Clockwise","data-l10n-id":"page_rotate_cw"}),a.a.createElement("div",{id:"contextPageRotateCcw","aria-label":"Rotate Counter-Clockwise","data-l10n-id":"page_rotate_ccw"})),a.a.createElement("div",{id:"viewerContainer",tabIndex:0},a.a.createElement(nt,{onShapesSelected:this.props.onShapesSelected},a.a.createElement("div",{id:"viewer",className:"pdfViewer"}))),a.a.createElement("div",{style:{opacity:0,pointerEvents:"none"},id:"svg-container"}),this.state.showLoadingPopup&&a.a.createElement("div",{style:{position:"absolute",bottom:50,left:"50%",fontSize:25,zIndex:9999,transform:"translate(-50%, 0)",borderRadius:5,background:"rgba(20, 20, 20, 0.8)",padding:30,color:"white"}},a.a.createElement("input",{type:"file",id:"file-input",accept:".pdf,.svg",style:{display:"none"},onChange:this.onFileLoaded.bind(this)}),a.a.createElement("div",{onClick:function(){e.setState({showLoadingPopup:!1})},className:"exitButton",style:{position:"absolute",right:5,top:0}},a.a.createElement("i",{className:"fa fa-times-circle","aria-hidden":"true"})),a.a.createElement("i",{className:"fa fa-mouse-pointer","aria-hidden":"true"})," Select a chart to extract",a.a.createElement("br",null),"Or ",a.a.createElement("button",{style:{fontSize:25,paddingLeft:5,paddingRight:5},onClick:function(){document.getElementById("file-input").click()}}," ",a.a.createElement("i",{className:"fa fa-file-pdf-o","aria-hidden":"true"})," load a PDF/SVG"),"."),a.a.createElement("div",{id:"errorWrapper",hidden:!0},a.a.createElement("div",{id:"errorMessageLeft"},a.a.createElement("span",{id:"errorMessage"}),a.a.createElement("button",{id:"errorShowMore","data-l10n-id":"error_more_info"},"More Information"),a.a.createElement("button",{id:"errorShowLess","data-l10n-id":"error_less_info",hidden:!0},"Less Information")),a.a.createElement("div",{id:"errorMessageRight"},a.a.createElement("button",{id:"errorClose","data-l10n-id":"error_close"},"Close")),a.a.createElement("div",{className:"clearBoth"}),a.a.createElement("textarea",{id:"errorMoreInfo",hidden:!0,readOnly:!0,defaultValue:""})))," ",a.a.createElement("div",{id:"overlayContainer",className:"hidden"},a.a.createElement("div",{id:"passwordOverlay",className:"container hidden"},a.a.createElement("div",{className:"dialog"},a.a.createElement("div",{className:"row"},a.a.createElement("p",{id:"passwordText","data-l10n-id":"password_label"},"Enter the password to open this PDF file:")),a.a.createElement("div",{className:"row"},a.a.createElement("input",{type:"password",id:"password",className:"toolbarField"})),a.a.createElement("div",{className:"buttonRow"},a.a.createElement("button",{id:"passwordCancel",className:"overlayButton"},a.a.createElement("span",{"data-l10n-id":"password_cancel"},"Cancel")),a.a.createElement("button",{id:"passwordSubmit",className:"overlayButton"},a.a.createElement("span",{"data-l10n-id":"password_ok"},"OK"))))),a.a.createElement("div",{id:"documentPropertiesOverlay",className:"container hidden"},a.a.createElement("div",{className:"dialog"},a.a.createElement("div",{className:"row"},a.a.createElement("span",{"data-l10n-id":"document_properties_file_name"},"File name:")," ",a.a.createElement("p",{id:"fileNameField"},"-")),a.a.createElement("div",{className:"row"},a.a.createElement("span",{"data-l10n-id":"document_properties_file_size"},"File size:")," ",a.a.createElement("p",{id:"fileSizeField"},"-")),a.a.createElement("div",{className:"separator"}),a.a.createElement("div",{className:"row"},a.a.createElement("span",{"data-l10n-id":"document_properties_title"},"Title:")," ",a.a.createElement("p",{id:"titleField"},"-")),a.a.createElement("div",{className:"row"},a.a.createElement("span",{"data-l10n-id":"document_properties_author"},"Author:")," ",a.a.createElement("p",{id:"authorField"},"-")),a.a.createElement("div",{className:"row"},a.a.createElement("span",{"data-l10n-id":"document_properties_subject"},"Subject:")," ",a.a.createElement("p",{id:"subjectField"},"-")),a.a.createElement("div",{className:"row"},a.a.createElement("span",{"data-l10n-id":"document_properties_keywords"},"Keywords:")," ",a.a.createElement("p",{id:"keywordsField"},"-")),a.a.createElement("div",{className:"row"},a.a.createElement("span",{"data-l10n-id":"document_properties_creation_date"},"Creation Date:")," ",a.a.createElement("p",{id:"creationDateField"},"-")),a.a.createElement("div",{className:"row"},a.a.createElement("span",{"data-l10n-id":"document_properties_modification_date"},"Modification Date:")," ",a.a.createElement("p",{id:"modificationDateField"},"-")),a.a.createElement("div",{className:"row"},a.a.createElement("span",{"data-l10n-id":"document_properties_creator"},"Creator:")," ",a.a.createElement("p",{id:"creatorField"},"-")),a.a.createElement("div",{className:"separator"}),a.a.createElement("div",{className:"row"},a.a.createElement("span",{"data-l10n-id":"document_properties_producer"},"PDF Producer:")," ",a.a.createElement("p",{id:"producerField"},"-")),a.a.createElement("div",{className:"row"},a.a.createElement("span",{"data-l10n-id":"document_properties_version"},"PDF Version:")," ",a.a.createElement("p",{id:"versionField"},"-")),a.a.createElement("div",{className:"row"},a.a.createElement("span",{"data-l10n-id":"document_properties_page_count"},"Page Count:")," ",a.a.createElement("p",{id:"pageCountField"},"-")),a.a.createElement("div",{className:"row"},a.a.createElement("span",{"data-l10n-id":"document_properties_page_size"},"Page Size:")," ",a.a.createElement("p",{id:"pageSizeField"},"-")),a.a.createElement("div",{className:"separator"}),a.a.createElement("div",{className:"row"},a.a.createElement("span",{"data-l10n-id":"document_properties_linearized"},"Fast Web View:")," ",a.a.createElement("p",{id:"linearizedField"},"-")),a.a.createElement("div",{className:"buttonRow"},a.a.createElement("button",{id:"documentPropertiesClose",className:"overlayButton"},a.a.createElement("span",{"data-l10n-id":"document_properties_close"},"Close"))))),a.a.createElement("div",{id:"printServiceOverlay",className:"container hidden"},a.a.createElement("div",{className:"dialog"},a.a.createElement("div",{className:"row"},a.a.createElement("span",{"data-l10n-id":"print_progress_message"},"Preparing document for printing\u2026")),a.a.createElement("div",{className:"row"},a.a.createElement("progress",{value:0,max:100}),a.a.createElement("span",{"data-l10n-id":"print_progress_percent","data-l10n-args":'{ "progress": 0 }',className:"relative-progress"},"0%")),a.a.createElement("div",{className:"buttonRow"},a.a.createElement("button",{id:"printCancel",className:"overlayButton"},a.a.createElement("span",{"data-l10n-id":"print_progress_close"},"Cancel"))))))," ")," ",a.a.createElement("div",{id:"printContainer"})))}}]),t}(a.a.Component),ot=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={chartSelection:{}},n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"setSelectedChart",value:function(e,t){e.length>0&&this.setState({chartSelection:{shapes:e,rect:t}})}},{key:"getChart",value:function(){return{rect:this.state.chartSelection.rect,shapes:this.state.chartSelection.shapes}}},{key:"render",value:function(){return void 0===this.state.chartSelection.shapes?a.a.createElement("div",{className:"App"},a.a.createElement(rt,{onShapesSelected:this.setSelectedChart.bind(this)})):a.a.createElement("div",{className:"App"},a.a.createElement(Ge,{chart:this.getChart()}))}}]),t}(a.a.Component);o.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(ot,null)),document.getElementById("root"))},42:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=42},50:function(e,t,n){e.exports=n(112)},55:function(e,t,n){},58:function(e,t,n){}},[[50,1,2]]]);
//# sourceMappingURL=main.66a2bfe2.chunk.js.map